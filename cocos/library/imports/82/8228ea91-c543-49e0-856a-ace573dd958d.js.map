{"version":3,"sources":["assets\\Script\\login\\http.js"],"names":["https_url","HttpHelper","cc","Class","Component","statics","properties","onLoad","current","audioEngine","play","res","url","httpUrl","new_url","httpGets","callback","xhr","loader","getXMLHttpRequest","onreadystatechange","readyState","status","respone","responseText","open","sys","isNative","setRequestHeader","timeout","send","httpPost","params","JSON","parse","stringify","window"],"mappings":"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","sourceRoot":"/","sourcesContent":["/*\r\n * @Author: sjeam\r\n * @Date: 2022-06-13 16:34:52\r\n * @Description: \r\n */\r\n/**\r\n * Http 请求封装\r\n */\r\nvar https_url = 'https://www.aheart.cn';\r\nconst HttpHelper = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    statics: {\r\n    },\r\n\r\n    properties: {\r\n\r\n    },\r\n    onLoad () {\r\n        \r\n        // 从服务器加载mp3来进行播放\r\n        this.current = cc.audioEngine.play(res.url, false, 1);  \r\n    },\r\n    /**\r\n     * get请求\r\n     * @param {string} url\r\n     * @param {function} callback \r\n     */\r\n        httpUrl(new_url){\r\n            return https_url+'/app/api/file-content?url='+https_url+new_url;\r\n            //https://www.aheart.cn/app/api/file-content?url=https://www.aheart.cn/app/loading/loading.jpg\r\n        },\r\n        httpGets: function (url, callback) {\r\n            var url =https_url+url;\r\n            var xhr = cc.loader.getXMLHttpRequest();\r\n            xhr.onreadystatechange = function () {\r\n                if (xhr.readyState === 4 && (xhr.status >= 200 && xhr.status < 300)) {\r\n                    var respone = xhr.responseText;\r\n                    callback(respone);\r\n                }\r\n            };\r\n            xhr.open(\"GET\", url, true);\r\n            if (cc.sys.isNative) {\r\n                xhr.setRequestHeader(\"Accept-Encoding\", \"gzip,deflate\");\r\n            }\r\n        \r\n            // note: In Internet Explorer, the timeout property may be set only after calling the open()\r\n            // method and before calling the send() method.\r\n            xhr.timeout = 5000;// 5 seconds for timeout\r\n        \r\n            xhr.send();\r\n        },\r\n        \r\n        httpPost: function (url, params, callback) {\r\n            var url =https_url+url;\r\n            var xhr = cc.loader.getXMLHttpRequest();\r\n            xhr.onreadystatechange = function () {\r\n                // cc.log('xhr.readyState='+xhr.readyState+'  xhr.status='+xhr.status);\r\n                if (xhr.readyState === 4 && (xhr.status >= 200 && xhr.status < 300)) {\r\n                    var respone = xhr.responseText;\r\n                    callback(JSON.parse(respone));  // json 转数组\r\n                }else{\r\n                    //   callback(-1);\r\n                }\r\n            };\r\n            xhr.open(\"POST\", url, true);\r\n            if (cc.sys.isNative) {\r\n                xhr.setRequestHeader(\"Accept-Encoding\", \"gzip,deflate\");\r\n            }\r\n            // xhr.setRequestHeader(\"Http-Edition\", \"1.0.0.0\");  // 版本\r\n            // xhr.setRequestHeader(\"Ip\", \"192.168.1.1\");\r\n            // xhr.setRequestHeader(\"Http-Token\", \"gzipdeflate\");\r\n            xhr.timeout = 5000;// 5 seconds for timeout\r\n            // xhr.setRequestHeader('Content-Type', 'application/json,multipart/form-data');\r\n            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\r\n            // xhr.send(JSON.stringify(params));\r\n            xhr.send('data='+JSON.stringify(params));\r\n            //  xhr.send(params);\r\n\r\n        }\r\n});\r\n\r\nwindow.HttpHelper = new HttpHelper();"]}