{"version":3,"sources":["assets\\Script\\背包\\bag_详情按钮Tools.js"],"names":["cc","Class","Component","properties","biology_init","TipBoxPrefab_icon","biology_id","http_globalData","biology","id","goodsid","goodsinfo","is_bag","button_name","goods_key","httpRequestBagApi","http_update_goods","goods_update","zhuangbe_up","zhuangbei_down","biology_icon","TipBoxPrefab_biology","goods_image","bag","point","getComponent","Sprite","spriteFrame","http_globalAsset","http_base_asset_zhuangbei","TipBoxPrefab_biology_detail_shown","TipBoxPrefab_biology_detail","active","TipBoxPrefab_biology_detail_hidden","TipBoxPrefab_biology_detail_make","find","TipBoxPrefab_model","parent","children"],"mappings":"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","sourceRoot":"/","sourcesContent":["// require(\"../common\"); \r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n    //定义按钮事件类型 is_bag  0卸下 1装备\r\n    async biology_init(TipBoxPrefab_icon){\r\n        //加载背包 和  背包列表\r\n       var biology_id =  http_globalData.biology[http_globalData.biology_id].id;\r\n       //相同  卸下\r\n       if(http_globalData.goodsid==http_globalData.goodsinfo.id){ var is_bag=0 }else{ var is_bag=1 }\r\n        switch (http_globalData.button_name) {\r\n            case (\"装备1\"):\r\n                var goods_key ='gooduse1';\r\n                await   httpRequestBagApi.http_update_goods(biology_id,goods_key,http_globalData.goodsinfo.id,is_bag)\r\n                //1装备  0卸下\r\n                this.goods_update(TipBoxPrefab_icon,goods_key,is_bag)\r\n                break;\r\n            case (\"装备2\"):\r\n                var goods_key ='gooduse2';\r\n                await  httpRequestBagApi.http_update_goods(biology_id,goods_key,http_globalData.goodsinfo.id,is_bag)\r\n                this.goods_update(TipBoxPrefab_icon,goods_key,is_bag)\r\n                break;\r\n            case (\"元神\"):\r\n                var goods_key ='yuanShen';\r\n                await  httpRequestBagApi.http_update_goods(biology_id,goods_key,http_globalData.goodsinfo.id,is_bag)\r\n                this.goods_update(TipBoxPrefab_icon,goods_key,is_bag)\r\n                break;\r\n            default:\r\n        \r\n        }\r\n\r\n    },\r\n\r\n    goods_update(TipBoxPrefab_icon,goods_key,is_bag){\r\n        if(is_bag==1){\r\n            this.zhuangbe_up(TipBoxPrefab_icon,goods_key)\r\n        }else{\r\n            this.zhuangbei_down(TipBoxPrefab_icon,goods_key)\r\n        }\r\n    },\r\n    //图标回填\r\n    biology_icon(TipBoxPrefab_biology,goodsid){\r\n        if(goodsid){\r\n            var goods_image = http_globalData.bag[goodsid].point\r\n            TipBoxPrefab_biology.getComponent(cc.Sprite).spriteFrame = http_globalAsset.http_base_asset_zhuangbei[goods_image]\r\n        }else{\r\n            TipBoxPrefab_biology.getComponent(cc.Sprite).spriteFrame = ''; \r\n        }\r\n\r\n    },\r\n    //移除预制节点--选中的节点\r\n    TipBoxPrefab_biology_detail_shown(){\r\n        if(http_globalData.TipBoxPrefab_biology_detail){\r\n            http_globalData.TipBoxPrefab_biology_detail.active =true;\r\n        }\r\n    },\r\n    //隐藏\r\n    TipBoxPrefab_biology_detail_hidden(){\r\n        http_globalData.TipBoxPrefab_biology_detail = null\r\n    },\r\n    //选中节点\r\n    TipBoxPrefab_biology_detail_make(TipBoxPrefab_icon){\r\n        http_globalData.TipBoxPrefab_biology_detail = TipBoxPrefab_icon\r\n    },\r\n    zhuangbei_down(TipBoxPrefab_icon,goods_key){\r\n        //移除预制节点\r\n        this.TipBoxPrefab_biology_detail_hidden()\r\n        // 移除装备栏--返回背包\r\n        http_globalData.bag[http_globalData.goodsinfo.id].is_bag=0;\r\n        TipBoxPrefab_icon.active=true //背包显示\r\n        http_globalData.biology[http_globalData.biology_id][goods_key]=null; //装备栏不显示\r\n         //icon显示     \r\n        let TipBoxPrefab_biology = cc.find(\"生物详情/biology_end/\"+http_globalData.button_name,http_globalAsset.TipBoxPrefab_model)\r\n        this.biology_icon(TipBoxPrefab_biology,null)\r\n        http_globalData.goodsid = ''            //如果使用就重新绑定\r\n    },\r\n\r\n    zhuangbe_up(TipBoxPrefab_icon,goods_key){\r\n        // 添加到装备栏--移出背包\r\n        //如果原来装备栏有--装备，难么要返回背包\r\n        if(http_globalData.biology[http_globalData.biology_id][goods_key]){\r\n            //返回背包\r\n            http_globalData.bag[http_globalData.biology[http_globalData.biology_id][goods_key]].is_bag=0;\r\n            this.TipBoxPrefab_biology_detail_shown()\r\n        }else{\r\n            this.TipBoxPrefab_biology_detail_make(TipBoxPrefab_icon)\r\n        }\r\n        //隐藏当前物品--选中id\r\n        http_globalData.bag[http_globalData.goodsinfo.id].is_bag=1;\r\n        TipBoxPrefab_icon.active=false\r\n        http_globalData.biology[http_globalData.biology_id][goods_key]=http_globalData.goodsinfo.id;\r\n        //背包显示--回填装备栏物品\r\n        if(http_globalData.goodsid){\r\n            http_globalData.bag[http_globalData.goodsid].is_bag=0;\r\n            //因为是节点是0开始，所以要-1\r\n            TipBoxPrefab_icon.parent.children[http_globalData.goodsid-1].active=true\r\n        }\r\n        //info icon显示\r\n        let TipBoxPrefab_biology = cc.find(\"生物详情/biology_end/\"+http_globalData.button_name,http_globalAsset.TipBoxPrefab_model)\r\n        this.biology_icon(TipBoxPrefab_biology,http_globalData.goodsinfo.id)\r\n        http_globalData.goodsid = http_globalData.goodsinfo.id    //如果使用就重新绑定\r\n    },\r\n\r\n \r\n});\r\n"]}