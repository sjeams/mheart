{"version":3,"sources":["assets\\Script\\背包\\bag_详情按钮Tools.js"],"names":["cc","Class","Component","properties","biology_init","TipBoxPrefab_model","TipBoxPrefab_icon","info","button_name","is_bag","biology_id","http_globalData","biology","id","goods_key","httpRequestBagApi","http_update_goods","goods_update","zhuangbe_up","zhuangbei_down","biology_icon","TipBoxPrefab_biology","goodsid","goods_image","bag","point","getComponent","Sprite","spriteFrame","http_globalAsset","http_base_asset_zhuangbei","TipBoxPrefab_biology_detail_shown","TipBoxPrefab_biology_detail","active","TipBoxPrefab_biology_detail_hidden","TipBoxPrefab_biology_detail_make","find"],"mappings":"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","sourceRoot":"/","sourcesContent":["// require(\"../common\"); \r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n    //定义按钮事件类型 is_bag  0卸下 1装备\r\n    async biology_init(TipBoxPrefab_model,TipBoxPrefab_icon,info,button_name,is_bag){\r\n        //加载背包 和  背包列表\r\n       var biology_id =  http_globalData.biology[http_globalData.biology_id].id;\r\n        \r\n        switch (button_name) {\r\n            case (\"装备1\"):\r\n                var goods_key ='gooduse1';\r\n                await   httpRequestBagApi.http_update_goods(biology_id,goods_key,info.id,is_bag)\r\n                //1装备  0卸下\r\n                this.goods_update(TipBoxPrefab_model,TipBoxPrefab_icon,button_name,info,goods_key,is_bag)\r\n                break;\r\n            case (\"装备2\"):\r\n                var goods_key ='gooduse2';\r\n                await  httpRequestBagApi.http_update_goods(biology_id,goods_key,info.id,is_bag)\r\n                this.goods_update(TipBoxPrefab_model,TipBoxPrefab_icon,button_name,info,goods_key,is_bag)\r\n                break;\r\n            case (\"元神\"):\r\n                var goods_key ='yuanShen';\r\n                await  httpRequestBagApi.http_update_goods(biology_id,goods_key,info.id,is_bag)\r\n                this.goods_update(TipBoxPrefab_model,TipBoxPrefab_icon,button_name,info,goods_key,is_bag)\r\n                break;\r\n            default:\r\n        \r\n        }\r\n\r\n\r\n        // TipBoxPrefab_model.getChildByName('生物详情').removeAllChildren();\r\n        //重新挂载info\r\n        // TipBoxPrefab_model.getComponent('biology_infoTools').biology_detail_alert(TipBoxPrefab_model,http_globalData.biology[goodsid])\r\n\r\n    },\r\n\r\n    goods_update(TipBoxPrefab_model,TipBoxPrefab_icon,button_name,info,goods_key,is_bag){\r\n        if(is_bag==1){\r\n            this.zhuangbe_up(TipBoxPrefab_model,TipBoxPrefab_icon,button_name,info,goods_key)\r\n        }else{\r\n            this.zhuangbei_down(TipBoxPrefab_model,TipBoxPrefab_icon,button_name,info,goods_key)\r\n        }\r\n    },\r\n    //图标回填\r\n    biology_icon(TipBoxPrefab_biology,goodsid){\r\n        if(goodsid){\r\n            var goods_image = http_globalData.bag[goodsid].point\r\n            TipBoxPrefab_biology.getComponent(cc.Sprite).spriteFrame = http_globalAsset.http_base_asset_zhuangbei[goods_image]\r\n        }else{\r\n            TipBoxPrefab_biology.getComponent(cc.Sprite).spriteFrame = ''; \r\n        }\r\n\r\n    },\r\n    //移除预制节点--选中的节点\r\n    TipBoxPrefab_biology_detail_shown(){\r\n        if(http_globalData.TipBoxPrefab_biology_detail){\r\n            http_globalData.TipBoxPrefab_biology_detail.active =true;\r\n        }\r\n    },\r\n    //隐藏\r\n    TipBoxPrefab_biology_detail_hidden(){\r\n        http_globalData.TipBoxPrefab_biology_detail = null\r\n    },\r\n    //选中节点\r\n    TipBoxPrefab_biology_detail_make(TipBoxPrefab_icon){\r\n        http_globalData.TipBoxPrefab_biology_detail = TipBoxPrefab_icon\r\n    },\r\n    zhuangbei_down(TipBoxPrefab_model,TipBoxPrefab_icon,button_name,info,goods_key){\r\n        //移除预制节点\r\n        this.TipBoxPrefab_biology_detail_hidden()\r\n        // 移除装备栏--返回背包\r\n        http_globalData.bag[info.int].is_bag=0;\r\n        TipBoxPrefab_icon.active=true //背包显示\r\n        http_globalData.biology[http_globalData.biology_id][goods_key]=null; //装备栏不显示\r\n         //icon显示     \r\n        let TipBoxPrefab_biology = cc.find(\"生物详情/biology_end/\"+button_name,TipBoxPrefab_model)\r\n        this.biology_icon(TipBoxPrefab_biology,null)\r\n        http_globalData.goodsid = ''            //如果使用就重新绑定\r\n    },\r\n\r\n    zhuangbe_up(TipBoxPrefab_model,TipBoxPrefab_icon,button_name,info,goods_key){\r\n        // 添加到装备栏--移出背包\r\n        //如果原来装备栏有--装备，难么要返回背包\r\n        if(http_globalData.biology[http_globalData.biology_id][goods_key]){\r\n            //返回背包\r\n            http_globalData.bag[http_globalData.biology[http_globalData.biology_id][goods_key]].is_bag=0;\r\n            this.TipBoxPrefab_biology_detail_shown()\r\n        }else{\r\n            this.TipBoxPrefab_biology_detail_make(TipBoxPrefab_icon)\r\n        }\r\n        //隐藏当前物品\r\n        // cc.log(goodsid)\r\n        http_globalData.bag[info.int].is_bag=1;\r\n        TipBoxPrefab_icon.active=false\r\n        http_globalData.biology[http_globalData.biology_id][goods_key]=info.int;\r\n        //info icon显示\r\n        let TipBoxPrefab_biology = cc.find(\"生物详情/biology_end/\"+button_name,TipBoxPrefab_model)\r\n        this.biology_icon(TipBoxPrefab_biology,info.int)\r\n        http_globalData.goodsid = info.id    //如果使用就重新绑定\r\n    },\r\n\r\n \r\n});\r\n"]}