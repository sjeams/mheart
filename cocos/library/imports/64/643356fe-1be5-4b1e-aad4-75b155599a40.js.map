{"version":3,"sources":["assets\\Script\\fighting\\skill_iconTools.js"],"names":["cc","Class","Component","properties","start","biology_detail_skill","TipBoxPrefab","position_skill","_this","TOOLS","TipBoxPrefab_icon","loader","loadRes","errorMessage","loadedResource_icon","skill","prop","image","log","Prefab","instantiate","SpriteFrame","err","texture","getChildByName","getComponent","Sprite","spriteFrame","Label","string","type","on","bindClickEventIcon","Button","addChild","button","removeAllChildren","move_type","loadedResource","tips_Prefab","name","Math","abs","needValue","attack","star","i","hurtType","probability","belong","words","describe"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start () {\r\n\r\n    },\r\n    //技能图片渲染\r\n    biology_detail_skill(TipBoxPrefab,position_skill){\r\n        var _this =this;\r\n        var TOOLS =[];\r\n        var TOOLS = position_skill;\r\n        var TipBoxPrefab_icon=[];\r\n\r\n            //加载预制资源 PrefabUrl为 预制资源在 资源中的路径\r\n            cc.loader.loadRes('/model弹窗/biology_生物_技能图标', function(errorMessage,loadedResource_icon){\r\n              \r\n                for (var prop in position_skill) {\r\n                    let skill = TOOLS[prop];\r\n                    let image = '/技能图标/'+skill.image;\r\n              \r\n                //检查资源加载\r\n                if( errorMessage ) { cc.log( '载入预制资源失败, 原因:' + errorMessage ); return; }\r\n                if( !(loadedResource_icon instanceof cc.Prefab ) ) { cc.log( '你载入的不是预制资源!' ); return; }\r\n                //开始实例化预制资源\r\n                let   TipBoxPrefab_icon =  cc.instantiate(loadedResource_icon);\r\n                //载入技能图片\r\n                if(image!=''){\r\n                    cc.loader.loadRes(image, cc.SpriteFrame, function (err, texture) { \r\n                        if (err) {\r\n                            // cc.error(err.message || err);\r\n                            return;\r\n                        }\r\n                        TipBoxPrefab_icon.getChildByName('P技能').getComponent(cc.Sprite).spriteFrame = texture; \r\n                    });\r\n                }else{\r\n                    TipBoxPrefab_icon.getChildByName('P技能').getComponent(cc.Sprite).spriteFrame = false; \r\n                }\r\n                //技能等级\r\n                TipBoxPrefab_icon.getChildByName('技能s').getComponent(cc.Label).string=skill.type\r\n\r\n                // 由于加载资源的操作是异步的，如果在加载完成前就绑定了事件，有可能会触发事件的自动执行。\r\n                // 此处进行事件绑定\r\n                TipBoxPrefab_icon.on('click', function () {\r\n                    // 事件处理逻辑\r\n                    _this.bindClickEventIcon(TipBoxPrefab_icon.getComponent(cc.Button), skill,TipBoxPrefab,TipBoxPrefab_icon);\r\n                }, this);\r\n\r\n                //写入icon\r\n                TipBoxPrefab.getChildByName('技能列表').addChild(TipBoxPrefab_icon);\r\n            }\r\n        })\r\n        return TipBoxPrefab\r\n    },\r\n    // 绑定按钮事件\r\n    bindClickEventIcon: function (button, skill,TipBoxPrefab,TipBoxPrefab_icon) {\r\n        // cc.log(skill)\r\n        //加载预制资源 PrefabUrl为 预制资源在 资源中的路径\r\n\r\n        // 销毁所有弹窗--节点\r\n        TipBoxPrefab.getChildByName('技能描述').removeAllChildren();\r\n\r\n        let move_type= ['初始化','回合化','被击前触发','被击后触发','攻击前触发','主动','攻击后']\r\n        cc.loader.loadRes('/model弹窗/biology_生物_战斗技能提示', function(errorMessage,loadedResource){\r\n            //检查资源加载\r\n            if( errorMessage ) { cc.log( '载入预制资源失败, 原因:' + errorMessage ); return; }\r\n            if( !(loadedResource instanceof cc.Prefab ) ) { cc.log( '你载入的不是预制资源!' ); return; }\r\n            //开始实例化预制资源\r\n            let tips_Prefab = cc.instantiate(loadedResource);\r\n            tips_Prefab.getChildByName('D技能图标').getComponent(cc.Sprite).spriteFrame = TipBoxPrefab_icon.getChildByName('P技能').getComponent(cc.Sprite).spriteFrame\r\n            tips_Prefab.getChildByName('D技能名称s').getComponent(cc.Label).string=skill.name+'-['+skill.type+']'\r\n            tips_Prefab.getChildByName('D技能消耗s').getComponent(cc.Label).string='消耗：'+Math.abs(skill.needValue)\r\n            var attack=skill.attack==0?'被动':'主动'\r\n            tips_Prefab.getChildByName('D技能类型s').getComponent(cc.Label).string='触发: '+attack\r\n            var star ='';    \r\n            for(var i=0;i<=skill['type'];i++){\r\n                star +='☆';\r\n            }\r\n            tips_Prefab.getChildByName('D技能星级s').getComponent(cc.Label).string='稀有程度：'+star\r\n            var hurtType=skill.hurtType==1?'物理':'法术'\r\n            tips_Prefab.getChildByName('D技能攻击s').getComponent(cc.Label).string='攻击类型: '+hurtType\r\n            tips_Prefab.getChildByName('D技能触发s').getComponent(cc.Label).string='触发几率：'+skill.probability+'%'\r\n            tips_Prefab.getChildByName('D发动时机s').getComponent(cc.Label).string='攻击类型: '+move_type[skill.belong]\r\n            tips_Prefab.getChildByName('D技能来源s').getComponent(cc.Label).string='技能来源：'+skill.words \r\n            tips_Prefab.getChildByName('D技能描述s').getComponent(cc.Label).string='技能说明：'+skill.describe\r\n\r\n            //载入生物详情\r\n            TipBoxPrefab.getChildByName('技能描述').addChild(tips_Prefab);\r\n\r\n        });\r\n\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}