{"version":3,"sources":["assets\\Script\\战斗\\skill_iconTools.js"],"names":["cc","Class","Component","properties","start","biology_detail_skill","TipBoxPrefab","position_skill","_this","TOOLS","skill","prop","TipBoxPrefab_icon","instantiate","http_globalAsset","model_biology_SkillIcon","log","http_base_asset_skill","getChildByName","getComponent","Sprite","spriteFrame","image","Label","string","type","on","bindClickEventIcon","addChild","removeAllChildren","move_type","tips_Prefab","model_biology_SkillTips","name","Math","abs","needValue","attack","star","i","hurtType","probability","belong","words","describe"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n    },\r\n    // onLoad () {},\r\n\r\n    start () {\r\n\r\n    },\r\n    //技能图片渲染\r\n    biology_detail_skill(TipBoxPrefab,position_skill){\r\n        var _this =this;\r\n        var TOOLS =[];\r\n        var TOOLS = position_skill;\r\n        for (var prop in position_skill) {\r\n            let skill = TOOLS[prop];\r\n        //开始实例化预制资源\r\n        let   TipBoxPrefab_icon =  cc.instantiate(http_globalAsset.model_biology_SkillIcon);\r\n            // 图标技能\r\n            cc.log(http_globalAsset.http_base_asset_skill)\r\n            TipBoxPrefab_icon.getChildByName('P技能').getComponent(cc.Sprite).spriteFrame = http_globalAsset.http_base_asset_skill[skill.image]\r\n        // });\r\n        //技能等级\r\n        TipBoxPrefab_icon.getChildByName('技能s').getComponent(cc.Label).string=skill.type\r\n        // 由于加载资源的操作是异步的，如果在加载完成前就绑定了事件，有可能会触发事件的自动执行。\r\n        // 此处进行事件绑定\r\n        TipBoxPrefab_icon.on('click', function () {\r\n            // 事件处理逻辑\r\n            _this.bindClickEventIcon(skill,TipBoxPrefab);\r\n        }, this);\r\n        //写入icon\r\n        TipBoxPrefab.getChildByName('技能列表').addChild(TipBoxPrefab_icon);\r\n        }\r\n        return TipBoxPrefab\r\n    },\r\n    // 绑定按钮事件\r\n    bindClickEventIcon: function ( skill,TipBoxPrefab) {\r\n        //加载预制资源 PrefabUrl为 预制资源在 资源中的路径\r\n        // 销毁所有弹窗--节点\r\n        TipBoxPrefab.getChildByName('技能描述').removeAllChildren();\r\n        let move_type= ['初始化','回合化','被击前触发','被击后触发','攻击前触发','主动','攻击后']\r\n        //开始实例化预制资源\r\n        let tips_Prefab = cc.instantiate(http_globalAsset.model_biology_SkillTips);\r\n        tips_Prefab.getChildByName('D技能图标').getComponent(cc.Sprite).spriteFrame  =  http_globalAsset.http_base_asset_skill[skill.image]\r\n        tips_Prefab.getChildByName('D技能名称s').getComponent(cc.Label).string=skill.name+'-['+skill.type+']'\r\n        tips_Prefab.getChildByName('D技能消耗s').getComponent(cc.Label).string='消耗：'+Math.abs(skill.needValue)\r\n        var attack=skill.attack==0?'被动':'主动'\r\n        tips_Prefab.getChildByName('D技能类型s').getComponent(cc.Label).string='触发: '+attack\r\n        var star ='';    \r\n        for(var i=0;i<=skill['type'];i++){\r\n            star +='☆';\r\n        }\r\n        tips_Prefab.getChildByName('D技能星级s').getComponent(cc.Label).string='稀有程度：'+star\r\n        var hurtType=skill.hurtType==1?'物理':'法术'\r\n        tips_Prefab.getChildByName('D技能攻击s').getComponent(cc.Label).string='攻击类型: '+hurtType\r\n        tips_Prefab.getChildByName('D技能触发s').getComponent(cc.Label).string='触发几率：'+skill.probability+'%'\r\n        tips_Prefab.getChildByName('D发动时机s').getComponent(cc.Label).string='攻击类型: '+move_type[skill.belong]\r\n        tips_Prefab.getChildByName('D技能来源s').getComponent(cc.Label).string='技能来源：'+skill.words \r\n        tips_Prefab.getChildByName('D技能描述s').getComponent(cc.Label).string='技能说明：'+skill.describe\r\n        //载入生物详情\r\n        TipBoxPrefab.getChildByName('技能描述').addChild(tips_Prefab);\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}