{"version":3,"sources":["assets\\Script\\login\\register_in.js"],"names":["HttpHelper","require","httpRequest","cc","Class","Component","properties","alert_register_in","Label","name_register_in_login","EditBox","password_register_in_login","repassword_register_in_login","toggle_register_in","Toggle","onLoad","register","loginname","getComponent","string","password","repassword","toggle","isChecked","_this","phoneReg","length","params","httpPostLogin","data","log","code","sys","localStorage","setItem","node","active","callback","event","start","show_dlg","hidden_dlg"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\nvar HttpHelper = require(\"http\");\r\n// var fs = require('fs'); // 引入fs模块\r\n// var globaluserinfo = require(\"GlobaluserInfo\");\r\nlet httpRequest =  new HttpHelper();  \r\ncc.Class({\r\n    extends: cc.Component,\r\n \r\n    properties: {\r\n        alert_register_in: cc.Label,\r\n        name_register_in_login: cc.EditBox,\r\n        password_register_in_login: cc.EditBox,\r\n        repassword_register_in_login: cc.EditBox,\r\n        toggle_register_in: cc.Toggle\r\n    },\r\n \r\n    onLoad: function () {      \r\n        \r\n        // this.tokenlogin(); // 快捷登录\r\n\r\n        // 操作文本--读取用户信息\r\n   \r\n        // // 账号密码登录\r\n        // this.login();\r\n        //储存缓存\r\n        // cc.sys.localStorage.setItem('token', value);\r\n        // cc.sys.localStorage.getItem(key);\r\n        // cc.sys.localStorage.removeItem(key);\r\n\r\n        // 保存最高分到本地\r\n        // const KEY_BEST_SCORE = \"bestScore\";\r\n        // let bestScore = cc.sys.localStorage.getItem(KEY_BEST_SCORE);\r\n        // if (bestScore === \"null\" || this.score > bestScore) {\r\n        //     bestScore = this.score;\r\n        // }\r\n        // cc.sys.localStorage.setItem(KEY_BEST_SCORE, bestScore);\r\n        \r\n    },\r\n \r\n    register: function(){\r\n       \r\n        var loginname = this.name_register_in_login.getComponent(cc.EditBox).string;\r\n        var password = this.password_register_in_login.getComponent(cc.EditBox).string;\r\n        var repassword = this.repassword_register_in_login.getComponent(cc.EditBox).string;\r\n        // 是否勾选\r\n        var toggle = this.toggle_register_in.getComponent(cc.Toggle).isChecked;\r\n        var  _this =this;\r\n        //手机格式验证\r\n        let phoneReg = /(^1[3|4|5|6|7|8|9]\\d{9}$)|(^09\\d{8}$)/;\r\n        if(loginname==false){\r\n            _this.alert_register_in.string ='请输入手机号码!';\r\n            return false;\r\n        }else if(phoneReg==false){\r\n            _this.alert_register_in.string ='手机号码格式错误!';\r\n            return false;\r\n        }else if(password.length<6){\r\n            _this.alert_register_in.string ='密码不能少于6位数!';\r\n            return false;\r\n        }else if(password!=repassword){\r\n            _this.alert_register_in.string ='两次输入密码不一致!';\r\n            return false;\r\n        }else if(toggle==false){\r\n            _this.alert_register_in.string ='请阅读并同意相关协议!';\r\n           return false;\r\n        }else{\r\n            var params = {\r\n                'loginname': loginname,\r\n                'password': password,\r\n                // 'loginname': 'yincan1993',\r\n                // 'password': 123456,\r\n            };\r\n        \r\n            httpRequest.httpPostLogin('/app/api-server/register-in', params ,function (data) {\r\n                cc.log(data); \r\n                if(data.code==1){\r\n                    // _this.register_alert.color =  new cc.color('#BDFF00');\r\n                    _this.alert_register_in.string ='';\r\n                    // cc.sys.localStorage.setItem('token', data.data.token);\r\n                    cc.sys.localStorage.setItem('loginname', loginname);\r\n                    cc.sys.localStorage.setItem('password', password);\r\n                    _this.node.active =false;\r\n                }else{\r\n                    _this.alert_register_in.string ='手机号已存在，请重试!';\r\n                }\r\n                //操作文本--修改用户信息\r\n            });\r\n       }\r\n\r\n\r\n\r\n\r\n    },\r\n\r\n  \r\n    callback: function (event) {\r\n        // cc.log(data)\r\n        // var userCount =  cc.find(\"Canvas/ground/editbox_count\").getComponent(cc.EditBox).string;\r\n        // var userPassward =  cc.find(\"Canvas/ground/editbox_passward\").getComponent(cc.EditBox).string;\r\n        // console.log(\"用户账号：\"+userCount+ \"用户密码：\"+ userPassward);\r\n        // HttpHelp.login(userCount,userPassward,function(isSuccess,Data){\r\n        //     var info = Data;\r\n        //     if(true == isSuccess){\r\n        //         console.log(\"login  success!!!\");\r\n        //         console.log(info);\r\n        //         globaluserinfo.username = info.username;\r\n        //         globaluserinfo.gamepoint = info.gamepoint;\r\n        //         globaluserinfo.skey = info.skey;\r\n        //         globaluserinfo.userid = info.userid;\r\n \r\n        //         globaluserinfo.money = info.money;\r\n        //         globaluserinfo.userid = info.userid;\r\n        //         globaluserinfo.password = info.password;\r\n        //         globaluserinfo.salt = info.salt;\r\n \r\n        //         //登录成功后加载地图资源\r\n                // cc.director.loadScene('map');\r\n        //     }else{\r\n        //         console.log(\"login  filed!!!\")\r\n        //     }\r\n        // });\r\n        \r\n    },\r\n \r\n    start () {\r\n \r\n    },\r\n \r\n    // update (dt) {},\r\n\r\n    show_dlg () {\r\n        //显示出现账号密码\r\n        // var loginname =cc.sys.localStorage.getItem('loginname');\r\n        // var password =cc.sys.localStorage.getItem('password');\r\n        // if(loginname){\r\n        //     this.register_login_name.getComponent(cc.EditBox).string=loginname;\r\n        // }\r\n        // if(loginname){\r\n        //     this.register_login_password.getComponent(cc.EditBox).string=password;\r\n        // }\r\n        this.node.active =true;\r\n\r\n    },\r\n    hidden_dlg () {\r\n        this.node.active =false;\r\n    }\r\n});\r\n"]}