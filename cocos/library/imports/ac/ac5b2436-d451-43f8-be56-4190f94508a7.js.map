{"version":3,"sources":["assets\\Script\\登录\\score_jiaose.js"],"names":["require","cc","Class","Component","properties","onLoad","biology_detail_list","start","info_list","http_globalData","user_jiaose","log","TipBoxPrefab_model","find","_this","TOOLS","loader","loadRes","errorMessage","loadedResource_icon","Prefab","TipBoxPrefab_icon","instantiate","info","prop","image","jiaose","picture","SpriteFrame","err","texture","getChildByName","getComponent","Sprite","spriteFrame","onConfirBtn","addChild","clickButton","children","actionBlink_show","on","user_jiaose_check","active","runing","actionhiddenBig","spawn","rotateBy","scaleTo","delayTime","actionhiddenSmoll","repeatAction","repeatForever","sequence","callFunc","runAction","stopAllActions","createUser","back_login","director","loadScene","httpRequest","urlConfig"],"mappings":"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","sourceRoot":"/","sourcesContent":[" \r\nrequire(\"../common\"); \r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n    },\r\n   async onLoad () {\r\n        this.biology_detail_list()\r\n    },\r\n    start () {\r\n   \r\n    },\r\n    //技能图片渲染\r\n    biology_detail_list(){\r\n        var info_list = http_globalData.user_jiaose\r\n        cc.log(info_list)\r\n        var TipBoxPrefab_model = cc.find('Canvas/大厅/content')\r\n        var _this =this;\r\n        var TOOLS =[];\r\n        var TOOLS = info_list;\r\n        // let image = '/技能图标/'+skill.image;\r\n        //加载预制资源 PrefabUrl为 预制资源在 资源中的路径\r\n        cc.loader.loadRes('/model召唤/sprite_生物角色', function(errorMessage,loadedResource_icon){\r\n            //检查资源加载\r\n            if( errorMessage ) { cc.log( '载入预制资源失败, 原因:' + errorMessage ); return; }\r\n            if( !(loadedResource_icon instanceof cc.Prefab ) ) { cc.log( '你载入的不是预制资源!' ); return; }\r\n            //开始实例化预制资源\r\n            for (var prop in info_list) {\r\n                //声明节点对象\r\n                let TipBoxPrefab_icon =  cc.instantiate(loadedResource_icon);\r\n                let info = TOOLS[prop];\r\n                //放在资源下面\r\n                let image = info.jiaose.picture;\r\n                if(info.jiaose){\r\n                    cc.loader.loadRes(image, cc.SpriteFrame, function (err, texture) { \r\n                        if (err) {\r\n                            // cc.error(err.message || err);\r\n                            return;\r\n                        }\r\n                        TipBoxPrefab_icon.getChildByName('生物').getComponent(cc.Sprite).spriteFrame = texture; \r\n                    });\r\n                    TipBoxPrefab_icon.info =info\r\n                    // var color = ['#ffffff','green','#BDFF00','#FFD100','#FF0000','#ffe000',];\r\n                    // var type_color = color[info['type']];\r\n                    // // console.log(info)\r\n                    // var star ='';    \r\n                    // for(var i=0;i<=info['star'];i++){\r\n                    //     star +='⭐';\r\n                    // }\r\n                    // TipBoxPrefab_icon.getChildByName('名称').getComponent(cc.Label).string=info.name;\r\n                    // TipBoxPrefab_icon.getChildByName('名称').color = new cc.color(type_color);\r\n                    // TipBoxPrefab_icon.getChildByName('世界等级').getComponent(cc.Label).string= info.type_name;\r\n                    // TipBoxPrefab_icon.getChildByName('世界等级').color = new cc.color(type_color);\r\n                    // TipBoxPrefab_icon.getChildByName('星级').getComponent(cc.Label).string= star;\r\n                    //创建一个新button 并将其挂载到创建的精灵下\r\n                    _this.onConfirBtn(TipBoxPrefab_icon);\r\n                    //写入icon\r\n                    TipBoxPrefab_model.addChild(TipBoxPrefab_icon);\r\n                }\r\n            }\r\n            _this.clickButton(cc.find('Canvas/大厅/content').children[0])\r\n     \r\n        })\r\n        // return TipBoxPrefab_model;\r\n        // TipBoxPrefab_model.children[0].emit('click', _this.onConfirBtn,this);\r\n        // onConfirBtn(TipBoxPrefab_model.children[0],info_list[0].jiaose.picture)\r\n    },\r\n    //按钮点击回调\r\n    onConfirBtn(TipBoxPrefab_icon){\r\n        var _this =this;\r\n        _this.actionBlink_show(TipBoxPrefab_icon,1)\r\n        TipBoxPrefab_icon.on('click', function () {\r\n            _this.clickButton(TipBoxPrefab_icon)\r\n    \r\n            //session设置战斗请求id\r\n            // cc.sys.localStorage.setItem('figthing_map_int', JSON.stringify(map_int)); \r\n            // httpRequest.playGame(\"sence_zhandou\",1,1)\r\n        })\r\n    },\r\n    clickButton(TipBoxPrefab_icon){\r\n        if(http_globalData.user_jiaose_check){\r\n            http_globalData.user_jiaose_check.getChildByName('遮罩').active=true;\r\n            // this.actionBlink_show(http_globalData.user_jiaose_check,0)\r\n        }\r\n        TipBoxPrefab_icon.getChildByName('遮罩').active=false;\r\n        http_globalData.user_jiaose_check = TipBoxPrefab_icon;\r\n        // this.actionBlink_show(TipBoxPrefab_icon,1)\r\n    },\r\n      //重复闪烁\r\n    actionBlink_show(TipBoxPrefab_icon,runing){\r\n        var _this=this;\r\n        // 创建旋转动作，这里以每秒绕X轴旋转360度为例\r\n        // const rotateAction = cc.rotateBy(5,360)\r\n        // const rotateAction = cc.blink(1,1)\r\n        // const actionhiddenOn = cc.fadeTo(0.1,0);\r\n        // const actionhiddenoff = cc.fadeTo(0.1,255); \r\n        const actionhiddenBig = cc.spawn(cc.rotateBy(5,360),cc.scaleTo(5,1.2,1.2),cc.delayTime(1))\r\n        const actionhiddenSmoll   = cc.spawn(cc.rotateBy(5,360),cc.scaleTo(5,1,1),cc.delayTime(1))\r\n        if(runing){\r\n            const  repeatAction  = cc.repeatForever(cc.sequence(actionhiddenBig,actionhiddenSmoll),cc.callFunc(function(){   },this))\r\n            TipBoxPrefab_icon.getChildByName('旋转').runAction(repeatAction);\r\n        }else{\r\n            TipBoxPrefab_icon.getChildByName('旋转').stopAllActions();\r\n        }\r\n    },\r\n    // update (dt) {},\r\n    //创建角色 ，登录 ，跳转大厅\r\n    createUser(){\r\n    // cc.sys.localStorage.setItem('userinfo', JSON.stringify(data.data.userinfo)); \r\n    // httpRequest.playGame(\"sence_dating\");\r\n    },\r\n    back_login(){\r\n        //移除节点\r\n        // httpRequest.playGame(\"sence_login\")\r\n        cc.director.loadScene(httpRequest.urlConfig(\"sence_login\"));\r\n    },\r\n});\r\n\r\n"]}