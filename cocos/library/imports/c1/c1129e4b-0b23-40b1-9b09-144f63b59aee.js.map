{"version":3,"sources":["assets\\Script\\home\\biology_infoTools.js"],"names":["HttpHelper","require","httpRequest","cc","Class","Component","properties","biology_detail_alert","TipBoxPrefab_model","info","_this","loader","loadRes","errorMessage","loadedResource_icon","log","Prefab","TipBoxPrefab","instantiate","biology_detail_list","getChildByName","addChild","getComponent","Label","string","name","zhong_zhu","grade","image","httpUrl","picture","load","url","err","texture","Sprite","spriteFrame","SpriteFrame","special","score","yiXing","active","scoreGrade","maxNature","need_expe","state_name","bindClickEventIcon","button","TipBoxPrefab_icon"],"mappings":"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","sourceRoot":"/","sourcesContent":["var HttpHelper = require(\"../http\"); \r\nvar httpRequest = new HttpHelper();\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n    //技能图片渲染\r\n    biology_detail_alert(TipBoxPrefab_model,info){\r\n        var _this=this;\r\n        cc.loader.loadRes('/弹窗背包/生物详情', function(errorMessage,loadedResource_icon){\r\n            //检查资源加载\r\n            if( errorMessage ) { cc.log( '载入预制资源失败, 原因:' + errorMessage ); return; }\r\n            if( !(loadedResource_icon instanceof cc.Prefab ) ) { cc.log( '你载入的不是预制资源!' ); return; }\r\n            //开始实例化预制资源\r\n            let   TipBoxPrefab =  cc.instantiate(loadedResource_icon);\r\n            //技能等级\r\n            // TipBoxPrefab.getChildByName('生物数量s').getComponent(cc.Label).string='生物('+info_list.length+'/60)'\r\n            // 由于加载资源的操作是异步的，如果在加载完成前就绑定了事件，有可能会触发事件的自动执行。\r\n            _this.biology_detail_list(TipBoxPrefab,info)\r\n            //写入icon\r\n            TipBoxPrefab_model.getChildByName('生物详情').addChild(TipBoxPrefab);\r\n            return TipBoxPrefab_model\r\n        })\r\n        return TipBoxPrefab_model\r\n    },\r\n\r\n    //技能图片渲染\r\n    biology_detail_list(TipBoxPrefab,info){\r\n        // TipBoxPrefab.getChildByName('血s').getComponent(cc.Label).string= info.shengMing\r\n        // TipBoxPrefab.getChildByName('蓝s').getComponent(cc.Label).string= info.moFa\r\n        TipBoxPrefab.getChildByName('生物名称s').getComponent(cc.Label).string=info.name\r\n        TipBoxPrefab.getChildByName('种族s').getComponent(cc.Label).string=info.zhong_zhu+'族'\r\n        TipBoxPrefab.getChildByName('生物等级s').getComponent(cc.Label).string='等级'+info.grade\r\n        // TipBoxPrefab.getChildByName('触发概率s').getComponent(cc.Label).string='触发率'+info.chuFa+'%'\r\n        // //生物命名必须叫生物\r\n        //载入技能图片\r\n        let image =  httpRequest.httpUrl(info.picture);\r\n        if(image){\r\n            cc.loader.load({ url: image }, function (err, texture) {  \r\n            // cc.loader.loadRes(image, cc.SpriteFrame, function (err, texture) { \r\n                if (err) {\r\n                    return;\r\n                }\r\n                // TipBoxPrefab_icon.getChildByName('P头像').getComponent(cc.Sprite).spriteFrame = texture; \r\n                TipBoxPrefab.getChildByName('生物').getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n            });\r\n        }else{\r\n            TipBoxPrefab.getChildByName('生物').getComponent(cc.Sprite).spriteFrame = false; \r\n        }\r\n        TipBoxPrefab.getChildByName('战力s').getComponent(cc.Label).string='战力'+info.special\r\n        TipBoxPrefab.getChildByName('评分s').getComponent(cc.Label).string='评分:'+info.score/10\r\n\r\n\r\n        if(info.yiXing==1){\r\n            cc.log(1111)\r\n            TipBoxPrefab.getChildByName('异形').active=true;\r\n        }else{\r\n            cc.log(222)\r\n            TipBoxPrefab.getChildByName('异形').active=false;\r\n        }\r\n        cc.log(info)\r\n        TipBoxPrefab.getChildByName('稀有s').getComponent(cc.Label).string= info.scoreGrade\r\n        TipBoxPrefab.getChildByName('慧根值s').getComponent(cc.Label).string= info.maxNature\r\n        TipBoxPrefab.getChildByName('经验s').getComponent(cc.Label).string= info.need_expe\r\n\r\n        TipBoxPrefab.getChildByName('境界s').getComponent(cc.Label).string= info.state_name\r\n        // TipBoxPrefab.getChildByName('稀有s').getComponent(cc.Label).string= info.scoreGrade\r\n        // TipBoxPrefab.getChildByName('稀有s').getComponent(cc.Label).string= info.scoreGrade\r\n        // TipBoxPrefab.getChildByName('稀有s').getComponent(cc.Label).string= info.scoreGrade\r\n        // TipBoxPrefab.getChildByName('战力s').getComponent(cc.Label).string='力量:'+info.power\r\n        // TipBoxPrefab.getChildByName('战力s').getComponent(cc.Label).string='力量:'+info.power\r\n        // TipBoxPrefab.getChildByName('战力s').getComponent(cc.Label).string='力量:'+info.power\r\n\r\n\r\n        // TipBoxPrefab.getChildByName('力量s').getComponent(cc.Label).string='力量:'+info.power\r\n        // TipBoxPrefab.getChildByName('敏捷s').getComponent(cc.Label).string='敏捷:'+info.agile\r\n        // TipBoxPrefab.getChildByName('智力s').getComponent(cc.Label).string='智力:'+info.intelligence\r\n        // TipBoxPrefab.getChildByName('攻击s').getComponent(cc.Label).string='攻击:'+info.gongJi\r\n        // TipBoxPrefab.getChildByName('护甲s').getComponent(cc.Label).string='护甲:'+info.huJia\r\n        // TipBoxPrefab.getChildByName('速度s').getComponent(cc.Label).string='速度:'+info.suDu\r\n        // TipBoxPrefab.getChildByName('特攻s').getComponent(cc.Label).string='特攻:'+info.faGong\r\n        // TipBoxPrefab.getChildByName('灵气s').getComponent(cc.Label).string='灵气:'+info.reiki\r\n        // TipBoxPrefab.getChildByName('悟性s').getComponent(cc.Label).string='悟性:'+info.wuXing\r\n        // TipBoxPrefab.getChildByName('暴击s').getComponent(cc.Label).string='暴击:'+info.baojilv+'%'\r\n        // TipBoxPrefab.getChildByName('吸血s').getComponent(cc.Label).string='吸血:'+info.xiXue+'%'\r\n        // TipBoxPrefab.getChildByName('暴伤s').getComponent(cc.Label).string='暴伤:'+info.baoji+'%'\r\n        // TipBoxPrefab.getChildByName('闪避s').getComponent(cc.Label).string='闪避:'+info.shanbi+'%'\r\n        // TipBoxPrefab.getChildByName('命中s').getComponent(cc.Label).string='闪避'+'0%'\r\n        // TipBoxPrefab.getChildByName('增伤s').getComponent(cc.Label).string='增伤:'+info.jianShang+'%'\r\n        // TipBoxPrefab.getChildByName('减伤s').getComponent(cc.Label).string='减伤:'+info.zhenShang+'%'\r\n        return TipBoxPrefab\r\n    },\r\n\r\n    // 绑定按钮事件---挂载生物详情\r\n    bindClickEventIcon: function (button, info,TipBoxPrefab,TipBoxPrefab_icon) {\r\n        // cc.log(info)\r\n        //加载预制资源 PrefabUrl为 预制资源在 资源中的路径\r\n\r\n        // 销毁所有弹窗--节点\r\n        // TipBoxPrefab.getChildByName('技能描述').removeAllChildren();\r\n\r\n        // let move_type= ['初始化','回合化','被击前触发','被击后触发','攻击前触发','主动','攻击后']\r\n        // cc.loader.loadRes('/弹窗模型/biology_生物_战斗技能提示', function(errorMessage,loadedResource){\r\n        //     //检查资源加载\r\n        //     if( errorMessage ) { cc.log( '载入预制资源失败, 原因:' + errorMessage ); return; }\r\n        //     if( !(loadedResource instanceof cc.Prefab ) ) { cc.log( '你载入的不是预制资源!' ); return; }\r\n        //     //开始实例化预制资源\r\n        //     let tips_Prefab = cc.instantiate(loadedResource);\r\n        //     tips_Prefab.getChildByName('D技能图标').getComponent(cc.Sprite).spriteFrame = TipBoxPrefab_icon.getChildByName('P技能').getComponent(cc.Sprite).spriteFrame\r\n        //     tips_Prefab.getChildByName('D技能名称s').getComponent(cc.Label).string=skill.name+'-['+skill.type+']'\r\n        //     tips_Prefab.getChildByName('D技能消耗s').getComponent(cc.Label).string='消耗:   '+Math.abs(skill.needValue)\r\n        //     var attack=skill.attack==0?'被动':'主动'\r\n        //     tips_Prefab.getChildByName('D技能类型s').getComponent(cc.Label).string='触发: '+attack\r\n        //     var star ='';    \r\n        //     for(var i=0;i<=skill['type'];i++){\r\n        //         star +='☆';\r\n        //     }\r\n        //     tips_Prefab.getChildByName('D技能星级s').getComponent(cc.Label).string='稀有程度：'+star\r\n        //     var hurtType=skill.hurtType==1?'物理':'法术'\r\n        //     tips_Prefab.getChildByName('D技能攻击s').getComponent(cc.Label).string='攻击类型: '+hurtType\r\n        //     tips_Prefab.getChildByName('D技能触发s').getComponent(cc.Label).string='触发几率：'+skill.probability+'%'\r\n        //     tips_Prefab.getChildByName('D发动时机s').getComponent(cc.Label).string='攻击类型: '+move_type[skill.belong]\r\n        //     tips_Prefab.getChildByName('D技能来源s').getComponent(cc.Label).string='技能来源：'+skill.words \r\n        //     tips_Prefab.getChildByName('D技能描述s').getComponent(cc.Label).string='技能说明：'+skill.describe\r\n\r\n        //     //载入生物详情\r\n        //     TipBoxPrefab.getChildByName('技能描述').addChild(tips_Prefab);\r\n\r\n        // });\r\n\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}