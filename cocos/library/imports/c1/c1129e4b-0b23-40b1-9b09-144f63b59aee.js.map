{"version":3,"sources":["assets\\Script\\背包\\biology_infoTools.js"],"names":["HttpHelper","require","httpRequest","cc","Class","Component","properties","biology_detail_alert","TipBoxPrefab_model","gooduse","globalData","bag","info","biology","biology_id","getChildByName","removeAllChildren","_this","loader","loadRes","errorMessage","loadedResource_icon","log","Prefab","TipBoxPrefab","instantiate","biology_detail_list","bind_button","addChild","getComponent","Label","string","name","zhong_zhu","grade","image","picture","SpriteFrame","err","texture","Sprite","spriteFrame","special","score","yiXing","active","scoreGrade","maxNature","need_expe","state_name","gooduse1","goods_image","point","gooduse2","yuanShen","on"],"mappings":"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","sourceRoot":"/","sourcesContent":["var HttpHelper = require(\"../http\"); \r\nvar httpRequest = new HttpHelper();\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n    //技能图片渲染\r\n    biology_detail_alert(TipBoxPrefab_model){\r\n        var gooduse = cc.globalData.bag\r\n        //info 为选中生物的info\r\n        var info = cc.globalData.biology[cc.globalData.biology_id]\r\n        // cc.log(cc.globalData.bag)\r\n        TipBoxPrefab_model.getChildByName('左边弹窗').removeAllChildren();\r\n        TipBoxPrefab_model.getChildByName('中间弹窗').removeAllChildren();\r\n        TipBoxPrefab_model.getChildByName('右边弹窗').removeAllChildren();\r\n        \r\n        var _this=this;\r\n        cc.loader.loadRes('/model背包/生物详情', function(errorMessage,loadedResource_icon){\r\n            //检查资源加载\r\n            if( errorMessage ) { cc.log( '载入预制资源失败, 原因:' + errorMessage ); return; }\r\n            if( !(loadedResource_icon instanceof cc.Prefab ) ) { cc.log( '你载入的不是预制资源!' ); return; }\r\n            //开始实例化预制资源\r\n            let   TipBoxPrefab =  cc.instantiate(loadedResource_icon);\r\n            //技能等级\r\n            // TipBoxPrefab.getChildByName('生物数量s').getComponent(cc.Label).string='生物('+info_list.length+'/60)'\r\n            // 由于加载资源的操作是异步的，如果在加载完成前就绑定了事件，有可能会触发事件的自动执行。\r\n            _this.biology_detail_list(TipBoxPrefab,info,gooduse)\r\n            //绑定按钮事件\r\n            _this.bind_button(TipBoxPrefab_model,TipBoxPrefab,info);\r\n            //写入icon\r\n            TipBoxPrefab_model.getChildByName('生物详情').addChild(TipBoxPrefab);\r\n            return TipBoxPrefab_model\r\n        })\r\n        // //技能列表挂载--默认挂载信息\r\n        TipBoxPrefab_model.getComponent('biology_xinxiTools').biology_detail_alert(TipBoxPrefab_model,info)\r\n\r\n        return TipBoxPrefab_model\r\n    },\r\n\r\n    //技能图片渲染\r\n    biology_detail_list(TipBoxPrefab,info,gooduse){\r\n        // TipBoxPrefab.getChildByName('血s').getComponent(cc.Label).string= info.shengMing\r\n        // TipBoxPrefab.getChildByName('蓝s').getComponent(cc.Label).string= info.moFa\r\n        TipBoxPrefab.getChildByName('生物名称s').getComponent(cc.Label).string=info.name\r\n        TipBoxPrefab.getChildByName('种族s').getComponent(cc.Label).string=info.zhong_zhu+'族'\r\n        TipBoxPrefab.getChildByName('生物等级s').getComponent(cc.Label).string='等级'+info.grade\r\n        // TipBoxPrefab.getChildByName('触发概率s').getComponent(cc.Label).string='触发率'+info.chuFa+'%'\r\n        // //生物命名必须叫生物\r\n        //载入技能图片\r\n        let image = info.picture;\r\n        cc.loader.loadRes(image, cc.SpriteFrame, function (err, texture) { \r\n            if (err) {\r\n                // cc.error(err.message || err);\r\n                return;\r\n            }\r\n            TipBoxPrefab.getChildByName('生物').getComponent(cc.Sprite).spriteFrame = texture; \r\n        });\r\n        TipBoxPrefab.getChildByName('战力s').getComponent(cc.Label).string='战力'+info.special\r\n        TipBoxPrefab.getChildByName('评分s').getComponent(cc.Label).string='评分:'+info.score/10\r\n\r\n        if(info.yiXing==1){\r\n            // cc.log(1111)\r\n            TipBoxPrefab.getChildByName('异形').active=true;\r\n        }else{\r\n            // cc.log(222)\r\n            TipBoxPrefab.getChildByName('异形').active=false;\r\n        }\r\n        TipBoxPrefab.getChildByName('稀有s').getComponent(cc.Label).string= info.scoreGrade\r\n        TipBoxPrefab.getChildByName('慧根值s').getComponent(cc.Label).string= info.maxNature\r\n        TipBoxPrefab.getChildByName('经验s').getComponent(cc.Label).string= info.need_expe\r\n\r\n        TipBoxPrefab.getChildByName('境界s').getComponent(cc.Label).string= info.state_name\r\n\r\n        if(info.gooduse1){\r\n            var goods_image = gooduse[info.gooduse1].point\r\n            cc.loader.loadRes(goods_image, cc.SpriteFrame, function (err, texture) { \r\n                if (err) {\r\n                    // cc.error(err.message || err);\r\n                    return;\r\n                }\r\n                TipBoxPrefab.getChildByName('装备1').getComponent(cc.Sprite).spriteFrame = texture; \r\n            });\r\n        }\r\n        if(info.gooduse2){\r\n            var goods_image =gooduse[info.gooduse2].point\r\n            cc.loader.loadRes(goods_image, cc.SpriteFrame, function (err, texture) { \r\n                if (err) {\r\n                    // cc.error(err.message || err);\r\n                    return;\r\n                }\r\n                TipBoxPrefab.getChildByName('装备2').getComponent(cc.Sprite).spriteFrame = texture; \r\n            });\r\n        }\r\n        if(info.yuanShen){\r\n            var goods_image =gooduse[info.yuanShen].point\r\n            cc.loader.loadRes(goods_image, cc.SpriteFrame, function (err, texture) { \r\n                if (err) {\r\n                    // cc.error(err.message || err);\r\n                    return;\r\n                }\r\n                TipBoxPrefab.getChildByName('元神').getComponent(cc.Sprite).spriteFrame = texture; \r\n            });\r\n        }\r\n        return TipBoxPrefab\r\n    },\r\n    //绑定点击事件\r\n    bind_button(TipBoxPrefab_model,TipBoxPrefab,info){\r\n        TipBoxPrefab_model.getChildByName('左边弹窗').removeAllChildren();\r\n        TipBoxPrefab_model.getChildByName('中间弹窗').removeAllChildren();\r\n        TipBoxPrefab_model.getChildByName('右边弹窗').removeAllChildren();\r\n        //  cc.find(\"列表/content/gridLayout\",TipBoxPrefab)\r\n        TipBoxPrefab.getChildByName('装备1').on('click', function () {\r\n            // 事件处理逻辑\r\n            //移除挂载\r\n            // TipBoxPrefab_model.getChildByName('生物信息').removeAllChildren();\r\n            //重新挂载\r\n            TipBoxPrefab_model.getComponent('bag_物品Tools').biology_detail_alert(TipBoxPrefab_model,info.gooduse1,1,'装备1')\r\n        }, this);\r\n        TipBoxPrefab.getChildByName('装备2').on('click', function () {\r\n            // 事件处理逻辑\r\n            //移除挂载\r\n            // TipBoxPrefab_model.getChildByName('生物信息').removeAllChildren();\r\n            //重新挂载\r\n            TipBoxPrefab_model.getComponent('bag_物品Tools').biology_detail_alert(TipBoxPrefab_model,info.gooduse2,1,'装备2')\r\n        }, this);\r\n        TipBoxPrefab.getChildByName('元神').on('click', function () {\r\n            // 事件处理逻辑\r\n            //移除挂载\r\n            // TipBoxPrefab_model.getChildByName('生物信息').removeAllChildren();\r\n            //重新挂载\r\n            TipBoxPrefab_model.getComponent('bag_物品Tools').biology_detail_alert(TipBoxPrefab_model,info.yuanShen,7,'元神')\r\n        }, this);\r\n        // TipBoxPrefab.getChildByName('缘分').on('click', function () {\r\n        //     // 事件处理逻辑\r\n        //     //移除挂载\r\n        //     TipBoxPrefab_model.getChildByName('生物信息').removeAllChildren();\r\n        //     //重新挂载\r\n        //     TipBoxPrefab_model.getComponent('biology_yuanfenTools').biology_detail_alert(TipBoxPrefab_model,info)\r\n        // }, this);\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}