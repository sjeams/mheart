{"version":3,"sources":["assets\\Script\\scence\\MapTools.js"],"names":["HttpHelper","require","httpRequest","params","cc","Class","Component","properties","server_type","Node","server_name","sprite_server_login","Button","initInfo","info","console","log","httpUrl","_self","remoteUrl","loader","load","url","err","texture","node","getComponent","Sprite","spriteFrame","SpriteFrame","Label","string","getChildByName","color","bindClickEvent","button","index","clickEventHandler","EventHandler","target","component","handler","customEventData","clickEvents","push","onConfirBtn","e","httpPost","data","server_choes_label","find","server_choes_type","mask","active"],"mappings":"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","sourceRoot":"/","sourcesContent":["/*\r\n * @Author: sjeam\r\n * @Date: 2022-06-14 16:01:41\r\n * @Description: \r\n */\r\nvar HttpHelper = require(\"http\"); \r\nvar httpRequest = new HttpHelper();\r\nvar params =[];\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n  \r\n        server_type: cc.Node,\r\n        server_name: cc.Node,\r\n        sprite_server_login: cc.Button\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    initInfo (info) {\r\n        // 初始化该道具相关信息\r\n        console.log(httpRequest.httpUrl(info['picture']))\r\n        // 图片\r\n        var _self = this;\r\n \r\n        if(info['picture']){\r\n\r\n            var remoteUrl = httpRequest.httpUrl(info['picture']);\r\n            // cc.loader.loadRes(httpRequest.httpUrl(info['picture']), cc.SpriteFrame, function (err, spriteFrame) {   \r\n            //     console.log(_self)\r\n            //     _self.node.getComponent(cc.Sprite).spriteFrame = spriteFrame; \r\n            // });\r\n            cc.loader.load({ url: remoteUrl }, function (err, texture) {  \r\n                //     console.log(_self)\r\n                    // _self.node.getComponent(cc.Sprite).spriteFrame = spriteFrame; \r\n                _self.node.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture)\r\n            });\r\n        }\r\n        // this.server_type.getComponent(cc.Label).string=info['type'];\r\n        // if(info['num']<100){\r\n        //     this.server_type.getComponent(cc.Label).string='空闲';\r\n        //     this.node.getChildByName('server_type').color = new cc.color('green');\r\n        // }else if(info['num']<500&&info['num']>=100){\r\n        //     this.server_type.getComponent(cc.Label).string='流畅';\r\n        //     this.node.getChildByName('server_type').color = new cc.color('#BDFF00');\r\n        // }else if(info['num']<1000&&info['num']>=500){\r\n        //     this.server_type.getComponent(cc.Label).string='拥挤';\r\n        //     this.node.getChildByName('server_type').color = new cc.color('#FFD100');\r\n        // }else{\r\n        //     this.server_type.getComponent(cc.Label).string='爆满';\r\n        //     this.node.getChildByName('server_type').color = new cc.color('#FF0000'); \r\n        // }    \r\n        this.server_type.getComponent(cc.Label).string=info['type'];\r\n        this.server_type.getComponent(cc.Label).string=info['type'];\r\n        this.node.getChildByName('server_type').color = new cc.color(info['color']);\r\n\r\n        this.server_name.getComponent(cc.Label).string= info['id']+'区  -  '+info['name'];\r\n        //创建一个新button 并将其挂载到创建的精灵下\r\n        this.bindClickEvent( this.sprite_server_login.getComponent(cc.Button), info);\r\n    },\r\n    // 绑定按钮事件\r\n    bindClickEvent: function (button, index) {\r\n        // console.log(index)\r\n        var clickEventHandler = new cc.Component.EventHandler();\r\n        //这个 node 节点是你的事件处理代码组件所属的节点\r\n        clickEventHandler.target = this.node; \r\n        //这个是代码文件名\r\n        clickEventHandler.component = \"Tools\";  // js脚本文件-绑定\r\n        clickEventHandler.handler = \"onConfirBtn\";// js方法名称--绑定\r\n        clickEventHandler.customEventData = index; // 回调内容\r\n        button.clickEvents.push(clickEventHandler);\r\n    },\r\n \r\n\r\n    //按钮点击回调\r\n    onConfirBtn:function(e,info){\r\n        console.log(info)\r\n        var HttpHelper = require(\"http\"); \r\n        var httpRequest = new HttpHelper();\r\n        httpRequest.httpPost('https://www.aheart.cn/app/api-server/user-server', {\r\n            'id': info['id'],\r\n            'token': null\r\n        }, function (data) {\r\n                        console.log(data);\r\n            var server_choes_label  =cc.find(\"Canvas/server/server_choes/server_choes_label\");\r\n            server_choes_label.getComponent(cc.Label).string=info['name'];\r\n            var server_choes_type  =cc.find(\"Canvas/server/server_choes/server_choes_type\");\r\n            server_choes_type.getComponent(cc.Label).string=info['type'];\r\n            server_choes_type.color = new cc.color(info['color']); \r\n        })\r\n\r\n        var mask =cc.find(\"Canvas/mask\");\r\n      \r\n\r\n        mask.active=false\r\n      \r\n        // var mask =  this.node.getChildByName('mask')\r\n    \r\n        // console.log(this.node.getSiblingIndex())\r\n        // console.log( this.node.parent.getComponent(cc.Button));\r\n     \r\n        // this.node.getChildByName(\"sprite_server_login\").on('click',function(event){\r\n        //     console.log(\"点击到按钮\");\r\n        //     callback();\r\n        // },this);\r\n        // this.node.active =false; // 直接去掉模型节点\r\n    },\r\n \r\n});\r\n"]}