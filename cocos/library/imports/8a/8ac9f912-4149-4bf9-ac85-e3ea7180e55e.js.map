{"version":3,"sources":["assets\\Script\\fighting\\fightingTools.js"],"names":["HttpHelper","require","httpRequest","params","cc","Class","Component","properties","biology_detail_list","TipBoxPrefab_model","info_list","biolgy_state","is_my","star","_this","TOOLS","loader","loadRes","errorMessage","loadedResource_icon","log","Prefab","TipBoxPrefab_icon","instantiate","map","prop","info","biology","length","image","picture","SpriteFrame","err","texture","getChildByName","getComponent","Sprite","spriteFrame","setScale","color","Label","string","shengMing","moFa","name","grade","state","onConfirBtn","x","parseInt","y","jing_bi","jingBi","biology_int","id","biology_name","sys","toolsArray","push","fightingArray","addChild","on","alertBoxPrefab","find","biology_image","biology_detail_alert"],"mappings":"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","sourceRoot":"/","sourcesContent":["var HttpHelper = require(\"../http\"); \r\nvar httpRequest = new HttpHelper();\r\nvar params =[];\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // server_picture: cc.Node,\r\n        // server_type: cc.Node,\r\n        // server_name: cc.Node,\r\n        // server_star: cc.Node,\r\n        // server_shenMing: cc.Node,\r\n        // server_moFa: cc.Node,\r\n        // sprite_server_biology: cc.Button\r\n    },\r\n\r\n        // //生成生物\r\n        // init_postion(postion,biolgy_state,int_px,is_my,star){\r\n        //     var _this = this;\r\n        //     var TOOLS =[];\r\n        //     var TOOLS = postion;\r\n        //     var total = postion.length;\r\n        //     // const maps = new Map();\r\n        //     //添加节点\r\n        //     for (let i=0; i<total; i++) {    \r\n        //         //死亡移除map_status\r\n        //         var map = TOOLS[i];\r\n        //         // console.log(map) \r\n        //         if(map.biology.length!=0){\r\n        //           star++;\r\n        //           var tool = cc.instantiate(_this.person);\r\n        //           tool.getComponent('fightingTools').initInfo(map.biology,biolgy_state,is_my);\r\n\r\n\r\n        //           tool.x=parseInt(map.x+int_px)\r\n        //           tool.getChildByName('阵法s').getComponent(cc.Label).string= star-1;\r\n        //           tool.y=map.y\r\n        //           tool.is_my=is_my//阵容\r\n        //           tool.jing_bi=map.biology.jingBi//金币\r\n        //           tool.biology_int=star//阵法编号\r\n        //           tool.shengMing=map.biology.shengMing\r\n        //           tool.moFa=map.biology.moFa\r\n        //           tool.biology=map.biology.id\r\n        //           tool.biology_name=map.biology.name\r\n        //           _this.toolsArray.push(tool);\r\n        //           cc.sys.fightingArray[map.biology.id]=tool;\r\n        //         //   _this.fightingArray[map.biology.id]=tool;\r\n            \r\n        //         //永久重复移动\r\n        //           // var randomNumup = Math.floor(Math.random() * (5 - 1 + 1)) + 1;\r\n        //           // var randomNumdown = Math.floor(Math.random() * (5 - 1 + 1)) + 1;\r\n        //           // var seq = cc.repeatForever(\r\n        //           //   cc.sequence(\r\n        //           //       cc.moveBy(randomNumup, 0,5),\r\n        //           //       // cc.scaleTo(randomNumup, 1, 1.05),\r\n        //           //       // cc.scaleTo(randomNumdown, 1.05,1),\r\n        //           //       cc.moveBy(randomNumdown, 0,-5)\r\n        //           //   ));\r\n        //           // tool.runAction(seq);\r\n            \r\n        //            cc.find('Canvas/大厅/content').addChild(tool); \r\n        //         }\r\n        //     }\r\n        //     return star;\r\n        // },\r\n    //生成生物\r\n    biology_detail_list(TipBoxPrefab_model,info_list,biolgy_state,is_my,star){\r\n        var _this =this;\r\n        var TOOLS =[];\r\n        var TOOLS = info_list;\r\n        // let image = '/技能图标/'+skill.image;\r\n        //加载预制资源 PrefabUrl为 预制资源在 资源中的路径\r\n        cc.loader.loadRes('/fighting/biology_生物详情', function(errorMessage,loadedResource_icon){\r\n            //检查资源加载\r\n            if( errorMessage ) { cc.log( '载入预制资源失败, 原因:' + errorMessage ); return; }\r\n            if( !(loadedResource_icon instanceof cc.Prefab ) ) { cc.log( '你载入的不是预制资源!' ); return; }\r\n            //开始实例化预制资源\r\n\r\n            for (var prop in info_list) {\r\n                //声明节点对象\r\n                let  TipBoxPrefab_icon =  cc.instantiate(loadedResource_icon);\r\n                let map = TOOLS[prop];\r\n                let info = map.biology;\r\n\r\n                if(info.length!=0){\r\n\r\n                    //放在资源下面\r\n                    let image = info.picture;\r\n                    cc.loader.loadRes(image, cc.SpriteFrame, function (err, texture) { \r\n                        if (err) {\r\n                            // cc.error(err.message || err);\r\n                            return;\r\n                        }\r\n                        TipBoxPrefab_icon.getChildByName('生物').getComponent(cc.Sprite).spriteFrame = texture; \r\n                    });\r\n                    if(is_my==0){\r\n                        //图片翻转\r\n                        TipBoxPrefab_icon.getChildByName('生物').setScale(-1, 1);\r\n                    }\r\n                    TipBoxPrefab_icon.getChildByName('生物').color = new cc.color(info.color); \r\n                    TipBoxPrefab_icon.getChildByName('生命s').getComponent(cc.Label).string= info.shengMing\r\n                    TipBoxPrefab_icon.getChildByName('魔法s').getComponent(cc.Label).string= info.moFa\r\n                    TipBoxPrefab_icon.getChildByName('生物名称s').getComponent(cc.Label).string= info.name\r\n                    TipBoxPrefab_icon.getChildByName('生物等级s').getComponent(cc.Label).string= '等级'+info.grade+'('+biolgy_state[info.state]+')';\r\n                    //创建一个新button 并将其挂载到创建的精灵下\r\n                    _this.onConfirBtn(TipBoxPrefab_icon,info);\r\n                    //写入icon\r\n                    TipBoxPrefab_icon.x=parseInt(map.x)\r\n                    TipBoxPrefab_icon.getChildByName('阵法s').getComponent(cc.Label).string= star-1;\r\n                    TipBoxPrefab_icon.y=map.y\r\n                    TipBoxPrefab_icon.is_my=is_my//阵容\r\n                    TipBoxPrefab_icon.jing_bi=map.biology.jingBi//金币\r\n                    TipBoxPrefab_icon.biology_int=star//阵法编号\r\n                    TipBoxPrefab_icon.shengMing=map.biology.shengMing\r\n                    TipBoxPrefab_icon.moFa=map.biology.moFa\r\n                    TipBoxPrefab_icon.biology=map.biology.id\r\n                    TipBoxPrefab_icon.biology_name=map.biology.name\r\n                    cc.sys.toolsArray.push(TipBoxPrefab_icon);\r\n                    cc.sys.fightingArray[map.biology.id]=TipBoxPrefab_icon;\r\n                    TipBoxPrefab_model.addChild(TipBoxPrefab_icon);\r\n                }\r\n      \r\n            }\r\n        })\r\n        return TipBoxPrefab_model\r\n    },\r\n    //按钮点击回调\r\n    onConfirBtn:function(TipBoxPrefab_icon,info){\r\n        var _this =this;\r\n        TipBoxPrefab_icon.on('click', function () {\r\n            //技能图标挂载\r\n            var alertBoxPrefab = cc.find('Canvas/弹窗')\r\n            //图片直接传过去，不用再加载一次\r\n            var biology_image =TipBoxPrefab_icon.getChildByName('生物').getComponent(cc.Sprite).spriteFrame;\r\n            alertBoxPrefab.getComponent('biology_detailTools').biology_detail_alert(alertBoxPrefab,info,biology_image)\r\n        })\r\n    },\r\n   \r\n});\r\n"]}