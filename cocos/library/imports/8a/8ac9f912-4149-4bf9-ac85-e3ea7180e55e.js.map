{"version":3,"sources":["assets\\Script\\战斗\\fightingTools.js"],"names":["require","cc","Class","Component","properties","biology_detail_list","TipBoxPrefab_model","info_list","biolgy_state","is_my","star","Promise","resolve","_this","TOOLS","TipBoxPrefab_icon","instantiate","http_globalData","model_biology_fightingBiology","map","prop","info","biology","map_value","map_x","x","length","loader","loadRes","picture","SpriteFrame","err","texture","getChildByName","getComponent","Sprite","spriteFrame","setScale","color","Label","string","httpRequest","number_string_wan","shengMing","moFa","name","grade","state","onConfirBtn","parseInt","y","jing_bi","jingBi","biology_int","id","biology_name","sys","toolsArray","push","fightingArray","addChild","on","alertBoxPrefab","find","biology_image","biology_detail_alert"],"mappings":"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","sourceRoot":"/","sourcesContent":["require(\"../common\"); \r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n    },\r\n    //生成生物\r\n    async biology_detail_list(TipBoxPrefab_model,info_list,biolgy_state,is_my,star){\r\n         return new Promise(resolve => {\r\n        var _this =this;\r\n        var TOOLS =[];\r\n        var TOOLS = info_list;\r\n        // let image = '/技能图标/'+skill.image;\r\n        //加载预制资源 PrefabUrl为 预制资源在 资源中的路径\r\n        // cc.loader.loadRes('/model战斗/biology_生物详情', function(errorMessage,loadedResource_icon){\r\n            //检查资源加载\r\n            // if( errorMessage ) { cc.log( '载入预制资源失败, 原因:' + errorMessage ); return; }\r\n            // if( !(loadedResource_icon instanceof cc.Prefab ) ) { cc.log( '你载入的不是预制资源!' ); return; }\r\n            //开始实例化预制资源\r\n\r\n            for (var prop in info_list) {\r\n                //声明节点对象\r\n                let  TipBoxPrefab_icon =  cc.instantiate(http_globalData.model_biology_fightingBiology);\r\n                let map = TOOLS[prop];\r\n                let info = map.biology;\r\n                //设置距离\r\n                var map_value = 50\r\n                if(is_my){\r\n                   var map_x =    map.x-map_value\r\n                }else{\r\n                   var map_x =    map.x+map_value\r\n                }\r\n                if(info.length!=0){\r\n                    //放在资源下面\r\n                    cc.loader.loadRes(info.picture, cc.SpriteFrame, function (err, texture) { \r\n                        if (err) {\r\n                            // cc.error(err.message || err);\r\n                            return;\r\n                        }\r\n                        TipBoxPrefab_icon.getChildByName('生物').getComponent(cc.Sprite).spriteFrame = texture; \r\n                    });\r\n                    if(is_my==0){\r\n                        //图片翻转\r\n                        TipBoxPrefab_icon.getChildByName('生物').setScale(-1, 1);\r\n                    }\r\n                    TipBoxPrefab_icon.getChildByName('生物').color = new cc.color(info.color); \r\n                    TipBoxPrefab_icon.getChildByName('生命s').getComponent(cc.Label).string= httpRequest.number_string_wan(info.shengMing,2);\r\n                    TipBoxPrefab_icon.getChildByName('魔法s').getComponent(cc.Label).string= httpRequest.number_string_wan(info.moFa,2);\r\n                    TipBoxPrefab_icon.getChildByName('生物名称s').getComponent(cc.Label).string= info.name\r\n                    TipBoxPrefab_icon.getChildByName('生物等级s').getComponent(cc.Label).string= '等级'+info.grade+'('+biolgy_state[info.state]+')';\r\n                    //创建一个新button 并将其挂载到创建的精灵下\r\n                    _this.onConfirBtn(TipBoxPrefab_icon,info);\r\n                    //写入icon\r\n                    TipBoxPrefab_icon.x=parseInt(map_x) //重新定义了间距\r\n                    TipBoxPrefab_icon.getChildByName('阵法s').getComponent(cc.Label).string= parseInt(prop)+1;\r\n                    TipBoxPrefab_icon.y=map.y\r\n                    TipBoxPrefab_icon.is_my=is_my//阵容\r\n                    TipBoxPrefab_icon.jing_bi=map.biology.jingBi//金币\r\n                    TipBoxPrefab_icon.biology_int=  parseInt(prop)+1//阵法编号\r\n                    TipBoxPrefab_icon.shengMing=map.biology.shengMing\r\n                    TipBoxPrefab_icon.moFa=map.biology.moFa\r\n                    TipBoxPrefab_icon.biology=map.biology.id\r\n                    TipBoxPrefab_icon.biology_name=map.biology.name\r\n                    cc.sys.toolsArray.push(TipBoxPrefab_icon);\r\n                    cc.sys.fightingArray[map.biology.id]=TipBoxPrefab_icon;\r\n                    TipBoxPrefab_model.addChild(TipBoxPrefab_icon);\r\n                }\r\n      \r\n            }\r\n            resolve();\r\n        // })\r\n\r\n        })\r\n        return TipBoxPrefab_model\r\n    },\r\n    //按钮点击回调\r\n    onConfirBtn:function(TipBoxPrefab_icon,info){\r\n        var _this =this;\r\n        TipBoxPrefab_icon.on('click', function () {\r\n            //技能图标挂载\r\n            var alertBoxPrefab = cc.find('Canvas/弹窗')\r\n            //图片直接传过去，不用再加载一次\r\n            var biology_image =TipBoxPrefab_icon.getChildByName('生物').getComponent(cc.Sprite).spriteFrame;\r\n            alertBoxPrefab.getComponent('biology_detailTools').biology_detail_alert(alertBoxPrefab,info,biology_image)\r\n        })\r\n    },\r\n   \r\n});\r\n"]}