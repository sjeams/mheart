{"version":3,"sources":["assets\\Script\\战斗\\fightingTools.js"],"names":["require","cc","Class","Component","properties","biology_detail_list","TipBoxPrefab_model","info_list","biolgy_state","is_my","star","Promise","resolve","_this","TOOLS","loader","loadRes","errorMessage","loadedResource_icon","log","Prefab","TipBoxPrefab_icon","instantiate","map","prop","info","biology","map_value","map_x","x","length","picture","SpriteFrame","err","texture","getChildByName","getComponent","Sprite","spriteFrame","setScale","color","Label","string","shengMing","moFa","name","grade","state","onConfirBtn","parseInt","y","jing_bi","jingBi","biology_int","id","biology_name","sys","toolsArray","push","fightingArray","addChild","on","alertBoxPrefab","find","biology_image","biology_detail_alert"],"mappings":"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","sourceRoot":"/","sourcesContent":["require(\"../common\"); \r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // server_picture: cc.Node,\r\n        // server_type: cc.Node,\r\n        // server_name: cc.Node,\r\n        // server_star: cc.Node,\r\n        // server_shenMing: cc.Node,\r\n        // server_moFa: cc.Node,\r\n        // sprite_server_biology: cc.Button\r\n    },\r\n\r\n        // //生成生物\r\n        // init_postion(postion,biolgy_state,int_px,is_my,star){\r\n        //     var _this = this;\r\n        //     var TOOLS =[];\r\n        //     var TOOLS = postion;\r\n        //     var total = postion.length;\r\n        //     // const maps = new Map();\r\n        //     //添加节点\r\n        //     for (let i=0; i<total; i++) {    \r\n        //         //死亡移除map_status\r\n        //         var map = TOOLS[i];\r\n        //         // console.log(map) \r\n        //         if(map.biology.length!=0){\r\n        //           star++;\r\n        //           var tool = cc.instantiate(_this.person);\r\n        //           tool.getComponent('fightingTools').initInfo(map.biology,biolgy_state,is_my);\r\n\r\n\r\n        //           tool.x=parseInt(map.x+int_px)\r\n        //           tool.getChildByName('阵法s').getComponent(cc.Label).string= star-1;\r\n        //           tool.y=map.y\r\n        //           tool.is_my=is_my//阵容\r\n        //           tool.jing_bi=map.biology.jingBi//金币\r\n        //           tool.biology_int=star//阵法编号\r\n        //           tool.shengMing=map.biology.shengMing\r\n        //           tool.moFa=map.biology.moFa\r\n        //           tool.biology=map.biology.id\r\n        //           tool.biology_name=map.biology.name\r\n        //           _this.toolsArray.push(tool);\r\n        //           cc.sys.fightingArray[map.biology.id]=tool;\r\n        //         //   _this.fightingArray[map.biology.id]=tool;\r\n            \r\n        //         //永久重复移动\r\n        //           // var randomNumup = Math.floor(Math.random() * (5 - 1 + 1)) + 1;\r\n        //           // var randomNumdown = Math.floor(Math.random() * (5 - 1 + 1)) + 1;\r\n        //           // var seq = cc.repeatForever(\r\n        //           //   cc.sequence(\r\n        //           //       cc.moveBy(randomNumup, 0,5),\r\n        //           //       // cc.scaleTo(randomNumup, 1, 1.05),\r\n        //           //       // cc.scaleTo(randomNumdown, 1.05,1),\r\n        //           //       cc.moveBy(randomNumdown, 0,-5)\r\n        //           //   ));\r\n        //           // tool.runAction(seq);\r\n            \r\n        //            cc.find('Canvas/大厅/content').addChild(tool); \r\n        //         }\r\n        //     }\r\n        //     return star;\r\n        // },\r\n    //生成生物\r\n    async biology_detail_list(TipBoxPrefab_model,info_list,biolgy_state,is_my,star){\r\n         return new Promise(resolve => {\r\n        var _this =this;\r\n        var TOOLS =[];\r\n        var TOOLS = info_list;\r\n        // let image = '/技能图标/'+skill.image;\r\n        //加载预制资源 PrefabUrl为 预制资源在 资源中的路径\r\n        cc.loader.loadRes('/model战斗/biology_生物详情', function(errorMessage,loadedResource_icon){\r\n            //检查资源加载\r\n            if( errorMessage ) { cc.log( '载入预制资源失败, 原因:' + errorMessage ); return; }\r\n            if( !(loadedResource_icon instanceof cc.Prefab ) ) { cc.log( '你载入的不是预制资源!' ); return; }\r\n            //开始实例化预制资源\r\n\r\n            for (var prop in info_list) {\r\n                //声明节点对象\r\n                let  TipBoxPrefab_icon =  cc.instantiate(loadedResource_icon);\r\n                let map = TOOLS[prop];\r\n                let info = map.biology;\r\n                //设置距离\r\n                var map_value = 50\r\n                if(is_my){\r\n                    map_x =    map.x-map_value\r\n                }else{\r\n                    map_x =    map.x+map_value\r\n                }\r\n                if(info.length!=0){\r\n                    //放在资源下面\r\n                    cc.loader.loadRes(info.picture, cc.SpriteFrame, function (err, texture) { \r\n                        if (err) {\r\n                            // cc.error(err.message || err);\r\n                            return;\r\n                        }\r\n                        TipBoxPrefab_icon.getChildByName('生物').getComponent(cc.Sprite).spriteFrame = texture; \r\n                    });\r\n                    if(is_my==0){\r\n                        //图片翻转\r\n                        TipBoxPrefab_icon.getChildByName('生物').setScale(-1, 1);\r\n                    }\r\n                    TipBoxPrefab_icon.getChildByName('生物').color = new cc.color(info.color); \r\n                    TipBoxPrefab_icon.getChildByName('生命s').getComponent(cc.Label).string= info.shengMing\r\n                    TipBoxPrefab_icon.getChildByName('魔法s').getComponent(cc.Label).string= info.moFa\r\n                    TipBoxPrefab_icon.getChildByName('生物名称s').getComponent(cc.Label).string= info.name\r\n                    TipBoxPrefab_icon.getChildByName('生物等级s').getComponent(cc.Label).string= '等级'+info.grade+'('+biolgy_state[info.state]+')';\r\n                    //创建一个新button 并将其挂载到创建的精灵下\r\n                    _this.onConfirBtn(TipBoxPrefab_icon,info);\r\n                    //写入icon\r\n                    TipBoxPrefab_icon.x=parseInt(map_x) //重新定义了间距\r\n                    TipBoxPrefab_icon.getChildByName('阵法s').getComponent(cc.Label).string= parseInt(prop)+1;\r\n                    TipBoxPrefab_icon.y=map.y\r\n                    TipBoxPrefab_icon.is_my=is_my//阵容\r\n                    TipBoxPrefab_icon.jing_bi=map.biology.jingBi//金币\r\n                    TipBoxPrefab_icon.biology_int=  parseInt(prop)+1//阵法编号\r\n                    TipBoxPrefab_icon.shengMing=map.biology.shengMing\r\n                    TipBoxPrefab_icon.moFa=map.biology.moFa\r\n                    TipBoxPrefab_icon.biology=map.biology.id\r\n                    TipBoxPrefab_icon.biology_name=map.biology.name\r\n                    cc.sys.toolsArray.push(TipBoxPrefab_icon);\r\n                    cc.sys.fightingArray[map.biology.id]=TipBoxPrefab_icon;\r\n                    TipBoxPrefab_model.addChild(TipBoxPrefab_icon);\r\n                }\r\n      \r\n            }\r\n            resolve();\r\n        })\r\n\r\n        })\r\n        return TipBoxPrefab_model\r\n    },\r\n    //按钮点击回调\r\n    onConfirBtn:function(TipBoxPrefab_icon,info){\r\n        var _this =this;\r\n        TipBoxPrefab_icon.on('click', function () {\r\n            //技能图标挂载\r\n            var alertBoxPrefab = cc.find('Canvas/弹窗')\r\n            //图片直接传过去，不用再加载一次\r\n            var biology_image =TipBoxPrefab_icon.getChildByName('生物').getComponent(cc.Sprite).spriteFrame;\r\n            alertBoxPrefab.getComponent('biology_detailTools').biology_detail_alert(alertBoxPrefab,info,biology_image)\r\n        })\r\n    },\r\n   \r\n});\r\n"]}