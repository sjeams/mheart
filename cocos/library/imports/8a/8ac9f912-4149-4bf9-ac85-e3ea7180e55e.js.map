{"version":3,"sources":["assets\\Script\\fighting\\fightingTools.js"],"names":["HttpHelper","require","httpRequest","params","cc","Class","Component","properties","initInfo","info","biolgy_state","is_my","_self","remoteUrl","httpUrl","loader","load","url","err","texture","console","log","node","getChildByName","getComponent","Sprite","spriteFrame","SpriteFrame","setScale","color","type_color","star","i","Label","string","bindClickEvent","Button","button","index","clickEventHandler","EventHandler","target","component","handler","customEventData","clickEvents","push","onConfirBtn","e"],"mappings":";;;;;;AAAA;;;;;AAKA,IAAIA,UAAU,GAAGC,OAAO,CAAC,SAAD,CAAxB;;AACA,IAAIC,WAAW,GAAG,IAAIF,UAAJ,EAAlB;AACA,IAAIG,MAAM,GAAE,EAAZ;AACAC,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE,CACR;AACA;AACA;AACA;AACA;AACA;AACA;AAPQ,GAHP;AAaL;AAEAC,EAAAA,QAfK,oBAeIC,IAfJ,EAeSC,YAfT,EAesBC,KAftB,EAe6B;AAC9B;AACA;AACA,QAAIC,KAAK,GAAG,IAAZ;;AAEA,QAAGH,IAAI,CAAC,SAAD,CAAP,EAAmB;AACf,UAAII,SAAS,GAAGX,WAAW,CAACY,OAAZ,CAAoBL,IAAI,CAAC,SAAD,CAAxB,CAAhB,CADe,CAEf;AACA;AACA;AACA;;AACAL,MAAAA,EAAE,CAACW,MAAH,CAAUC,IAAV,CAAe;AAAEC,QAAAA,GAAG,EAAEJ;AAAP,OAAf,EAAmC,UAAUK,GAAV,EAAeC,OAAf,EAAwB;AACvD;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYF,OAAZ;;AACA,YAAGA,OAAO,IAAE,IAAZ,EAAiB;AACbP,UAAAA,KAAK,CAACU,IAAN,CAAWC,cAAX,CAA0B,IAA1B,EAAgCC,YAAhC,CAA6CpB,EAAE,CAACqB,MAAhD,EAAwDC,WAAxD,GAAsE,IAAItB,EAAE,CAACuB,WAAP,CAAmBR,OAAnB,CAAtE;AACH;AACJ,OAND;;AAOA,UAAGR,KAAK,IAAE,CAAV,EAAY;AACR;AACA,aAAKW,IAAL,CAAUC,cAAV,CAAyB,IAAzB,EAA+BK,QAA/B,CAAwC,CAAC,CAAzC,EAA4C,CAA5C;AACH;AACJ,KAtB6B,CAuB9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,QAAIC,KAAK,GAAG,CAAC,SAAD,EAAW,OAAX,EAAmB,SAAnB,EAA6B,SAA7B,EAAuC,SAAvC,EAAiD,SAAjD,CAAZ;AAEA,QAAIC,UAAU,GAAGD,KAAK,CAACpB,IAAI,CAAC,QAAD,CAAL,CAAtB;AACA,QAAIqB,UAAU,GAAE,OAAhB,CAxC8B,CAyC9B;;AACA,QAAIC,IAAI,GAAE,EAAV;;AACA,SAAIC,CAAC,GAAC,CAAN,EAAQA,CAAC,IAAEvB,IAAI,CAAC,QAAD,CAAf,EAA0BuB,CAAC,EAA3B,EAA8B;AAC1BD,MAAAA,IAAI,IAAG,GAAP;AACH;;AACD,SAAKT,IAAL,CAAUC,cAAV,CAAyB,KAAzB,EAAgCC,YAAhC,CAA6CpB,EAAE,CAAC6B,KAAhD,EAAuDC,MAAvD,GAA+DzB,IAAI,CAAC,WAAD,CAAJ,GAAkB,GAAlB,GAAsBA,IAAI,CAAC,WAAD,CAAzF;AACA,SAAKa,IAAL,CAAUC,cAAV,CAAyB,KAAzB,EAAgCC,YAAhC,CAA6CpB,EAAE,CAAC6B,KAAhD,EAAuDC,MAAvD,GAA+DzB,IAAI,CAAC,MAAD,CAAJ,GAAa,GAAb,GAAiBA,IAAI,CAAC,MAAD,CAApF;AACA,SAAKa,IAAL,CAAUC,cAAV,CAAyB,OAAzB,EAAkCC,YAAlC,CAA+CpB,EAAE,CAAC6B,KAAlD,EAAyDC,MAAzD,GAAiEzB,IAAI,CAAC,MAAD,CAArE;AACA,SAAKa,IAAL,CAAUC,cAAV,CAAyB,OAAzB,EAAkCC,YAAlC,CAA+CpB,EAAE,CAAC6B,KAAlD,EAAyDC,MAAzD,GAAiE,QAAMzB,IAAI,CAAC,OAAD,CAAV,GAAoB,GAApB,GAAwBC,YAAY,CAACD,IAAI,CAAC,OAAD,CAAL,CAApC,GAAoD,GAArH;AACA,SAAKa,IAAL,CAAUC,cAAV,CAAyB,KAAzB,EAAgCC,YAAhC,CAA6CpB,EAAE,CAAC6B,KAAhD,EAAuDC,MAAvD,GAA+DH,IAA/D,CAlD8B,CAmD9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAAKI,cAAL,CAAqB,KAAKb,IAAL,CAAUE,YAAV,CAAuBpB,EAAE,CAACgC,MAA1B,CAArB,EAAwD3B,IAAxD;AACH,GA5EI;AA6EL;AACA0B,EAAAA,cAAc,EAAE,wBAAUE,MAAV,EAAkBC,KAAlB,EAAyB;AACrC;AACA,QAAIC,iBAAiB,GAAG,IAAInC,EAAE,CAACE,SAAH,CAAakC,YAAjB,EAAxB,CAFqC,CAGrC;;AACAD,IAAAA,iBAAiB,CAACE,MAAlB,GAA2B,KAAKnB,IAAhC,CAJqC,CAKrC;;AACAiB,IAAAA,iBAAiB,CAACG,SAAlB,GAA8B,eAA9B,CANqC,CAMW;;AAChDH,IAAAA,iBAAiB,CAACI,OAAlB,GAA4B,aAA5B,CAPqC,CAOK;;AAC1CJ,IAAAA,iBAAiB,CAACK,eAAlB,GAAoCN,KAApC,CARqC,CAQM;;AAC3CD,IAAAA,MAAM,CAACQ,WAAP,CAAmBC,IAAnB,CAAwBP,iBAAxB;AACH,GAxFI;AA2FL;AACAQ,EAAAA,WAAW,EAAC,qBAASC,CAAT,EAAWvC,IAAX,EAAgB;AACxBW,IAAAA,OAAO,CAACC,GAAR,CAAYZ,IAAZ,EADwB,CAExB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACH;AA3HI,CAAT","sourceRoot":"/","sourcesContent":["/*\r\n * @Author: sjeam\r\n * @Date: 2022-06-14 16:01:41\r\n * @Description: \r\n */\r\nvar HttpHelper = require(\"../http\"); \r\nvar httpRequest = new HttpHelper();\r\nvar params =[];\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // server_picture: cc.Node,\r\n        // server_type: cc.Node,\r\n        // server_name: cc.Node,\r\n        // server_star: cc.Node,\r\n        // server_shenMing: cc.Node,\r\n        // server_moFa: cc.Node,\r\n        // sprite_server_biology: cc.Button\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    initInfo(info,biolgy_state,is_my) {\r\n        // 初始化该道具相关信息\r\n        // 图片\r\n        var _self = this;\r\n \r\n        if(info['picture']){\r\n            var remoteUrl = httpRequest.httpUrl(info['picture']);\r\n            // cc.loader.loadRes(httpRequest.httpUrl(info['picture']), cc.SpriteFrame, function (err, spriteFrame) {   \r\n            //     console.log(_self)\r\n            //     _self.node.getComponent(cc.Sprite).spriteFrame = spriteFrame; \r\n            // });\r\n            cc.loader.load({ url: remoteUrl }, function (err, texture) {  \r\n                // _self.node.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture)\r\n                console.log(texture)\r\n                if(texture!=null){\r\n                    _self.node.getChildByName('生物').getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n                }\r\n            });\r\n            if(is_my==0){\r\n                //图片翻转\r\n                this.node.getChildByName('生物').setScale(-1, 1);\r\n            }\r\n        }\r\n        // this.server_type.getComponent(cc.Label).string=info['type'];\r\n        // if(info['type']==1){\r\n        //     this.server_type.getComponent(cc.Label).string='空闲';\r\n        //     this.node.getChildByName('server_type').color = new cc.color('green');\r\n        // }else if(info['num']<500&&info['num']>=100){\r\n        //     this.server_type.getComponent(cc.Label).string='流畅';\r\n        //     this.node.getChildByName('server_type').color = new cc.color('#BDFF00');\r\n        // }else if(info['num']<1000&&info['num']>=500){\r\n        //     this.server_type.getComponent(cc.Label).string='拥挤';\r\n        //     this.node.getChildByName('server_type').color = new cc.color('#FFD100');\r\n        // }else{\r\n        //     this.server_type.getComponent(cc.Label).string='爆满';\r\n        //     this.node.getChildByName('server_type').color = new cc.color('#FF0000'); \r\n        // }\r\n        var color = ['#ffffff','green','#BDFF00','#FFD100','#FF0000','#ffe000',];\r\n  \r\n        var type_color = color[info['yiXing']];\r\n        var type_color ='green';\r\n        // console.log(info)\r\n        var star ='';    \r\n        for(i=0;i<=info['yiXing'];i++){\r\n            star +='⭐';\r\n        }\r\n        this.node.getChildByName('生命s').getComponent(cc.Label).string= info['shengMing']+'/'+info['shengMing'];\r\n        this.node.getChildByName('魔法s').getComponent(cc.Label).string= info['moFa']+'/'+info['moFa'];\r\n        this.node.getChildByName('生物名称s').getComponent(cc.Label).string= info['name'];\r\n        this.node.getChildByName('生物等级s').getComponent(cc.Label).string= 'Lv.'+info['grade']+'('+biolgy_state[info['state']]+')';\r\n        this.node.getChildByName('星星s').getComponent(cc.Label).string= star;\r\n        // this.node.getChildByName('悟性s').getComponent(cc.Label).string= info['wuXing'];\r\n        // this.server_star.getComponent(cc.Label).string= star;\r\n        // this.server_type.getComponent(cc.Label).string='Lv.'+info['grade']+'('+biolgy_state[info['state']]+')';\r\n        // this.server_type.color = new cc.color(type_color);\r\n        // this.node.getChildByName('server_type').color = new cc.color(type_color);\r\n        // this.server_name.getComponent(cc.Label).string=info['name'];\r\n        // this.server_name.color = new cc.color(type_color);\r\n        // this.node.getChildByName('server_name').color = new cc.color(type_color);\r\n        //创建一个新button 并将其挂载到创建的精灵下\r\n        this.bindClickEvent( this.node.getComponent(cc.Button), info);\r\n    },\r\n    // 绑定按钮事件\r\n    bindClickEvent: function (button, index) {\r\n        // console.log(index)\r\n        var clickEventHandler = new cc.Component.EventHandler();\r\n        //这个 node 节点是你的事件处理代码组件所属的节点\r\n        clickEventHandler.target = this.node; \r\n        //这个是代码文件名\r\n        clickEventHandler.component = \"fightingTools\";  // js脚本文件-绑定\r\n        clickEventHandler.handler = \"onConfirBtn\";// js方法名称--绑定\r\n        clickEventHandler.customEventData = index; // 回调内容\r\n        button.clickEvents.push(clickEventHandler);\r\n    },\r\n \r\n\r\n    //按钮点击回调\r\n    onConfirBtn:function(e,info){\r\n        console.log(info)\r\n        // var HttpHelper = require(\"../http\"); \r\n        // var httpRequest = new HttpHelper();\r\n        // httpRequest.httpPost('/app/app-apiword/in-word', {\r\n        //     'id': info['id'],\r\n        //     'star': info['star'],\r\n        //     'token': null\r\n        // }, function (data) {\r\n        //     //跳转到世界\r\n        //     cc.director.loadScene('map/诸天地图');\r\n        //     // console.log(data);\r\n        //     // var server_choes_label  =cc.find(\"Canvas/server/server_choes/server_choes_label\");\r\n        //     // server_choes_label.getComponent(cc.Label).string=info['name'];\r\n        //     // var server_choes_type  =cc.find(\"Canvas/server/server_choes/server_choes_type\");\r\n        //     // server_choes_type.getComponent(cc.Label).string=info['type'];\r\n        //     // server_choes_type.color = new cc.color(info['color']); \r\n        // })\r\n\r\n        // var mask =cc.find(\"Canvas/mask\");\r\n        // mask.active=false\r\n        // var mask =  this.node.getChildByName('mask')\r\n    \r\n        // console.log(this.node.getSiblingIndex())\r\n        // console.log( this.node.parent.getComponent(cc.Button));\r\n     \r\n        // this.node.getChildByName(\"sprite_server_biology\").on('click',function(event){\r\n        //     console.log(\"点击到按钮\");\r\n        //     callback();\r\n        // },this);\r\n        // this.node.active =false; // 直接去掉模型节点\r\n    },\r\n \r\n});\r\n"]}