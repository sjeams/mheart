{"version":3,"sources":["assets\\Script\\战斗\\fightingTools.js"],"names":["cc","Class","Component","properties","biology_detail_list","TipBoxPrefab_model","info_list","biolgy_state","is_my","star","Promise","resolve","_this","TOOLS","prop","TipBoxPrefab_icon","instantiate","http_globalAsset","model_biology_fightingBiology","map","info","biology","map_value","map_x","x","length","getChildByName","getComponent","Sprite","spriteFrame","http_base_asset_biology","picture","setScale","color","Label","string","httpRequest","number_string_wan","shengMing","moFa","name","grade","state","onConfirBtn","parseInt","y","jing_bi","jingBi","biology_int","id","biology_name","sys","toolsArray","push","fightingArray","addChild","on","alertBoxPrefab","find","biology_image","biology_detail_alert"],"mappings":"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","sourceRoot":"/","sourcesContent":["// require(\"../common\"); \r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n    },\r\n    //生成生物\r\n    async biology_detail_list(TipBoxPrefab_model,info_list,biolgy_state,is_my,star){\r\n         return new Promise(resolve => {\r\n        var _this =this;\r\n        var TOOLS =[];\r\n        var TOOLS = info_list;\r\n        // let image = '/技能图标/'+skill.image;\r\n        //加载预制资源 PrefabUrl为 预制资源在 资源中的路径\r\n        // cc.loader.loadRes('/model战斗/biology_生物详情', function(errorMessage,loadedResource_icon){\r\n            //检查资源加载\r\n            // if( errorMessage ) { cc.log( '载入预制资源失败, 原因:' + errorMessage ); return; }\r\n            // if( !(loadedResource_icon instanceof cc.Prefab ) ) { cc.log( '你载入的不是预制资源!' ); return; }\r\n            //开始实例化预制资源\r\n            for (var prop in info_list) {\r\n                //声明节点对象\r\n                let  TipBoxPrefab_icon =  cc.instantiate(http_globalAsset.model_biology_fightingBiology);\r\n                let map = TOOLS[prop];\r\n                let info = map.biology;\r\n                //设置距离\r\n                var map_value = 50\r\n                if(is_my){\r\n                   var map_x =    map.x-map_value\r\n                }else{\r\n                   var map_x =    map.x+map_value\r\n                }\r\n                if(info.length!=0){\r\n                    //放在资源下面\r\n                    //加载图片\r\n                    TipBoxPrefab_icon.getChildByName('生物').getComponent(cc.Sprite).spriteFrame = http_globalAsset.http_base_asset_biology[info.picture]\r\n                    if(is_my==0){\r\n                        //图片翻转\r\n                        TipBoxPrefab_icon.getChildByName('生物').setScale(-1, 1);\r\n                    }\r\n                    TipBoxPrefab_icon.getChildByName('生物').color = new cc.color(info.color); \r\n                    TipBoxPrefab_icon.getChildByName('生命s').getComponent(cc.Label).string= httpRequest.number_string_wan(info.shengMing,2);\r\n                    TipBoxPrefab_icon.getChildByName('魔法s').getComponent(cc.Label).string= httpRequest.number_string_wan(info.moFa,2);\r\n                    TipBoxPrefab_icon.getChildByName('生物名称s').getComponent(cc.Label).string= info.name\r\n                    TipBoxPrefab_icon.getChildByName('生物等级s').getComponent(cc.Label).string= '等级'+info.grade+'('+biolgy_state[info.state]+')';\r\n                    //创建一个新button 并将其挂载到创建的精灵下\r\n                    _this.onConfirBtn(TipBoxPrefab_icon,info);\r\n                    //写入icon\r\n                    TipBoxPrefab_icon.x=parseInt(map_x) //重新定义了间距\r\n                    TipBoxPrefab_icon.getChildByName('阵法s').getComponent(cc.Label).string= parseInt(prop)+1;\r\n                    TipBoxPrefab_icon.y=map.y\r\n                    TipBoxPrefab_icon.is_my=is_my//阵容\r\n                    TipBoxPrefab_icon.jing_bi=map.biology.jingBi//金币\r\n                    TipBoxPrefab_icon.biology_int=  parseInt(prop)+1//阵法编号\r\n                    TipBoxPrefab_icon.shengMing=map.biology.shengMing\r\n                    TipBoxPrefab_icon.moFa=map.biology.moFa\r\n                    TipBoxPrefab_icon.biology=map.biology.id\r\n                    TipBoxPrefab_icon.biology_name=map.biology.name\r\n                    cc.sys.toolsArray.push(TipBoxPrefab_icon);\r\n                    cc.sys.fightingArray[map.biology.id]=TipBoxPrefab_icon;\r\n                    TipBoxPrefab_model.addChild(TipBoxPrefab_icon);\r\n                }\r\n      \r\n            }\r\n            resolve();\r\n        // })\r\n\r\n        })\r\n        return TipBoxPrefab_model\r\n    },\r\n    //按钮点击回调\r\n    onConfirBtn:function(TipBoxPrefab_icon,info){\r\n        var _this =this;\r\n        TipBoxPrefab_icon.on('click', function () {\r\n            //技能图标挂载\r\n            var alertBoxPrefab = cc.find('Canvas/弹窗')\r\n            //图片直接传过去，不用再加载一次\r\n            var biology_image =TipBoxPrefab_icon.getChildByName('生物').getComponent(cc.Sprite).spriteFrame;\r\n            alertBoxPrefab.getComponent('biology_detailTools').biology_detail_alert(alertBoxPrefab,info,biology_image)\r\n        })\r\n    },\r\n   \r\n});\r\n"]}