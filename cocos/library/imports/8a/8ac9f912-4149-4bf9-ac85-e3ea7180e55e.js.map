{"version":3,"sources":["assets\\Script\\战斗\\fightingTools.js"],"names":["require","cc","Class","Component","properties","biology_detail_list","TipBoxPrefab_model","info_list","biolgy_state","is_my","star","Promise","resolve","_this","TOOLS","loader","loadRes","errorMessage","loadedResource_icon","log","Prefab","TipBoxPrefab_icon","instantiate","map","prop","info","biology","length","image","picture","SpriteFrame","err","texture","getChildByName","getComponent","Sprite","spriteFrame","setScale","color","Label","string","shengMing","moFa","name","grade","state","onConfirBtn","x","parseInt","y","jing_bi","jingBi","biology_int","id","biology_name","sys","toolsArray","push","fightingArray","addChild","on","alertBoxPrefab","find","biology_image","biology_detail_alert"],"mappings":"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","sourceRoot":"/","sourcesContent":["require(\"../common\"); \r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // server_picture: cc.Node,\r\n        // server_type: cc.Node,\r\n        // server_name: cc.Node,\r\n        // server_star: cc.Node,\r\n        // server_shenMing: cc.Node,\r\n        // server_moFa: cc.Node,\r\n        // sprite_server_biology: cc.Button\r\n    },\r\n\r\n        // //生成生物\r\n        // init_postion(postion,biolgy_state,int_px,is_my,star){\r\n        //     var _this = this;\r\n        //     var TOOLS =[];\r\n        //     var TOOLS = postion;\r\n        //     var total = postion.length;\r\n        //     // const maps = new Map();\r\n        //     //添加节点\r\n        //     for (let i=0; i<total; i++) {    \r\n        //         //死亡移除map_status\r\n        //         var map = TOOLS[i];\r\n        //         // console.log(map) \r\n        //         if(map.biology.length!=0){\r\n        //           star++;\r\n        //           var tool = cc.instantiate(_this.person);\r\n        //           tool.getComponent('fightingTools').initInfo(map.biology,biolgy_state,is_my);\r\n\r\n\r\n        //           tool.x=parseInt(map.x+int_px)\r\n        //           tool.getChildByName('阵法s').getComponent(cc.Label).string= star-1;\r\n        //           tool.y=map.y\r\n        //           tool.is_my=is_my//阵容\r\n        //           tool.jing_bi=map.biology.jingBi//金币\r\n        //           tool.biology_int=star//阵法编号\r\n        //           tool.shengMing=map.biology.shengMing\r\n        //           tool.moFa=map.biology.moFa\r\n        //           tool.biology=map.biology.id\r\n        //           tool.biology_name=map.biology.name\r\n        //           _this.toolsArray.push(tool);\r\n        //           cc.sys.fightingArray[map.biology.id]=tool;\r\n        //         //   _this.fightingArray[map.biology.id]=tool;\r\n            \r\n        //         //永久重复移动\r\n        //           // var randomNumup = Math.floor(Math.random() * (5 - 1 + 1)) + 1;\r\n        //           // var randomNumdown = Math.floor(Math.random() * (5 - 1 + 1)) + 1;\r\n        //           // var seq = cc.repeatForever(\r\n        //           //   cc.sequence(\r\n        //           //       cc.moveBy(randomNumup, 0,5),\r\n        //           //       // cc.scaleTo(randomNumup, 1, 1.05),\r\n        //           //       // cc.scaleTo(randomNumdown, 1.05,1),\r\n        //           //       cc.moveBy(randomNumdown, 0,-5)\r\n        //           //   ));\r\n        //           // tool.runAction(seq);\r\n            \r\n        //            cc.find('Canvas/大厅/content').addChild(tool); \r\n        //         }\r\n        //     }\r\n        //     return star;\r\n        // },\r\n    //生成生物\r\n    async biology_detail_list(TipBoxPrefab_model,info_list,biolgy_state,is_my,star){\r\n         return new Promise(resolve => {\r\n        var _this =this;\r\n        var TOOLS =[];\r\n        var TOOLS = info_list;\r\n        // let image = '/技能图标/'+skill.image;\r\n        //加载预制资源 PrefabUrl为 预制资源在 资源中的路径\r\n        cc.loader.loadRes('/model战斗/biology_生物详情', function(errorMessage,loadedResource_icon){\r\n            //检查资源加载\r\n            if( errorMessage ) { cc.log( '载入预制资源失败, 原因:' + errorMessage ); return; }\r\n            if( !(loadedResource_icon instanceof cc.Prefab ) ) { cc.log( '你载入的不是预制资源!' ); return; }\r\n            //开始实例化预制资源\r\n\r\n            for (var prop in info_list) {\r\n                //声明节点对象\r\n                let  TipBoxPrefab_icon =  cc.instantiate(loadedResource_icon);\r\n                let map = TOOLS[prop];\r\n                let info = map.biology;\r\n\r\n                if(info.length!=0){\r\n\r\n                    //放在资源下面\r\n                    let image = info.picture;\r\n                    cc.loader.loadRes(image, cc.SpriteFrame, function (err, texture) { \r\n                        if (err) {\r\n                            // cc.error(err.message || err);\r\n                            return;\r\n                        }\r\n                        TipBoxPrefab_icon.getChildByName('生物').getComponent(cc.Sprite).spriteFrame = texture; \r\n                    });\r\n                    if(is_my==0){\r\n                        //图片翻转\r\n                        TipBoxPrefab_icon.getChildByName('生物').setScale(-1, 1);\r\n                    }\r\n                    TipBoxPrefab_icon.getChildByName('生物').color = new cc.color(info.color); \r\n                    TipBoxPrefab_icon.getChildByName('生命s').getComponent(cc.Label).string= info.shengMing\r\n                    TipBoxPrefab_icon.getChildByName('魔法s').getComponent(cc.Label).string= info.moFa\r\n                    TipBoxPrefab_icon.getChildByName('生物名称s').getComponent(cc.Label).string= info.name\r\n                    TipBoxPrefab_icon.getChildByName('生物等级s').getComponent(cc.Label).string= '等级'+info.grade+'('+biolgy_state[info.state]+')';\r\n                    //创建一个新button 并将其挂载到创建的精灵下\r\n                    _this.onConfirBtn(TipBoxPrefab_icon,info);\r\n                    //写入icon\r\n                    TipBoxPrefab_icon.x=parseInt(map.x)\r\n                    TipBoxPrefab_icon.getChildByName('阵法s').getComponent(cc.Label).string= star-1;\r\n                    TipBoxPrefab_icon.y=map.y\r\n                    TipBoxPrefab_icon.is_my=is_my//阵容\r\n                    TipBoxPrefab_icon.jing_bi=map.biology.jingBi//金币\r\n                    TipBoxPrefab_icon.biology_int=star//阵法编号\r\n                    TipBoxPrefab_icon.shengMing=map.biology.shengMing\r\n                    TipBoxPrefab_icon.moFa=map.biology.moFa\r\n                    TipBoxPrefab_icon.biology=map.biology.id\r\n                    TipBoxPrefab_icon.biology_name=map.biology.name\r\n                    cc.sys.toolsArray.push(TipBoxPrefab_icon);\r\n                    cc.sys.fightingArray[map.biology.id]=TipBoxPrefab_icon;\r\n                    TipBoxPrefab_model.addChild(TipBoxPrefab_icon);\r\n                }\r\n      \r\n            }\r\n            resolve();\r\n        })\r\n\r\n        })\r\n        return TipBoxPrefab_model\r\n    },\r\n    //按钮点击回调\r\n    onConfirBtn:function(TipBoxPrefab_icon,info){\r\n        var _this =this;\r\n        TipBoxPrefab_icon.on('click', function () {\r\n            //技能图标挂载\r\n            var alertBoxPrefab = cc.find('Canvas/弹窗')\r\n            //图片直接传过去，不用再加载一次\r\n            var biology_image =TipBoxPrefab_icon.getChildByName('生物').getComponent(cc.Sprite).spriteFrame;\r\n            alertBoxPrefab.getComponent('biology_detailTools').biology_detail_alert(alertBoxPrefab,info,biology_image)\r\n        })\r\n    },\r\n   \r\n});\r\n"]}