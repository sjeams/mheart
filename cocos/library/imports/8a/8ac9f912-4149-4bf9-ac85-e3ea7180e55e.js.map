{"version":3,"sources":["assets\\Script\\fighting\\fightingTools.js"],"names":["HttpHelper","require","httpRequest","params","cc","Class","Component","properties","initInfo","info","biolgy_state","is_my","_this","remoteUrl","httpUrl","loader","load","url","err","texture","node","getChildByName","getComponent","Sprite","spriteFrame","SpriteFrame","setScale","color","Label","string","bindClickEvent","Button","button","index","clickEventHandler","EventHandler","target","component","handler","customEventData","clickEvents","push","onConfirBtn","e","BoxPrefab","find","biology_image","biology_detail_alert"],"mappings":"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","sourceRoot":"/","sourcesContent":["var HttpHelper = require(\"../http\"); \r\nvar httpRequest = new HttpHelper();\r\nvar params =[];\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // server_picture: cc.Node,\r\n        // server_type: cc.Node,\r\n        // server_name: cc.Node,\r\n        // server_star: cc.Node,\r\n        // server_shenMing: cc.Node,\r\n        // server_moFa: cc.Node,\r\n        // sprite_server_biology: cc.Button\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    initInfo(info,biolgy_state,is_my) {\r\n        // 初始化该道具相关信息\r\n        // 图片\r\n        var _this = this;\r\n        if(info['picture']){\r\n            var remoteUrl = httpRequest.httpUrl(info['picture']);\r\n            // cc.loader.loadRes(httpRequest.httpUrl(info['picture']), cc.SpriteFrame, function (err, spriteFrame) {   \r\n            //     console.log(_self)\r\n            //     _self.node.getComponent(cc.Sprite).spriteFrame = spriteFrame; \r\n            // });\r\n            cc.loader.load({ url: remoteUrl }, function (err, texture) {  \r\n                // _self.node.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture)\r\n                // console.log(texture)\r\n                if (err) {\r\n                    // cc.error(err.message || err);\r\n                    return;\r\n                }\r\n                if(texture){\r\n                    _this.node.getChildByName('生物').getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n                    //销毁\r\n                    // this.image.spriteFrame=null;\r\n                }\r\n            });\r\n            if(is_my==0){\r\n                //图片翻转\r\n                this.node.getChildByName('生物').setScale(-1, 1);\r\n            }\r\n        }\r\n            this.node.getChildByName('生物').color = new cc.color(info['color']); \r\n            this.node.getChildByName('生命s').getComponent(cc.Label).string= info['shengMing']\r\n            this.node.getChildByName('魔法s').getComponent(cc.Label).string= info['moFa']\r\n            this.node.getChildByName('生物名称s').getComponent(cc.Label).string= info['name'];\r\n            this.node.getChildByName('生物等级s').getComponent(cc.Label).string= '等级'+info['grade']+'('+biolgy_state[info['state']]+')';\r\n \r\n            //创建一个新button 并将其挂载到创建的精灵下\r\n            this.bindClickEvent( this.node.getComponent(cc.Button), info);\r\n    },\r\n    // 绑定按钮事件\r\n    bindClickEvent: function (button, index) {\r\n        // console.log(index)\r\n        var clickEventHandler = new cc.Component.EventHandler();\r\n        //这个 node 节点是你的事件处理代码组件所属的节点\r\n        clickEventHandler.target = this.node; \r\n        //这个是代码文件名\r\n        clickEventHandler.component = \"fightingTools\";  // js脚本文件-绑定\r\n        clickEventHandler.handler = \"onConfirBtn\";// js方法名称--绑定\r\n        clickEventHandler.customEventData = index; // 回调内容\r\n        button.clickEvents.push(clickEventHandler);\r\n    },\r\n    //按钮点击回调\r\n    onConfirBtn:function(e,info){\r\n        var _this=this;  \r\n        // _this.biology_detail_alert(info)\r\n        //技能图标挂载\r\n        var BoxPrefab = cc.find('Canvas/弹窗')\r\n        //图片直接传过去，不用再加载一次\r\n        var biology_image =_this.node.getChildByName('生物').getComponent(cc.Sprite).spriteFrame;\r\n        BoxPrefab.getComponent('biology_detailTools').biology_detail_alert(BoxPrefab,info,biology_image)\r\n    },\r\n\r\n   \r\n});\r\n"]}