{"version":3,"sources":["assets\\Script\\commonApi\\model.js"],"names":["httpModel","cc","Class","Component","removeBoxprefab","http_globalData","BoxPrefab_content","removeAllChildren","destroyAllChildren","openAlert_remove","find","openAlert_hidden","active","openzhenfa_hidden","httpRequestBagApi","http_update_zhenfa","model_biology_fighting","Promise","resolve","loader","loadRes","errorMessage","loadedResource","log","model_biology_fightingEnd","TipBoxPrefab","instantiate","getChildByName","on","httpRequestModel","httpRequest","playGame","getComponent","playTask","model_home_openBiology","model_home_zhenfa","model_home_zhenfa_bag","window"],"mappings":"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","sourceRoot":"/","sourcesContent":["// 背包的api请求接口\r\nconst httpModel = cc.Class({\r\n    extends: cc.Component,\r\n    //移除容器\r\n    removeBoxprefab(){\r\n        http_globalData.BoxPrefab_content.removeAllChildren();\r\n        http_globalData.BoxPrefab_content.destroyAllChildren();\r\n    },\r\n    openAlert_remove(){\r\n        // cc.find('Canvas/弹窗').active =false;\r\n        cc.find('Canvas/弹窗').removeAllChildren();// 结束弹窗结果\r\n    },\r\n    openAlert_hidden(){\r\n        // cc.find('Canvas/弹窗').active =false;\r\n        cc.find('Canvas/结算').active =false;// 结束弹窗结果\r\n    },\r\n    //阵法 关闭 提交结果，需要单独处理了\r\n    async openzhenfa_hidden(){\r\n        // cc.log(http_globalData.zhenfa)   \r\n        await  httpRequestBagApi.http_update_zhenfa()\r\n        // cc.find('Canvas/弹窗').removeAllChildren();\r\n    },\r\n    //加载模板战斗生物详情\r\n   async model_biology_fighting() {\r\n        return new Promise(resolve => {    \r\n        cc.loader.loadRes('/model战斗/biology_生物详情', function(errorMessage,loadedResource){\r\n                if( errorMessage ) { cc.log( '载入预制资源失败, 原因:' + errorMessage ); return; }\r\n                // var TipBoxPrefab_tips = cc.instantiate(loadedResource);\r\n                http_globalData.model_biology_fighting =loadedResource\r\n                resolve();\r\n            })   \r\n        });\r\n    },\r\n    // //操作提示\r\n    // alert_goTips(tips){\r\n    //     var TipBoxPrefab_tips = cc.instantiate(http_globalData.alert_tips)\r\n    //     TipBoxPrefab_tips.getChildByName('提示s').getComponent(cc.Label).string=tips\r\n    //     TipBoxPrefab_tips.runAction(cc.sequence( cc.fadeIn(0.1),cc.delayTime(0.3),cc.fadeOut(0.2)),cc.callFunc(function(){ \r\n    //         //移除挂载\r\n    //         TipBoxPrefab_tips.destroy();\r\n    //     },this)); \r\n    //     cc.find('Canvas').addChild(TipBoxPrefab_tips); \r\n    // },\r\n    //战斗结束\r\n    async model_biology_fightingEnd() {\r\n        return new Promise(resolve => {    \r\n        cc.loader.loadRes('/model弹窗/biology_结算', function(errorMessage,loadedResource){\r\n                if( errorMessage ) { cc.log( '载入预制资源失败, 原因:' + errorMessage ); return; }\r\n                var TipBoxPrefab = cc.instantiate(loadedResource);\r\n                TipBoxPrefab.getChildByName('关闭弹窗').on('click', function () {\r\n                    httpRequestModel.openAlert_hidden()\r\n                }, this);\r\n                TipBoxPrefab.getChildByName('canser').on('click', function () {\r\n                    httpRequestModel.openAlert_hidden()\r\n                }, this);\r\n                TipBoxPrefab.getChildByName('返回地图').on('click', function () {\r\n                    httpRequest.playGame(\"sence_ditu\")\r\n                }, this);\r\n                TipBoxPrefab.getChildByName('重播').on('click', function () {\r\n                    httpRequestModel.removeBoxprefab()\r\n                    cc.find('Canvas/大厅/content').getComponent('score_fighting').playTask( )\r\n                    httpRequestModel.openAlert_hidden()\r\n                }, this);\r\n                http_globalData.model_biology_fightingEnd =TipBoxPrefab\r\n                resolve();\r\n            })   \r\n        });\r\n    },\r\n\r\n    //加载模板战斗生物详情\r\n    async model_home_openBiology() {\r\n        return new Promise(resolve => {    \r\n            cc.loader.loadRes('/model背包/A生物背包', function(errorMessage,loadedResource){\r\n                if( errorMessage ) { cc.log( '载入预制资源失败, 原因:' + errorMessage ); return; }\r\n                var TipBoxPrefab = cc.instantiate(loadedResource);\r\n                TipBoxPrefab.getChildByName('关闭弹窗').on('click', function () {\r\n                    httpRequestModel.openAlert_remove()\r\n                }, this);\r\n                http_globalData.model_home_openBiology =TipBoxPrefab\r\n                resolve();\r\n            })   \r\n        });\r\n    },\r\n\r\n    //加载模板战斗生物详情\r\n    async model_home_zhenfa() {\r\n        return new Promise(resolve => {    \r\n            cc.loader.loadRes('/model布阵/A生物布阵', function(errorMessage,loadedResource){\r\n                if( errorMessage ) { cc.log( '载入预制资源失败, 原因:' + errorMessage ); return; }\r\n                var TipBoxPrefab = cc.instantiate(loadedResource);\r\n                TipBoxPrefab.getChildByName('关闭弹窗').on('click', function () {\r\n                    httpRequestModel.openzhenfa_hidden()\r\n                }, this);\r\n                http_globalData.model_home_zhenfa =TipBoxPrefab\r\n                resolve();\r\n            })   \r\n        });\r\n    },\r\n    //加载模板战斗生物详情\r\n    async model_home_zhenfa_bag() {\r\n        return new Promise(resolve => {    \r\n            cc.loader.loadRes('/model布阵/背包生物', function(errorMessage,loadedResource){\r\n                if( errorMessage ) { cc.log( '载入预制资源失败, 原因:' + errorMessage ); return; }\r\n                var TipBoxPrefab = cc.instantiate(loadedResource);\r\n                // TipBoxPrefab.getChildByName('关闭弹窗').on('click', function () {\r\n                //     httpRequestModel.openzhenfa_hidden()\r\n                // }, this);\r\n                http_globalData.model_home_zhenfa_bag =TipBoxPrefab\r\n                resolve();\r\n            })   \r\n        });\r\n    },\r\n\r\n});\r\nwindow.httpRequestModel = new httpModel();"]}