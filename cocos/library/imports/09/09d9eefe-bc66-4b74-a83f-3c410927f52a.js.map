{"version":3,"sources":["assets\\Script\\场景\\map_score.js"],"names":["cc","Class","Component","properties","onLoad","httpRequestBagApi","http_music","httpRequestModel","model_fighting_map","http_globalData","BoxPrefab_content","find","spawnTools","_this","httpRequest","httpPost","data","reloadWord","addWordMap","getComponent","Label","string","name","time","type_name","info","user_in_word_map","BoxPrefab","biology_detail_list","addTouchEvent","node_1","on","Node","EventType","TOUCH_START","touchStart","TOUCH_MOVE","touchMove","TOUCH_END","touchEnd","removeBoxprefab","back_map","playGame"],"mappings":"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","sourceRoot":"/","sourcesContent":["// require(\"../common\"); \r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {  \r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    async onLoad() {\r\n      await httpRequestBagApi.http_music()\r\n      await httpRequestModel.model_fighting_map();  // 引入 战斗模型model\r\n      //全局定义容器节点\r\n      http_globalData.BoxPrefab_content= cc.find('Canvas/战斗/content')\r\n      this.spawnTools()\r\n        // this.scroll_view.node.on(\"scroll-ended\", this.on_scroll_ended.bind(this), this);\r\n    },\r\n    spawnTools () {\r\n      var _this =this;\r\n      httpRequest.httpPost('/app/app-apiword/index',{}, function (data) {\r\n          // _this.addMapPic(data) //生成地图\r\n          if(!data.data){\r\n              //刷新地图\r\n              // httpRequest.playGame( \"sence_ditu\")\r\n              _this.reloadWord()//刷新世界地图\r\n          }else{\r\n              //生成世界\r\n              _this.addWordMap(data.data) //生成生物\r\n          }\r\n      })\r\n    },\r\n    //生成生物\r\n    addWordMap(data){\r\n        // cc.log(data)\r\n        cc.find('Canvas/当前世界').getComponent(cc.Label).string = data.name+'('+data.time+'年)' \r\n        cc.find('Canvas/流速').getComponent(cc.Label).string = '流速: '+data.time+'年/S' \r\n        cc.find('Canvas/类型').getComponent(cc.Label).string = '类型: '+data.type_name\r\n        let info =data.user_in_word_map;\r\n        //技能图标挂载\r\n        var BoxPrefab =http_globalData.BoxPrefab_content\r\n        BoxPrefab.getComponent('mapTools').biology_detail_list(BoxPrefab,info)\r\n    },\r\n    addTouchEvent(node_1) {\r\n        node_1.on(cc.Node.EventType.TOUCH_START, this.touchStart, this);\r\n        node_1.on(cc.Node.EventType.TOUCH_MOVE, this.touchMove, this);\r\n        node_1.on(cc.Node.EventType.TOUCH_END, this.touchEnd, this);\r\n    },\r\n    reloadWord(){\r\n      var _this =this;\r\n      httpRequest.httpPost('/app/app-apiword/map-word',{}, function (data) {\r\n        //移除节点\r\n        httpRequestModel.removeBoxprefab()\r\n        //写入地图数据\r\n        _this.addWordMap(data.data)\r\n        })\r\n    },\r\n    back_map(){\r\n      //移除节点\r\n      // var _this = this;\r\n      httpRequestModel.removeBoxprefab()\r\n      httpRequest.playGame(\"sence_zhutian\")\r\n    },\r\n\r\n});\r\n"]}