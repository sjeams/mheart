{"version":3,"sources":["assets\\Script\\场景\\map_score.js"],"names":["require","cc","Class","Component","properties","onLoad","httpRequestBagApi","http_music","sys","BoxPrefab","find","spawnTools","_this","httpRequest","httpPost","data","reloadWord","addWordMap","log","getComponent","Label","string","name","time","type_name","info","user_in_word_map","biology_detail_list","addTouchEvent","node_1","on","Node","EventType","TOUCH_START","touchStart","TOUCH_MOVE","touchMove","TOUCH_END","touchEnd","removeBoxprefab","back_map","playGame","removeAllChildren","destroyAllChildren"],"mappings":"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","sourceRoot":"/","sourcesContent":["require(\"../common\"); \r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {  \r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    async onLoad() {\r\n      await httpRequestBagApi.http_music()\r\n      //全局定义容器节点\r\n      cc.sys.BoxPrefab= cc.find('Canvas/战斗/content')\r\n      this.spawnTools()\r\n        // this.scroll_view.node.on(\"scroll-ended\", this.on_scroll_ended.bind(this), this);\r\n    },\r\n    spawnTools () {\r\n      var _this =this;\r\n      httpRequest.httpPost('/app/app-apiword/index',{}, function (data) {\r\n          // _this.addMapPic(data) //生成地图\r\n          if(!data.data){\r\n              //刷新地图\r\n              // httpRequest.playGame( \"sence_ditu\")\r\n              _this.reloadWord()//刷新世界地图\r\n          }else{\r\n              //生成世界\r\n              _this.addWordMap(data.data) //生成生物\r\n          }\r\n      })\r\n    },\r\n    // //生成地图\r\n    // addMapPic(data){\r\n    //     var _this = this;\r\n    //     if(data.data['map_pic']){\r\n    //       var  map_pic =data.data['map_pic'];\r\n    //     }else{\r\n    //       var  map_pic =data.data['picture'];\r\n    //     }\r\n    //     var remoteUrl = httpRequest.httpUrl(map_pic);\r\n    //       cc.loader.load({ url: remoteUrl }, function (err, texture) {  \r\n    //         if(texture!=null){\r\n    //           _this.home.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n    //         }\r\n    //     });\r\n    // },\r\n\r\n    //生成生物\r\n    addWordMap(data){\r\n        cc.log(data)\r\n \r\n        cc.find('Canvas/当前世界').getComponent(cc.Label).string = data.name+'('+data.time+'年)' \r\n        cc.find('Canvas/流速').getComponent(cc.Label).string = '流速: '+data.time+'年/S' \r\n        cc.find('Canvas/类型').getComponent(cc.Label).string = '类型: '+data.type_name\r\n        let info =data.user_in_word_map;\r\n\r\n        //技能图标挂载\r\n        var BoxPrefab =cc.sys.BoxPrefab\r\n        BoxPrefab.getComponent('mapTools').biology_detail_list(BoxPrefab,info)\r\n    },\r\n    addTouchEvent(node_1) {\r\n        node_1.on(cc.Node.EventType.TOUCH_START, this.touchStart, this);\r\n        node_1.on(cc.Node.EventType.TOUCH_MOVE, this.touchMove, this);\r\n        node_1.on(cc.Node.EventType.TOUCH_END, this.touchEnd, this);\r\n    },\r\n    reloadWord(){\r\n      var _this =this;\r\n      httpRequest.httpPost('/app/app-apiword/map-word',{}, function (data) {\r\n        //移除节点\r\n        _this.removeBoxprefab()\r\n        //写入地图数据\r\n        _this.addWordMap(data.data)\r\n        })\r\n    },\r\n    back_map(){\r\n      //移除节点\r\n      var _this = this;\r\n      _this.removeBoxprefab()\r\n      httpRequest.playGame(\"sence_zhutian\")\r\n    },\r\n    //移除容器\r\n    removeBoxprefab(){\r\n      cc.sys.BoxPrefab.removeAllChildren();\r\n      cc.sys.BoxPrefab.destroyAllChildren();\r\n    }\r\n});\r\n"]}