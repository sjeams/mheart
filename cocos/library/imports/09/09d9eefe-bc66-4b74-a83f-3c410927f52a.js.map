{"version":3,"sources":["assets\\Script\\scence\\map_score.js"],"names":["HttpHelper","require","httpRequest","cc","Class","Component","properties","onLoad","sys","BoxPrefab","find","spawnTools","_this","httpPost","data","reloadWord","addWordMap","log","getComponent","Label","string","name","time","type_name","info","user_in_word_map","biology_detail_list","addTouchEvent","node_1","on","Node","EventType","TOUCH_START","touchStart","TOUCH_MOVE","touchMove","TOUCH_END","touchEnd","removeBoxprefab","back_map","playGame","urlConfig","removeAllChildren","destroyAllChildren"],"mappings":"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","sourceRoot":"/","sourcesContent":["var HttpHelper = require(\"../http\"); \r\nvar httpRequest = new HttpHelper();\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {  \r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () {\r\n      //全局定义容器节点\r\n      cc.sys.BoxPrefab= cc.find('Canvas/战斗/content')\r\n      this.spawnTools()\r\n        // this.scroll_view.node.on(\"scroll-ended\", this.on_scroll_ended.bind(this), this);\r\n    },\r\n    spawnTools () {\r\n      var _this =this;\r\n      httpRequest.httpPost('/app/app-apiword/index',{}, function (data) {\r\n          // _this.addMapPic(data) //生成地图\r\n          if(!data.data){\r\n              //刷新地图\r\n              // httpRequest.playGame(httpRequest.urlConfig(\"sence_ditu\"));\r\n              _this.reloadWord()//刷新世界地图\r\n          }else{\r\n              //生成世界\r\n              _this.addWordMap(data.data) //生成生物\r\n          }\r\n      })\r\n    },\r\n    // //生成地图\r\n    // addMapPic(data){\r\n    //     var _this = this;\r\n    //     if(data.data['map_pic']){\r\n    //       var  map_pic =data.data['map_pic'];\r\n    //     }else{\r\n    //       var  map_pic =data.data['picture'];\r\n    //     }\r\n    //     var remoteUrl = httpRequest.httpUrl(map_pic);\r\n    //       cc.loader.load({ url: remoteUrl }, function (err, texture) {  \r\n    //         if(texture!=null){\r\n    //           _this.home.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n    //         }\r\n    //     });\r\n    // },\r\n\r\n    //生成生物\r\n    addWordMap(data){\r\n        cc.log(data)\r\n \r\n        cc.find('Canvas/当前世界').getComponent(cc.Label).string = data.name+'('+data.time+'年)' \r\n        cc.find('Canvas/流速').getComponent(cc.Label).string = '流速: '+data.time+'年/S' \r\n        cc.find('Canvas/类型').getComponent(cc.Label).string = '类型: '+data.type_name\r\n        let info =data.user_in_word_map;\r\n\r\n        //技能图标挂载\r\n        var BoxPrefab =cc.sys.BoxPrefab\r\n        BoxPrefab.getComponent('mapTools').biology_detail_list(BoxPrefab,info)\r\n    },\r\n    addTouchEvent(node_1) {\r\n        node_1.on(cc.Node.EventType.TOUCH_START, this.touchStart, this);\r\n        node_1.on(cc.Node.EventType.TOUCH_MOVE, this.touchMove, this);\r\n        node_1.on(cc.Node.EventType.TOUCH_END, this.touchEnd, this);\r\n    },\r\n    reloadWord(){\r\n      var _this =this;\r\n      httpRequest.httpPost('/app/app-apiword/map-word',{}, function (data) {\r\n        //移除节点\r\n        _this.removeBoxprefab()\r\n        //写入地图数据\r\n        _this.addWordMap(data.data)\r\n        })\r\n    },\r\n    back_map(){\r\n      //移除节点\r\n      var _this = this;\r\n      _this.removeBoxprefab()\r\n      httpRequest.playGame(httpRequest.urlConfig(\"sence_zhutian\"));\r\n    },\r\n    //移除容器\r\n    removeBoxprefab(){\r\n      cc.sys.BoxPrefab.removeAllChildren();\r\n      cc.sys.BoxPrefab.destroyAllChildren();\r\n    }\r\n});\r\n"]}