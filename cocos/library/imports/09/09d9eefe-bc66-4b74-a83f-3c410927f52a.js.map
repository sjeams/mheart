{"version":3,"sources":["assets\\Script\\scence\\map_score.js"],"names":["HttpHelper","require","httpRequest","cc","Class","Component","properties","onLoad","sys","BoxPrefab","find","spawnTools","_this","httpPost","data","reloadWord","addWordMap","addMapPic","map_pic","remoteUrl","httpUrl","loader","load","url","err","texture","home","getComponent","Sprite","spriteFrame","SpriteFrame","Label","string","name","time","type_name","info","user_in_word_map","biology_detail_list","addTouchEvent","node_1","on","Node","EventType","TOUCH_START","touchStart","TOUCH_MOVE","touchMove","TOUCH_END","touchEnd","removeBoxprefab","back_map","playGame","urlConfig","removeAllChildren","destroyAllChildren"],"mappings":"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","sourceRoot":"/","sourcesContent":["var HttpHelper = require(\"../http\"); \r\nvar httpRequest = new HttpHelper();\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {  \r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function () {\r\n      //全局定义容器节点\r\n      cc.sys.BoxPrefab= cc.find('Canvas/战斗/content')\r\n      this.spawnTools()\r\n        // this.scroll_view.node.on(\"scroll-ended\", this.on_scroll_ended.bind(this), this);\r\n    },\r\n    spawnTools () {\r\n      var _this =this;\r\n      httpRequest.httpPost('/app/app-apiword/index',{}, function (data) {\r\n          // _this.addMapPic(data) //生成地图\r\n          if(!data.data){\r\n              //刷新地图\r\n              // httpRequest.playGame(httpRequest.urlConfig(\"sence_ditu\"));\r\n              _this.reloadWord()//刷新世界地图\r\n          }else{\r\n              //生成世界\r\n              _this.addWordMap(data) //生成生物\r\n          }\r\n      })\r\n    },\r\n    //生成地图\r\n    addMapPic(data){\r\n        var _this = this;\r\n        if(data.data['map_pic']){\r\n          var  map_pic =data.data['map_pic'];\r\n        }else{\r\n          var  map_pic =data.data['picture'];\r\n        }\r\n        var remoteUrl = httpRequest.httpUrl(map_pic);\r\n          cc.loader.load({ url: remoteUrl }, function (err, texture) {  \r\n            if(texture!=null){\r\n              _this.home.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n            }\r\n        });\r\n    },\r\n\r\n    //生成生物\r\n    addWordMap(data){\r\n        // cc.log(data)\r\n        cc.find('Canvas/tips/当前世界').getComponent(cc.Label).string = data.data.name+'('+data.data.time+'年)' \r\n        cc.find('Canvas/tips/流速').getComponent(cc.Label).string = '流速: '+data.data.time+'年/S' \r\n        cc.find('Canvas/tips/类型').getComponent(cc.Label).string = '类型: '+data.data.type_name\r\n        // cc.find('Canvas/tips/时间').getComponent(cc.Label).string = '世界时间: '+data.data.name+'('+data.data.time+'年)' \r\n        let info =data.data.user_in_word_map;\r\n\r\n        //技能图标挂载\r\n        var BoxPrefab =cc.sys.BoxPrefab\r\n        BoxPrefab.getComponent('mapTools').biology_detail_list(BoxPrefab,info)\r\n    },\r\n    addTouchEvent(node_1) {\r\n        node_1.on(cc.Node.EventType.TOUCH_START, this.touchStart, this);\r\n        node_1.on(cc.Node.EventType.TOUCH_MOVE, this.touchMove, this);\r\n        node_1.on(cc.Node.EventType.TOUCH_END, this.touchEnd, this);\r\n    },\r\n    reloadWord(){\r\n      var _this =this;\r\n      httpRequest.httpPost('/app/app-apiword/map-word',{}, function (data) {\r\n        //移除节点\r\n        _this.removeBoxprefab()\r\n        //写入地图数据\r\n        _this.addWordMap(data)\r\n        })\r\n    },\r\n    back_map(){\r\n      //移除节点\r\n      var _this = this;\r\n      _this.removeBoxprefab()\r\n      httpRequest.playGame(httpRequest.urlConfig(\"sence_zhutian\"));\r\n    },\r\n    //移除容器\r\n    removeBoxprefab(){\r\n      cc.sys.BoxPrefab.removeAllChildren();\r\n      cc.sys.BoxPrefab.destroyAllChildren();\r\n    }\r\n});\r\n"]}