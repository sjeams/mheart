{"version":3,"sources":["assets\\Script\\场景\\mapTools.js"],"names":["cc","Class","Component","properties","biology_detail_list","TipBoxPrefab_model","info_list","_this","TOOLS","loader","loadRes","errorMessage","loadedResource_icon","log","Prefab","prop","TipBoxPrefab_icon","instantiate","map","info","biology_list","total","length","map_status","x","httpRequest","number_map_rand","y","image","picture","getChildByName","getComponent","Sprite","spriteFrame","http_globalAsset","http_base_asset_biology","color","type_color","star","i","Label","string","onConfirBtn","map_int","addChild","on","sys","localStorage","setItem","JSON","stringify","playGame"],"mappings":"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","sourceRoot":"/","sourcesContent":["// require(\"../common\"); \r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // server_picture: cc.Node,\r\n        // server_type: cc.Node,\r\n        // server_name: cc.Node,\r\n        // server_star: cc.Node,\r\n        // sprite_server_login: cc.Button\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    //技能图片渲染\r\n    biology_detail_list(TipBoxPrefab_model,info_list){\r\n        var _this =this;\r\n        var TOOLS =[];\r\n        var TOOLS = info_list;\r\n        // let image = '/技能图标/'+skill.image;\r\n        //加载预制资源 PrefabUrl为 预制资源在 资源中的路径\r\n        cc.loader.loadRes('/model战斗/sprite_地图', function(errorMessage,loadedResource_icon){\r\n            //检查资源加载\r\n            if( errorMessage ) { cc.log( '载入预制资源失败, 原因:' + errorMessage ); return; }\r\n            if( !(loadedResource_icon instanceof cc.Prefab ) ) { cc.log( '你载入的不是预制资源!' ); return; }\r\n            //开始实例化预制资源\r\n\r\n            for (var prop in info_list) {\r\n                //声明节点对象\r\n                let  TipBoxPrefab_icon =  cc.instantiate(loadedResource_icon);\r\n                let map = TOOLS[prop];\r\n                let info = map.biology_list[0];\r\n                let total = map.biology_list.length;\r\n                //战斗胜利移除\r\n                if(map.map_status==1){\r\n                    //设置距离\r\n                    TipBoxPrefab_icon.x=httpRequest.number_map_rand(map.x,150) //设置随x机偏移量0-49\r\n                    TipBoxPrefab_icon.y=httpRequest.number_map_rand(map.y,25)//设置随机y偏移量0-49\r\n                    //放在资源下面\r\n                    let image = info.picture;\r\n                    // cc.loader.loadRes(image, cc.SpriteFrame, function (err, texture) { \r\n                        // if (err) {\r\n                        //     // cc.error(err.message || err);\r\n                        //     return;\r\n                        // }\r\n                        TipBoxPrefab_icon.getChildByName('生物').getComponent(cc.Sprite).spriteFrame =  http_globalAsset.http_base_asset_biology[image]; \r\n                    // });\r\n                    var color = ['#FFFFFF','green','#BDFF00','#FFD100','#FF0000','#ffe000',];\r\n                    var type_color = color[info['yiXing']];\r\n                    // console.log(info)\r\n                    var star ='';    \r\n                    for(var i=0;i<=info['yiXing'];i++){\r\n                        star +='⭐';\r\n                    }\r\n                    TipBoxPrefab_icon.getChildByName('名称').getComponent(cc.Label).string=info['name']+'('+total+')';\r\n                    TipBoxPrefab_icon.getChildByName('名称').color = new cc.color(type_color);\r\n                    TipBoxPrefab_icon.getChildByName('等级').getComponent(cc.Label).string='Lv.'+info['grade']+'('+info['state_name']['name']+')';\r\n                    TipBoxPrefab_icon.getChildByName('等级').color = new cc.color(type_color);\r\n                    TipBoxPrefab_icon.getChildByName('星级').getComponent(cc.Label).string= star;\r\n                    //创建一个新button 并将其挂载到创建的精灵下\r\n                    _this.onConfirBtn(TipBoxPrefab_icon,map.map_int);\r\n                    //写入icon\r\n                    TipBoxPrefab_model.addChild(TipBoxPrefab_icon);\r\n                }\r\n            }\r\n        })\r\n        return TipBoxPrefab_model\r\n    },\r\n    //按钮点击回调\r\n    onConfirBtn:function(TipBoxPrefab_icon,map_int){\r\n        TipBoxPrefab_icon.on('click', function () {\r\n            //session设置战斗请求id\r\n            cc.sys.localStorage.setItem('figthing_map_int', JSON.stringify(map_int)); \r\n            cc.log(333)\r\n            httpRequest.playGame(\"sence_zhandou\",1,1)\r\n        })\r\n    },\r\n \r\n});\r\n"]}