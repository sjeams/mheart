{"version":3,"sources":["assets\\Script\\scence\\mapTools.js"],"names":["HttpHelper","require","httpRequest","cc","Class","Component","properties","biology_detail_list","TipBoxPrefab_model","info_list","_this","TOOLS","loader","loadRes","errorMessage","loadedResource_icon","log","Prefab","TipBoxPrefab_icon","instantiate","map","prop","info","biology_list","total","length","map_status","x","y","image","picture","SpriteFrame","err","texture","getChildByName","getComponent","Sprite","spriteFrame","color","type_color","star","i","Label","string","onConfirBtn","map_int","addChild","on","sys","localStorage","setItem","JSON","stringify","playGame","urlConfig"],"mappings":"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","sourceRoot":"/","sourcesContent":["var HttpHelper = require(\"../http\"); \r\nvar httpRequest = new HttpHelper();\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // server_picture: cc.Node,\r\n        // server_type: cc.Node,\r\n        // server_name: cc.Node,\r\n        // server_star: cc.Node,\r\n        // sprite_server_login: cc.Button\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    //技能图片渲染\r\n    biology_detail_list(TipBoxPrefab_model,info_list){\r\n        var _this =this;\r\n        var TOOLS =[];\r\n        var TOOLS = info_list;\r\n        // let image = '/技能图标/'+skill.image;\r\n        //加载预制资源 PrefabUrl为 预制资源在 资源中的路径\r\n        cc.loader.loadRes('/fighting/sprite_地图', function(errorMessage,loadedResource_icon){\r\n            //检查资源加载\r\n            if( errorMessage ) { cc.log( '载入预制资源失败, 原因:' + errorMessage ); return; }\r\n            if( !(loadedResource_icon instanceof cc.Prefab ) ) { cc.log( '你载入的不是预制资源!' ); return; }\r\n            //开始实例化预制资源\r\n\r\n            for (var prop in info_list) {\r\n                //声明节点对象\r\n                let  TipBoxPrefab_icon =  cc.instantiate(loadedResource_icon);\r\n                let map = TOOLS[prop];\r\n                let info = map.biology_list[0];\r\n                let total = map.biology_list.length;\r\n                //战斗胜利移除\r\n                if(map.map_status==1){\r\n                    TipBoxPrefab_icon.x=map.x\r\n                    TipBoxPrefab_icon.y=map.y\r\n                    //放在资源下面\r\n                    let image = info.picture;\r\n                    cc.loader.loadRes(image, cc.SpriteFrame, function (err, texture) { \r\n                        if (err) {\r\n                            // cc.error(err.message || err);\r\n                            return;\r\n                        }\r\n                        TipBoxPrefab_icon.getChildByName('生物').getComponent(cc.Sprite).spriteFrame = texture; \r\n                    });\r\n                    var color = ['#FFFFFF','green','#BDFF00','#FFD100','#FF0000','#ffe000',];\r\n                    var type_color = color[info['yiXing']];\r\n                    // console.log(info)\r\n                    var star ='';    \r\n                    for(var i=0;i<=info['yiXing'];i++){\r\n                        star +='⭐';\r\n                    }\r\n                    TipBoxPrefab_icon.getChildByName('名称').getComponent(cc.Label).string=info['name']+'('+total+')';\r\n                    TipBoxPrefab_icon.getChildByName('名称').color = new cc.color(type_color);\r\n                    TipBoxPrefab_icon.getChildByName('等级').getComponent(cc.Label).string='Lv.'+info['grade']+'('+info['state_name']['name']+')';\r\n                    TipBoxPrefab_icon.getChildByName('等级').color = new cc.color(type_color);\r\n                    TipBoxPrefab_icon.getChildByName('星级').getComponent(cc.Label).string= star;\r\n                    //创建一个新button 并将其挂载到创建的精灵下\r\n                    _this.onConfirBtn(TipBoxPrefab_icon,map.map_int);\r\n                    //写入icon\r\n                    TipBoxPrefab_model.addChild(TipBoxPrefab_icon);\r\n                }\r\n            }\r\n        })\r\n        return TipBoxPrefab_model\r\n    },\r\n    //按钮点击回调\r\n    onConfirBtn:function(TipBoxPrefab_icon,map_int){\r\n        TipBoxPrefab_icon.on('click', function () {\r\n            //session设置战斗请求id\r\n            cc.sys.localStorage.setItem('figthing_map_int', JSON.stringify(map_int)); \r\n            httpRequest.playGame(httpRequest.urlConfig(\"sence_zhandou\"),1);\r\n        })\r\n    },\r\n \r\n});\r\n"]}