{"version":3,"sources":["assets\\Script\\commonApi\\http.js"],"names":["https_url","HttpHelper","cc","Class","Component","onLoad","image_cache","httpUrl","new_url","httpUrlJson","httpGets","url","callback","xhr","loader","getXMLHttpRequest","onreadystatechange","readyState","status","respone","responseText","open","timeout","send","httpPostLogin","params","token","sys","localStorage","getItem","JSON","parse","setRequestHeader","stringify","httpPost","_this","new_respone","code","director","loadScene","urlConfig","playGame","sence","task","no_progress","http_globalAsset","http_base_redict_sence","_task","_no_progress","http_globalData","model_onload_loading_new","instantiate","model_onload_loading","find","addChild","fightint","progress","_progressRuning","completeCount","totalCount","assets","describe","progressBar","getComponent","ProgressBar","sys_label","Label","sys_des","loading_asset","http_base_asset_num","type","asset","content","SpriteFrame","newname","name","http_base_asset_biology","string","http_base_asset_zhuangbei","http_base_asset_skill","http_base_asset_xiaoguo","http_base_asset_word","parseInt","_progressCallback","item","length","_completeCallback","err","texture","loadnextScene","loadResDir","bind","release","log","parent","removeChild","preloadScene","map_int","userid","data","setItem","sid","macro","CLEANUP_IMAGE_CACHE","dynamicAtlasManager","enabled","maxFrameSize","sence_login","sence_jiaose","sence_register","sence_jiangli","sence_chongzhi","sence_zhifu","sence_dating","sence_zhutian","sence_chuangzao","sence_shenmo","sence_mijing","sence_wangu","sence_tiandi","sence_zhenyaota","sence_ditu","sence_zhandou","number_string_wan","num","point","shengMing_string","toString","decimal","substring","parseFloat","number_rand","Math","round","random","number_map_rand","map_position","value","is_add","httpRequest","postion","window"],"mappings":"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","sourceRoot":"/","sourcesContent":["/**\r\n * Http 请求封装\r\n */\r\n// var https_url = 'https://www.aheart.cn';\r\n// require(\"./runtime\"); \r\nvar https_url = 'http://cs.aheart.com';\r\nconst HttpHelper = cc.Class({\r\n    extends: cc.Component,\r\n    // statics: {\r\n    // },\r\n    // properties: {\r\n    // },\r\n    onLoad () {\r\n \r\n        // 开启调试\r\n        // cc.dynamicAtlasManager.showDebug(true);\r\n        // 关闭调试\r\n        // cc.dynamicAtlasManager.showDebug(false);\r\n        // 从服务器加载mp3来进行播放\r\n        //动态合图\r\n        this.image_cache();\r\n   \r\n        // cc.audioEngine.play(http_globalAsset.loading_asset, false, 1);  \r\n        //配置路径\r\n    },  \r\n    /**\r\n     * get请求\r\n     * @param {string} url\r\n     * @param {function} callback \r\n     */\r\n        httpUrl(new_url){\r\n            return new_url?https_url+'/app/api/file-content?url='+https_url+new_url:'';\r\n            //https://www.aheart.cn/app/api/file-content?url=https://www.aheart.cn/app/loading/loading.jpg\r\n        },\r\n        httpUrlJson(new_url){\r\n            return https_url+'/app/api/file-json?url='+https_url+new_url;\r\n            //https://www.aheart.cn/app/api/file-content?url=https://www.aheart.cn/app/loading/loading.jpg\r\n        },\r\n        httpGets: function (url, callback) {\r\n            var url =https_url+url;\r\n            var xhr = cc.loader.getXMLHttpRequest();\r\n            xhr.onreadystatechange = function () {\r\n                if (xhr.readyState === 4 && (xhr.status >= 200 && xhr.status < 300)) {\r\n                    var respone = xhr.responseText;\r\n                    callback(respone);\r\n                }\r\n            };\r\n            xhr.open(\"GET\", url, true);\r\n            // if (cc.sys.isNative) {\r\n            //     xhr.setRequestHeader(\"Accept-Encoding\", \"gzip,deflate\");\r\n            // }\r\n        \r\n            // note: In Internet Explorer, the timeout property may be set only after calling the open()\r\n            // method and before calling the send() method.\r\n            xhr.timeout = 5000;// 5 seconds for timeout\r\n        \r\n            xhr.send();\r\n        },\r\n        \r\n        httpPostLogin: function (url, params, callback) {\r\n            var token = cc.sys.localStorage.getItem('token');\r\n \r\n            params['token'] = token;\r\n            var url =https_url+url;\r\n            var xhr = cc.loader.getXMLHttpRequest();\r\n            xhr.onreadystatechange = function () {\r\n                // cc.log('xhr.readyState='+xhr.readyState+'  xhr.status='+xhr.status);\r\n                if (xhr.readyState === 4 && (xhr.status >= 200 && xhr.status < 300)) {\r\n                    var respone = xhr.responseText;\r\n                    callback(JSON.parse(respone));  // json 转数组\r\n                }else{\r\n                    //   callback(-1);\r\n                }\r\n            };\r\n            xhr.open(\"POST\", url, true);\r\n            // if (cc.sys.isNative) {\r\n            //     xhr.setRequestHeader(\"Accept-Encoding\", \"gzip,deflate\");\r\n            // }\r\n            // xhr.setRequestHeader(\"Http-Edition\", \"1.0.0.0\");  // 版本\r\n            // xhr.setRequestHeader(\"Ip\", \"192.168.1.1\");\r\n            // xhr.setRequestHeader(\"Http-Token\", \"gzipdeflate\");\r\n            xhr.timeout = 5000;// 5 seconds for timeout\r\n            // xhr.setRequestHeader('Content-Type', 'application/json,multipart/form-data');\r\n            xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded; charset=utf-8\")\r\n            // xhr.send(JSON.stringify(params));\r\n            xhr.send('data='+JSON.stringify(params));\r\n            //  xhr.send(params);\r\n\r\n        },\r\n        //带token访问\r\n        httpPost: function (url, params, callback) {\r\n            var _this =this;\r\n            var token = cc.sys.localStorage.getItem('token');\r\n    \r\n            params['token'] = token;\r\n            var url =https_url+url;\r\n            var xhr = cc.loader.getXMLHttpRequest();\r\n            xhr.onreadystatechange = function () {\r\n                // cc.log('xhr.readyState='+xhr.readyState+'  xhr.status='+xhr.status);\r\n                if (xhr.readyState === 4 && (xhr.status >= 200 && xhr.status < 300)) {\r\n                    var respone = xhr.responseText;\r\n                    var new_respone =JSON.parse(respone);\r\n                    if(new_respone.code==0){\r\n                        //未登录\r\n                        // console.log(JSON.parse(respone))\r\n                        cc.director.loadScene(_this.urlConfig(\"sence_login\"));\r\n                    }else{\r\n                        callback(JSON.parse(respone));  // json 转数组\r\n                    }\r\n                }else{\r\n                    //   callback(-1);\r\n                }\r\n            };\r\n            xhr.open(\"POST\", url, true);\r\n            // if (cc.sys.isNative) {\r\n            //     xhr.setRequestHeader(\"Accept-Encoding\", \"gzip,deflate\");\r\n            // }\r\n            // xhr.setRequestHeader(\"Http-Edition\", \"1.0.0.0\");  // 版本\r\n            // xhr.setRequestHeader(\"Ip\", \"192.168.1.1\");\r\n            // xhr.setRequestHeader(\"Http-Token\", \"gzipdeflate\");\r\n            xhr.timeout = 5000;// 5 seconds for timeout\r\n            // xhr.setRequestHeader('Content-Type', 'application/json,multipart/form-data');\r\n            // xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\r\n            xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded; charset=utf-8\")\r\n            // xhr.send(JSON.stringify(params));\r\n            xhr.send('data='+JSON.stringify(params));\r\n            //  xhr.send(params);\r\n\r\n        },\r\n        //场景加载--进度条\r\n        playGame(sence,task,no_progress) {\r\n            //场景转译\r\n            // var sence =this.urlConfig(sence);\r\n            http_globalAsset.http_base_redict_sence=''\r\n            if(sence!=''){\r\n                http_globalAsset.http_base_redict_sence = this.urlConfig(sence);\r\n            }\r\n            var _task =task||0;\r\n            var _no_progress =no_progress||0;\r\n            var _this =this;\r\n            //是否加载场景--loading\r\n            if(_no_progress){\r\n                //开始实例化预制资源\r\n                http_globalData.model_onload_loading_new = cc.instantiate(http_globalAsset.model_onload_loading);\r\n                //将预制资源添加到父节点\r\n                // CanvasNode.addChild(TipBoxPrefab);\r\n                cc.find('Canvas').addChild(http_globalData.model_onload_loading_new);\r\n                //请求战斗记录\r\n                if(_task==1){\r\n                    _this.fightint();\r\n                }else{\r\n                    _this.progress();\r\n                }\r\n            }else{\r\n                //加载场景--不加载进度条\r\n                cc.director.loadScene(http_globalAsset.http_base_redict_sence, function () {  \r\n                    // spawnTools();\r\n                });\r\n            }\r\n        },\r\n        //加载资源\r\n        _progressRuning(completeCount,totalCount,assets,describe){\r\n            //加载进度回调\r\n            var progressBar =   cc.find('/progressBar',http_globalData.model_onload_loading_new).getComponent(cc.ProgressBar);\r\n            //加载进度回调 \r\n            progressBar.progress = completeCount / totalCount;\r\n            // console.log(progressBar.progress)\r\n            progressBar.completeCount = completeCount;\r\n            progressBar.totalCount = totalCount;          \r\n            var sys_label =  cc.find('/progressBar/sys_label',http_globalData.model_onload_loading_new).getComponent(cc.Label);\r\n            var sys_des =  cc.find('/progressBar/sys_des',http_globalData.model_onload_loading_new).getComponent(cc.Label);\r\n            //加载生物\r\n            if(http_globalAsset.loading_asset[http_globalAsset.http_base_asset_num].type=='图标生物'){\r\n                var asset = assets.content\r\n                // 检查资源是否为图片类型\r\n                if(asset instanceof cc.SpriteFrame){\r\n                    var newname = asset.name;\r\n                    http_globalAsset.http_base_asset_biology[newname] = asset \r\n                    sys_des.string =  describe+'/图标生物/'+newname\r\n                }\r\n            }\r\n            //加载生物\r\n            if(http_globalAsset.loading_asset[http_globalAsset.http_base_asset_num].type=='图标装备'){\r\n                var asset = assets.content\r\n                // 检查资源是否为图片类型\r\n                if(asset instanceof cc.SpriteFrame){\r\n                    var newname = asset.name;\r\n                    http_globalAsset.http_base_asset_zhuangbei[newname] = asset \r\n                    sys_des.string =  describe+'/图标装备/'+newname\r\n                }\r\n            }\r\n            //加载生物\r\n            if(http_globalAsset.loading_asset[http_globalAsset.http_base_asset_num].type=='图标技能'){\r\n                var asset = assets.content\r\n                // 检查资源是否为图片类型\r\n                if(asset instanceof cc.SpriteFrame){\r\n                    var newname = asset.name;\r\n                    http_globalAsset.http_base_asset_skill[newname] = asset \r\n                    sys_des.string =  describe+'/图标技能/'+newname\r\n                }\r\n            }\r\n            //加载生物\r\n            if(http_globalAsset.loading_asset[http_globalAsset.http_base_asset_num].type=='图标技能效果'){\r\n                var asset = assets.content\r\n                // 检查资源是否为图片类型\r\n                if(asset instanceof cc.SpriteFrame){\r\n                    var newname = asset.name;\r\n                    http_globalAsset.http_base_asset_xiaoguo[newname] = asset \r\n                    sys_des.string =  describe+'/图标技能效果/'+newname\r\n                }\r\n            }\r\n            //加载生物\r\n            if(http_globalAsset.loading_asset[http_globalAsset.http_base_asset_num].type=='图标世界'){\r\n                var asset = assets.content\r\n                // 检查资源是否为图片类型\r\n                if(asset instanceof cc.SpriteFrame){\r\n                    var newname = asset.name;\r\n                    http_globalAsset.http_base_asset_word[newname] = asset \r\n                    sys_des.string =  describe+'/图标世界/'+newname\r\n                }\r\n            }\r\n\r\n            sys_label.string = parseInt( progressBar.progress * 100) + '%';\r\n            // if( this.resource.type=='json'){\r\n            //     // console.log(this.resource);  // json\r\n            //     // 从服务器加载mp3来进行播放\r\n            //     // this.audio.clip = ret;\r\n            //     // this.audio.play();\r\n            // }\r\n            // if( this.resource.type=='png'||this.resource.type=='jpg'){\r\n            //      console.log(res);  // json\r\n            //     //res是cc.Texture2D这样对象 \r\n            //     //   this.node.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(res)\r\n            //     // this.headpic.spriteFrame.setTexture(res);\r\n            //     // this.node.spriteFrame.setTexture(res);\r\n            //     // this.sprite.spriteFrame.setContentSize(res.getContentSize());\r\n            //     // this.node.getComponent(cc.Sprite).spriteFrame = res;\r\n            // }\r\n            // if( this.resource.type=='mp3'){\r\n            //     console.log(res);  // mp3\r\n            //     // this.audio.clip = res;\r\n            //     // this.audio.play();\r\n            //     // 从服务器加载mp3来进行播放\r\n            //     this.current = cc.audioEngine.play(res.url, false, 1);\r\n            // }\r\n        },\r\n        _progressCallback(completeCount, totalCount,item) {\r\n            // cc.log(completeCount+'---/---'+totalCount)\r\n            // cc.log(http_globalAsset.loading_asset[http_globalAsset.http_base_asset_num].describe)\r\n\r\n            // http_globalAsset.http_base_asset_num<http_globalAsset.loading_asset.length\r\n\r\n            \r\n            var describe = '['+ parseInt(http_globalAsset.http_base_asset_num+1 )+ '/'+  http_globalAsset.loading_asset.length +']'+ http_globalAsset.loading_asset[http_globalAsset.http_base_asset_num].describe\r\n            this._progressRuning(completeCount,totalCount,item,describe)\r\n        },\r\n        _completeCallback: function(err, texture) {\r\n            //加载完成回调\r\n            if(http_globalAsset.http_base_asset_num<http_globalAsset.loading_asset.length-1){   \r\n                if(http_globalAsset.http_base_asset_num>http_globalAsset.loading_asset.length){ return }\r\n                http_globalAsset.http_base_asset_num = http_globalAsset.http_base_asset_num+1\r\n                this.loading_asset(); //下一个资源\r\n            }else{\r\n                this.loadnextScene() //下一场景 \r\n            }\r\n        },\r\n        //加载资源\r\n        loading_asset( ){\r\n        \r\n            //默认从1开始\r\n            var url = cc.loader.loadResDir(http_globalAsset.loading_asset[http_globalAsset.http_base_asset_num].url,this._progressCallback.bind(this), this._completeCallback.bind(this));\r\n            cc.loader.release(url);\r\n        },\r\n        progress(){\r\n            //判断是否加载完成\r\n            cc.log(http_globalAsset.http_base_asset_num )\r\n            if(http_globalAsset.http_base_asset_num<http_globalAsset.loading_asset.length-1){\r\n                this.loading_asset()\r\n            }else{\r\n                this.loadnextScene()\r\n            }\r\n        },\r\n        loadnextScene(){\r\n            var _this= this;\r\n           //加载场景-- 场景为空， 关闭进度条\r\n            if(http_globalAsset.http_base_redict_sence==''){\r\n                cc.find('Canvas/进度条').parent.removeChild(cc.find('Canvas/进度条'));\r\n            }else{\r\n                //预加载场景并获得加载进度\r\n                cc.director.preloadScene(http_globalAsset.http_base_redict_sence,function (completeCount, totalCount,item) {\r\n                    _this._progressRuning(completeCount,totalCount,item,'加载场景..')\r\n                }, function (){\r\n                    cc.director.loadScene(http_globalAsset.http_base_redict_sence, function () {  \r\n                        // spawnTools();  \r\n                    });\r\n                })\r\n            }\r\n        },\r\n        //请求战斗--写入文本记录\r\n        fightint(){\r\n            var _this =this;\r\n            var map_int = cc.sys.localStorage.getItem('figthing_map_int'); //读取数据--临时地图id\r\n            var userid = cc.sys.localStorage.getItem('figthing_userid'); //读取数据--玩家对战id\r\n            if(map_int==''&&userid==''){\r\n                cc.director.loadScene(_this.urlConfig(\"sence_dating\"));\r\n            }else{\r\n                _this.httpPost('/app/app-apinew/fight', {\r\n                  'map_int': map_int,\r\n                  'userid': userid,\r\n                }, function (data) {\r\n                    //战斗历史路径\r\n                    if(data.code==1){\r\n                        cc.sys.localStorage.setItem('figthing_remote_url', data.data.sid); \r\n                        _this.progress()\r\n                    }else{\r\n                        callback(JSON.parse(data));  // json 转数组\r\n                        // callback(-1);\r\n                    }\r\n                })   \r\n            }\r\n        },\r\n        image_cache(){\r\n            //动态合图\r\n            cc.macro.CLEANUP_IMAGE_CACHE = false;\r\n            cc.dynamicAtlasManager.enabled = true;\r\n            cc.dynamicAtlasManager.maxFrameSize = 2048;\r\n        },\r\n        urlConfig(url){\r\n            http_globalData=[] //销毁内存\r\n            // //配置场景路径\r\n            var sence = {\r\n                //登录\r\n                sence_login:\"login/登录\",\r\n                sence_jiaose:\"login/角色\",\r\n                sence_register:\"login/register\",\r\n                //商城\r\n                sence_jiangli:\"story/jiangli\",\r\n                sence_chongzhi:\"story/chongzhi\",\r\n                sence_zhifu:\"story/zhifu\",\r\n                //大厅\r\n                sence_dating:\"home/大厅\",\r\n                sence_zhutian:\"home/诸天万界\",\r\n                sence_chuangzao:\"home/创造生物\",\r\n                sence_shenmo:\"home/神魔炼狱\",\r\n                sence_mijing:\"home/秘境探索\",\r\n                sence_wangu:\"home/万古仙门\",\r\n                sence_tiandi:\"home/天地熔炉\",\r\n                sence_zhenyaota:\"home/镇妖塔\",\r\n                //场景\r\n                sence_ditu:\"map/诸天地图\",\r\n                sence_zhandou:\"战斗场景\",\r\n            }\r\n            return sence[url];\r\n        },\r\n        //数字转换string，万    //point需要保留小数位\r\n        number_string_wan(num,point){\r\n            var shengMing_string = num.toString()\r\n            if(shengMing_string.length>=5){ //小于1w\r\n               var  decimal = shengMing_string.substring(shengMing_string.length - 4, shengMing_string.length - 4 + point)\r\n               var  shengMing_string = parseFloat(parseInt(num / 10000) + '.' + decimal) + '万';\r\n            }\r\n            return shengMing_string;\r\n        },\r\n        //随机数\r\n        number_rand(num){\r\n            // httpRequest.number_rand(1)\r\n            // Math.floor(Math.random() * http_globalData.chuanzao_xibao.length); \r\n            return Math.round(Math.random()*(num-1)); //传入3,随机0-2\r\n        },\r\n        //随机距离 --位置，偏移量\r\n        number_map_rand(map_position,value){\r\n            // httpRequest.number_rand(1)\r\n            // Math.floor(Math.random() * http_globalData.chuanzao_xibao.length); \r\n            var is_add = httpRequest.number_rand(1)\r\n            if(is_add){\r\n                var postion=   map_position-httpRequest.number_rand(value)\r\n            }else{\r\n                var postion=  map_position+httpRequest.number_rand(value)\r\n            }\r\n            return postion\r\n        },\r\n});\r\nwindow.httpRequest =  new HttpHelper();"]}