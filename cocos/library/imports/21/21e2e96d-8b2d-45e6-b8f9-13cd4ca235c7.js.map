{"version":3,"sources":["assets\\Script\\阵法\\bag_zhengfa头像Tools.js"],"names":["cc","Class","Component","biology_detail_alert","TipBoxPrefab_model","info_list","globalData","biology","_this","loader","loadRes","errorMessage","loadedResource_icon","TipBoxPrefab","instantiate","biology_detail_list","getChildByName","addChild","TOOLS","num_height","info","prop","TipBoxPrefab_icon","image","picture","SpriteFrame","err","texture","getComponent","Sprite","spriteFrame","Label","string","name","is_bag","active","find","scorllheight","parent","line_hight","Math","ceil","cellHeight","height","setContentSize","bind_button_page","on","new_page","parseInt","page","page_size","scorll_page","y","total_page"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n     //技能图片渲染\r\n     biology_detail_alert(TipBoxPrefab_model){\r\n        var info_list = cc.globalData.biology\r\n        //加载背包 和  背包列表\r\n        // let biology = cc.globalData.biology\r\n        // let gooduse_type_name = cc.globalData.gooduse;\r\n        // gooduse_type  1武器\r\n        // var gooduse_type=gooduse_type||1;\r\n        var _this=this;\r\n        cc.loader.loadRes('/model布阵/背包生物', function(errorMessage,loadedResource_icon){\r\n            //开始实例化预制资源\r\n            let   TipBoxPrefab =  cc.instantiate(loadedResource_icon);\r\n            //技能等级\r\n            // TipBoxPrefab.getChildByName('生物数量s').getComponent(cc.Label).string='生物('+info_list.length+'/60)'\r\n            // 由于加载资源的操作是异步的，如果在加载完成前就绑定了事件，有可能会触发事件的自动执行。\r\n            \r\n            //修改背包标题-----弹窗的标题修改\r\n            // TipBoxPrefab.getChildByName('标题s').getComponent(cc.Label).string=gooduse_type_name[gooduse_type].name\r\n\r\n            // 由于加载资源的操作是异步的，如果在加载完成前就绑定了事件，有可能会触发事件的自动执行。\r\n            _this.biology_detail_list(TipBoxPrefab,info_list) \r\n               // 此处进行事件绑定\r\n            // _this.bind_button(TipBoxPrefab_model,TipBoxPrefab)\r\n            //写入icon\r\n            TipBoxPrefab_model.getChildByName('生物头像').addChild(TipBoxPrefab);\r\n        })\r\n    },\r\n    //list渲染\r\n    biology_detail_list(TipBoxPrefab,info_list){\r\n        //获取点击物品的类型\r\n        var _this =this;\r\n        var TOOLS =[];\r\n        var TOOLS = info_list;\r\n        //加载预制资源 PrefabUrl为 预制资源在 资源中的路径\r\n        cc.loader.loadRes('/model布阵/图标生物', function(errorMessage,loadedResource_icon){\r\n            var num_height=0;\r\n            for ( var prop in info_list) {\r\n                let info = TOOLS[prop];\r\n                //1是武器\r\n                // if(info.gooduse==gooduse_type){\r\n                    var num_height =num_height+1\r\n                    // //开始实例化预制资源\r\n                    let   TipBoxPrefab_icon =  cc.instantiate(loadedResource_icon);\r\n                    // //载入技能图片\r\n                    let image = info.picture;\r\n                    cc.loader.loadRes(image, cc.SpriteFrame, function (err, texture) { \r\n                        if (err) {\r\n                            // cc.error(err.message || err);\r\n                            return;\r\n                        }\r\n                        TipBoxPrefab_icon.getChildByName('P技能').getComponent(cc.Sprite).spriteFrame = texture; \r\n                    });\r\n                    // //技能等级\r\n                    TipBoxPrefab_icon.getChildByName('技能s').getComponent(cc.Label).string=info.name        \r\n                    // // 由于加载资源的操作是异步的，如果在加载完成前就绑定了事件，有可能会触发事件的自动执行。\r\n                    //重新挂载\r\n                    // _this.bind_button_detail(TipBoxPrefab_model,TipBoxPrefab_icon,info,gooduse_type,button_name,goodsid)\r\n                    // //写入icon\r\n                    // TipBoxPrefab.getChildByName('技能列表').addChild(TipBoxPrefab_icon);\r\n                    //隐藏已经使用的装备\r\n                    if(info.is_bag==1){\r\n                        TipBoxPrefab_icon.active=false\r\n                    }\r\n                    //写入icon\r\n                    cc.find(\"列表/content/gridLayout\",TipBoxPrefab).addChild(TipBoxPrefab_icon);\r\n                }\r\n            // }\r\n    \r\n            // 定义content滚动条高度\r\n            let scorllheight =  cc.find(\"列表/content/gridLayout\",TipBoxPrefab).parent;\r\n            //滚动高度= 预制体100*个数+ 上下 预留10 的位置  \r\n            //列个数--进1取整\r\n            let line_hight =Math.ceil(num_height/3)\r\n            let cellHeight =  cc.find(\"列表/content/gridLayout\",TipBoxPrefab).height * 0.25+10;\r\n            let  height =  cellHeight*(line_hight )\r\n            if(height<=420){\r\n                let height = 420\r\n            }\r\n            //设置滚动条高度\r\n            scorllheight.setContentSize(500,height)\r\n\r\n            TipBoxPrefab.getChildByName('总数s').getComponent(cc.Label).string =Math.ceil(num_height/12)\r\n            // 此处进行事件绑定\r\n            _this.bind_button_page(TipBoxPrefab)\r\n        })\r\n\r\n   \r\n        return TipBoxPrefab\r\n    },\r\n    //分页\r\n    bind_button_page(TipBoxPrefab_icon){\r\n        TipBoxPrefab_icon.getChildByName('上一页').on('click', function () {\r\n           var new_page = TipBoxPrefab_icon.getChildByName('页码s').getComponent(cc.Label).string\r\n           var new_page = parseInt(new_page)\r\n            if(new_page>1){\r\n                new_page= parseInt(new_page-1)\r\n                 TipBoxPrefab_icon.getChildByName('页码s').getComponent(cc.Label).string =new_page\r\n            }\r\n            //12个一页/3   = 每页的列数4列\r\n           var page = new_page\r\n           var page_size =12/3\r\n           let cellHeight =  cc.find(\"列表/content/gridLayout\",TipBoxPrefab_icon).height * 0.25+10;\r\n           var scorll_page = (cellHeight*page_size*(page-1))+210;\r\n   \r\n           // 获取ScrollBar组件\r\n        //    var scrollView = TipBoxPrefab_icon.getComponent(cc.ScrollView)\r\n           cc.find(\"列表/content/gridLayout\",TipBoxPrefab_icon).parent.y = scorll_page; // 水平居中\r\n        }, this);\r\n        TipBoxPrefab_icon.getChildByName('下一页').on('click', function () {\r\n            var total_page = TipBoxPrefab_icon.getChildByName('总数s').getComponent(cc.Label).string\r\n            var total_page = parseInt(total_page)\r\n            var new_page = TipBoxPrefab_icon.getChildByName('页码s').getComponent(cc.Label).string\r\n            var new_page = parseInt(new_page)\r\n            if(new_page<total_page){\r\n                new_page= parseInt(new_page+1)\r\n                TipBoxPrefab_icon.getChildByName('页码s').getComponent(cc.Label).string =new_page\r\n            }\r\n           //12个一页/3   = 每页的列数4列\r\n           var page = new_page\r\n           var page_size =12/3\r\n           let cellHeight =  cc.find(\"列表/content/gridLayout\",TipBoxPrefab_icon).height * 0.25+10;\r\n           var scorll_page = (cellHeight*page_size*(page-1))+210;\r\n         \r\n           // 获取ScrollBar组件\r\n        //    var scrollView = TipBoxPrefab_icon.getComponent(cc.ScrollView)\r\n           cc.find(\"列表/content/gridLayout\",TipBoxPrefab_icon).parent.y = scorll_page; // 水平居中\r\n\r\n        }, this);\r\n\r\n    },\r\n    //绑定点击事件--关闭遮罩\r\n    // bind_button(TipBoxPrefab_model,TipBoxPrefab_icon){\r\n    //     TipBoxPrefab_icon.getChildByName('遮罩').on('click', function () {\r\n    //         // 事件处理逻辑\r\n    //         //移除挂载\r\n    //         TipBoxPrefab_model.getChildByName('左边弹窗').removeAllChildren();\r\n\r\n    //     }, this);\r\n\r\n    // },\r\n    // update (dt) {},\r\n});\r\n"]}