{"version":3,"sources":["assets\\Script\\阵法\\bag_zhenfa头像Tools.js"],"names":["HttpHelper","require","httpRequest","cc","Class","Component","biology_detail_list","TipBoxPrefab_model","TipBoxPrefab","_this","loader","loadRes","errorMessage","loadedResource_icon","num_height","info","http_globalData","biology","prop","TipBoxPrefab_icon","instantiate","image","picture","SpriteFrame","err","texture","getChildByName","getComponent","Sprite","spriteFrame","biology_id","parent","children","indexOf","bind_button_detail","Label","string","name","is_chuzhan","active","find","addChild","scorllheight","line_hight","Math","ceil","cellHeight","height","setContentSize","bind_button_page","biology_buzhen_list","on","new_page","parseInt","page","page_size","scorll_page","y","total_page","zhenfa_id","is_click","new_prefab","isDragging","startPos","position","Node","EventType","TOUCH_START","event","zhenfa","TOUCH_MOVE","location","getLocation","convertToNodeSpaceAR","forEach","targetNode","rect","getBoundingBox","point","contains","color","TOUCH_END","biologyClickRemove","TOUCH_CANCEL","movingInt","biology_detail_tips","zhenfa_index","TipBoxPrefab_icon_remove","TipBoxPrefab_icon_new","move_biology_id","isInArray","includes","biology_buzhen_detail","log"],"mappings":"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","sourceRoot":"/","sourcesContent":["var HttpHelper = require(\"../http\"); \r\nvar httpRequest = new HttpHelper();\r\ncc.Class({\r\n    extends: cc.Component,\r\n    //list渲染\r\n    biology_detail_list(TipBoxPrefab_model,TipBoxPrefab){\r\n\r\n        //获取点击物品的类型\r\n        var _this =this;\r\n        //加载预制资源 PrefabUrl为 预制资源在 资源中的路径\r\n        cc.loader.loadRes('/model布阵/图标生物', function(errorMessage,loadedResource_icon){\r\n            var num_height=0;\r\n            for ( var prop in http_globalData.biology) {\r\n                let info = http_globalData.biology[prop];\r\n                //1是武器\r\n                // if(info.gooduse==gooduse_type){\r\n                    var num_height =num_height+1\r\n                    // //开始实例化预制资源\r\n                    let   TipBoxPrefab_icon =  cc.instantiate(loadedResource_icon);\r\n                    // //载入技能图片\r\n                    let image = info.picture;\r\n                    cc.loader.loadRes(image, cc.SpriteFrame, function (err, texture) { \r\n                        if (err) {\r\n                            // cc.error(err.message || err);\r\n                            return;\r\n                        }\r\n                        TipBoxPrefab_icon.getChildByName('P技能').getComponent(cc.Sprite).spriteFrame = texture; \r\n                        // TipBoxPrefab_icon.getChildByName('P移动').getComponent(cc.Sprite).spriteFrame = texture; \r\n                        //拖拽\r\n                        var biology_id = TipBoxPrefab_icon.parent.children.indexOf(TipBoxPrefab_icon); //生物id biology_id\r\n                        _this.bind_button_detail(TipBoxPrefab_model,TipBoxPrefab,TipBoxPrefab_icon,biology_id,null)\r\n                    });\r\n                    // //技能等级\r\n                    TipBoxPrefab_icon.getChildByName('技能s').getComponent(cc.Label).string=info.name        \r\n                    // // 由于加载资源的操作是异步的，如果在加载完成前就绑定了事件，有可能会触发事件的自动执行。\r\n                    //判断是否出战\r\n                    if(info.is_chuzhan){\r\n                        TipBoxPrefab_icon.getChildByName('P出战').active=true\r\n                    }else{\r\n                        TipBoxPrefab_icon.getChildByName('P出战').active=false\r\n                    }\r\n                    //写入icon\r\n                    cc.find(\"content/列表/content/gridLayout\",TipBoxPrefab).addChild(TipBoxPrefab_icon);\r\n                }\r\n            // }\r\n    \r\n            // 定义content滚动条高度\r\n            let scorllheight =  cc.find(\"content/列表/content/gridLayout\",TipBoxPrefab).parent;\r\n            //滚动高度= 预制体100*个数+ 上下 预留10 的位置  \r\n            //列个数--进1取整\r\n            let line_hight =Math.ceil(num_height/3)\r\n            let cellHeight =  cc.find(\"content/列表/content/gridLayout\",TipBoxPrefab).height * 0.25+10;\r\n            var height =  cellHeight*(line_hight )\r\n            if(height<=420){\r\n                var height = 420\r\n            }\r\n            //设置滚动条高度\r\n            scorllheight.setContentSize(500,height)\r\n\r\n            TipBoxPrefab.getChildByName('总数s').getComponent(cc.Label).string =Math.ceil(num_height/12)\r\n            // 此处进行事件绑定\r\n            _this.bind_button_page(TipBoxPrefab)\r\n            //写入布阵\r\n            TipBoxPrefab_model.getComponent('bag_zhenfa布阵Tools').biology_buzhen_list(TipBoxPrefab_model,TipBoxPrefab)\r\n        })\r\n\r\n   \r\n        return TipBoxPrefab\r\n    },\r\n    //分页\r\n    bind_button_page(TipBoxPrefab_icon){\r\n        TipBoxPrefab_icon.getChildByName('上一页').on('click', function () {\r\n           var new_page = TipBoxPrefab_icon.getChildByName('页码s').getComponent(cc.Label).string\r\n           var new_page = parseInt(new_page)\r\n            if(new_page>1){\r\n                new_page= parseInt(new_page-1)\r\n                 TipBoxPrefab_icon.getChildByName('页码s').getComponent(cc.Label).string =new_page\r\n            }\r\n            //12个一页/3   = 每页的列数4列\r\n           var page = new_page\r\n           var page_size =12/3\r\n           var cellHeight =  cc.find(\"content/列表/content/gridLayout\",TipBoxPrefab_icon).height * 0.25+10;\r\n           var scorll_page = (cellHeight*page_size*(page-1))+210;\r\n   \r\n           // 获取ScrollBar组件\r\n        //    var scrollView = TipBoxPrefab_icon.getComponent(cc.ScrollView)\r\n           cc.find(\"content/列表/content/gridLayout\",TipBoxPrefab_icon).parent.y = scorll_page; // 水平居中\r\n        }, this);\r\n        TipBoxPrefab_icon.getChildByName('下一页').on('click', function () {\r\n            var total_page = TipBoxPrefab_icon.getChildByName('总数s').getComponent(cc.Label).string\r\n            var total_page = parseInt(total_page)\r\n            var new_page = TipBoxPrefab_icon.getChildByName('页码s').getComponent(cc.Label).string\r\n            var new_page = parseInt(new_page)\r\n            if(new_page<total_page){\r\n                new_page= parseInt(new_page+1)\r\n                TipBoxPrefab_icon.getChildByName('页码s').getComponent(cc.Label).string =new_page\r\n            }\r\n           //12个一页/3   = 每页的列数4列\r\n           var page = new_page\r\n           var page_size =12/3\r\n           var cellHeight =  cc.find(\"content/列表/content/gridLayout\",TipBoxPrefab_icon).height * 0.25+10;\r\n           var scorll_page = (cellHeight*page_size*(page-1))+210;\r\n         \r\n           // 获取ScrollBar组件\r\n        //    var scrollView = TipBoxPrefab_icon.getComponent(cc.ScrollView)\r\n           cc.find(\"content/列表/content/gridLayout\",TipBoxPrefab_icon).parent.y = scorll_page; // 水平居中\r\n\r\n        }, this);\r\n\r\n    },\r\n    //绑定点击事件--关闭遮罩\r\n    // bind_button(TipBoxPrefab_model,TipBoxPrefab_icon){\r\n    //     TipBoxPrefab_icon.getChildByName('遮罩').on('click', function () {\r\n    //         // 事件处理逻辑\r\n    //         //移除挂载\r\n    //         TipBoxPrefab_model.getChildByName('左边弹窗').removeAllChildren();\r\n\r\n    //     }, this);\r\n    // },\r\n    //绑定点击事件--alert详情\r\n    bind_button_detail(TipBoxPrefab_model,TipBoxPrefab,TipBoxPrefab_icon,biology_id,zhenfa_id){\r\n\r\n        var is_click =true;\r\n        var _this =this;\r\n        var new_prefab =  TipBoxPrefab.getChildByName('生物移动')\r\n        var isDragging = false;\r\n        var startPos =  TipBoxPrefab_icon.position //开始位置为点击位置\r\n        // 开始拖拽\r\n        TipBoxPrefab_icon.on(cc.Node.EventType.TOUCH_START, (event) => {\r\n            if(zhenfa_id!=null){\r\n                biology_id = http_globalData.zhenfa[zhenfa_id]  //点击阵法时, 生物id取阵法 里面的id\r\n            }\r\n            // cc.log(http_globalData.zhenfa)\r\n             if(biology_id!=null){\r\n                TipBoxPrefab.getChildByName('生物移动').position=startPos;\r\n                var texture =  cc.find(\"content/列表/content/gridLayout\",TipBoxPrefab).children[biology_id].getChildByName('P技能').getComponent(cc.Sprite).spriteFrame  \r\n                TipBoxPrefab.getChildByName('生物移动').getComponent(cc.Sprite).spriteFrame =  texture   \r\n             }\r\n            // new_prefab.position = startPos;\r\n            // 标记为正在拖拽\r\n            isDragging = true;\r\n        }, this);\r\n         // 拖拽中\r\n        TipBoxPrefab_icon.on(cc.Node.EventType.TOUCH_MOVE,function (event) {\r\n            if(zhenfa_id!=null){\r\n                biology_id = http_globalData.zhenfa[zhenfa_id]  //点击阵法时, 生物id取阵法 里面的id\r\n            }\r\n            if (isDragging&&biology_id) {\r\n                is_click = false;\r\n                // var delta = event.touch.getDelta();\r\n                // new_prefab.x += delta.x\r\n                // new_prefab.y += delta.y\r\n                var location = event.getLocation();\r\n                new_prefab.position = new_prefab.parent.convertToNodeSpaceAR(location); // 确定位置\r\n                TipBoxPrefab.getChildByName('生物移动').active=true;\r\n                TipBoxPrefab.getChildByName('阵法详情').children.forEach((targetNode) => {\r\n                    var rect = targetNode.getBoundingBox();\r\n                    var location = event.getLocation();\r\n                    var point = targetNode.parent.convertToNodeSpaceAR(location);\r\n                    var zhenfa_id =  targetNode.parent.children.indexOf(targetNode); //阵法id\r\n                    if (rect.contains(point)) {\r\n                        TipBoxPrefab.getChildByName('阵法详情').children[zhenfa_id].getChildByName('生物').color = new cc.color('#3568D5');\r\n                    }else {\r\n                        TipBoxPrefab.getChildByName('阵法详情').children[zhenfa_id].getChildByName('生物').color = new cc.color('#FFFFFF');\r\n                    }\r\n                });\r\n            }\r\n        }, this)\r\n        // 松开\r\n        TipBoxPrefab_icon.on(cc.Node.EventType.TOUCH_END, (event) => {\r\n            // 松开不做任何操作\r\n            TipBoxPrefab.getChildByName('生物移动').active=false\r\n            isDragging = false;\r\n            //单击移除事件\r\n            if(is_click){\r\n                _this.biologyClickRemove(TipBoxPrefab_model,TipBoxPrefab,TipBoxPrefab_icon)\r\n                is_click = true;\r\n            }\r\n            var zhenfa_id = TipBoxPrefab_icon.parent.children.indexOf(TipBoxPrefab_icon) //阵法的序号key\r\n            TipBoxPrefab.getChildByName('阵法详情').children[zhenfa_id].getChildByName('生物').color = new cc.color('#FFFFFF');\r\n        }, this);\r\n        // 取消拖拽（如触摸被系统取消时）\r\n        TipBoxPrefab_icon.on(cc.Node.EventType.TOUCH_CANCEL, (event) => {\r\n            // 取消\r\n            TipBoxPrefab.getChildByName('生物移动').active=false\r\n            isDragging = false;\r\n            if(zhenfa_id!=null){\r\n                biology_id = http_globalData.zhenfa[zhenfa_id]  //点击阵法时, 生物id取阵法 里面的id\r\n            }\r\n            if(biology_id!=null){\r\n                _this.movingInt(event,TipBoxPrefab_model,TipBoxPrefab,biology_id)\r\n                is_click = true;\r\n            }\r\n            var zhenfa_id = TipBoxPrefab_icon.parent.children.indexOf(TipBoxPrefab_icon) //阵法的序号key\r\n            TipBoxPrefab.getChildByName('阵法详情').children[zhenfa_id].getChildByName('生物').color = new cc.color('#FFFFFF');\r\n        }, this);\r\n\r\n    },\r\n    // 清理事件监听\r\n \r\n    biologyClickRemove(TipBoxPrefab_model,TipBoxPrefab,TipBoxPrefab_icon) {\r\n        TipBoxPrefab_icon.getChildByName('生物').active=false\r\n        TipBoxPrefab_icon.getChildByName('名称s').getComponent(cc.Label).string=''\r\n        var zhenfa_id = TipBoxPrefab_icon.parent.children.indexOf(TipBoxPrefab_icon) //阵法的序号key\r\n        var biology_id = http_globalData.zhenfa[zhenfa_id] //生物id biology_id\r\n        if(biology_id!=null){\r\n            cc.find(\"content/列表/content/gridLayout\",TipBoxPrefab).children[biology_id].getChildByName('P出战').active=false  \r\n            //移出阵法\r\n            http_globalData.zhenfa[zhenfa_id] =null\r\n            http_globalData.biology[biology_id].is_chuzhan=0\r\n            TipBoxPrefab_model.getComponent('bag_zhenfaTools').biology_detail_tips(TipBoxPrefab_model,'操作成功!')\r\n        }\r\n    },\r\n\r\n    //移动定位\r\n    movingInt(event,TipBoxPrefab_model,TipBoxPrefab,biology_id){\r\n        //拖拽生物原始位置\r\n        TipBoxPrefab.getChildByName('生物移动').position = cc.find(\"content/列表/content/gridLayout\",TipBoxPrefab).children[biology_id].position\r\n        var _this =this;\r\n\r\n        //已存在的阵法位置--需要移除--原始位置\r\n        var zhenfa_index = http_globalData.zhenfa.indexOf(biology_id); //--原始位置\r\n        var TipBoxPrefab_icon_remove = TipBoxPrefab.getChildByName('阵法详情').children[zhenfa_index]\r\n\r\n        TipBoxPrefab.getChildByName('阵法详情').children.forEach((targetNode) => {\r\n            var rect = targetNode.getBoundingBox();\r\n            var location = event.getLocation();\r\n            var point = targetNode.parent.convertToNodeSpaceAR(location);\r\n            //进入范围替换\r\n            if (rect.contains(point)) {\r\n                // 如果在边界矩形内，则被拖拽到了目标节点中\r\n                var zhenfa_id =  targetNode.parent.children.indexOf(targetNode); //阵法id\r\n                var TipBoxPrefab_icon_new =   TipBoxPrefab.getChildByName('阵法详情').children[zhenfa_id]\r\n                //移动到的位置\r\n                var move_biology_id=http_globalData.zhenfa[zhenfa_id];\r\n                // 使用includes方法来判断值是否在数组内\r\n                var isInArray = http_globalData.zhenfa.includes(biology_id);\r\n                //是否在阵法中\r\n                if (isInArray) {\r\n                    // cc.log(isInArray + ' is in the array.');\r\n                    //需要移除已存在的节点\r\n                    _this.biologyClickRemove(TipBoxPrefab_model,TipBoxPrefab,TipBoxPrefab_icon_remove)\r\n                    //替换操作\r\n                    if(move_biology_id!=null&&move_biology_id!=biology_id){\r\n                        //替换原始位置\r\n                        TipBoxPrefab_model.getComponent('bag_zhenfa布阵Tools').biology_buzhen_detail(TipBoxPrefab_model,TipBoxPrefab,TipBoxPrefab_icon_remove,move_biology_id)\r\n                        http_globalData.zhenfa[zhenfa_index] = move_biology_id\r\n                        http_globalData.biology[move_biology_id].is_chuzhan=1;\r\n                        cc.find(\"content/列表/content/gridLayout\",TipBoxPrefab).children[move_biology_id].getChildByName('P出战').active=true\r\n                        // TipBoxPrefab_icon_remove.getChildByName('生物').color = new cc.color('#FFFFFF')\r\n                        TipBoxPrefab.getChildByName('阵法详情').children[zhenfa_index].getChildByName('生物').color = new cc.color('#FFFFFF');\r\n                    }\r\n                }\r\n                // cc.log(http_globalData.zhenfa)\r\n                //添加到阵法\r\n                http_globalData.zhenfa[zhenfa_id]=biology_id\r\n                http_globalData.biology[biology_id].is_chuzhan=1;\r\n                // cc.log(zhenfa_index)\r\n                // cc.log(move_biology_id)\r\n                // cc.log(zhenfa_id)\r\n                // cc.log(biology_id)\r\n                // cc.log(http_globalData.zhenfa)\r\n                //放入布阵  \r\n                cc.find(\"content/列表/content/gridLayout\",TipBoxPrefab).children[biology_id].getChildByName('P出战').active=true\r\n                TipBoxPrefab_model.getComponent('bag_zhenfa布阵Tools').biology_buzhen_detail(TipBoxPrefab_model,TipBoxPrefab,TipBoxPrefab_icon_new,biology_id) \r\n                //操作提示\r\n                TipBoxPrefab_model.getComponent('bag_zhenfaTools').biology_detail_tips(TipBoxPrefab_model,'操作成功!')\r\n                //返回未选择中状态\r\n                // TipBoxPrefab_icon_new.getChildByName('生物').color = new cc.color('#FFFFFF')\r\n                TipBoxPrefab.getChildByName('阵法详情').children[zhenfa_id].getChildByName('生物').color = new cc.color('#FFFFFF');\r\n                cc.log(\"拖拽到了目标节点\"+zhenfa_id);\r\n            }\r\n        });\r\n    },\r\n\r\n});\r\n\r\n\r\n"]}