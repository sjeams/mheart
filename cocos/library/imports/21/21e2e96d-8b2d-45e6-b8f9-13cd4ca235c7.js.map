{"version":3,"sources":["assets\\Script\\阵法\\bag_zhenfa头像Tools.js"],"names":["require","cc","Class","Component","biology_detail_list","TipBoxPrefab_model","TipBoxPrefab","_this","loader","loadRes","errorMessage","loadedResource_icon","num_height","info","http_globalData","biology","prop","TipBoxPrefab_icon","instantiate","picture","SpriteFrame","err","texture","error","getChildByName","getComponent","Sprite","spriteFrame","bind_button_detail","Label","string","name","is_chuzhan","active","find","addChild","scorllheight","parent","line_hight","Math","ceil","cellHeight","height","setContentSize","bind_button_page","biology_buzhen_list","on","new_page","parseInt","page","page_size","scorll_page","y","total_page","is_zhenfa_state","new_prefab","isDragging","startPos","position","Node","EventType","TOUCH_START","event","is_zhenfa","is_zhenfa_chaochu","zhenfa_id","children","indexOf","biology_id","zhenfa","includes","TOUCH_MOVE","location","getLocation","convertToNodeSpaceAR","forEach","targetNode","rect","getBoundingBox","point","contains","move_zhenfa_id","color","TOUCH_END","biologyClickRemove","biology_detail_tips","log","TOUCH_CANCEL","movingInt","bindClickEventIcon","removeAllChildren","biology_detail_alert","move_biology_id","TipBoxPrefab_icon_move","TipBoxPrefab_icon_new","move_biologyClickRemove","biologyClickAdd","zhenfa_info","num","biology_buzhen_detail"],"mappings":"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","sourceRoot":"/","sourcesContent":["require(\"../common\"); \r\ncc.Class({\r\n    extends: cc.Component,\r\n    //list渲染\r\n    biology_detail_list(TipBoxPrefab_model,TipBoxPrefab){\r\n\r\n        //获取点击物品的类型\r\n        var _this =this;\r\n        //加载预制资源 PrefabUrl为 预制资源在 资源中的路径\r\n        cc.loader.loadRes('/model布阵/图标生物', function(errorMessage,loadedResource_icon){\r\n            var num_height=0;\r\n            for ( var prop in http_globalData.biology) {\r\n                var info = http_globalData.biology[prop];\r\n                //1是武器\r\n                // if(info.gooduse==gooduse_type){\r\n                    var num_height =num_height+1\r\n                    // //开始实例化预制资源\r\n                    let   TipBoxPrefab_icon =  cc.instantiate(loadedResource_icon);\r\n                    // //载入技能图片\r\n                    cc.loader.loadRes(http_globalData.biology[prop].picture, cc.SpriteFrame, function (err, texture) { \r\n                        if(err){\r\n                            cc.error(err);\r\n                            // return;\r\n                      }else{\r\n                        TipBoxPrefab_icon.getChildByName('P技能').getComponent(cc.Sprite).spriteFrame = texture; \r\n                      }\r\n                        // TipBoxPrefab_icon.getChildByName('P移动').getComponent(cc.Sprite).spriteFrame = texture; \r\n                        // var   biology_id = TipBoxPrefab_icon.parent.children.indexOf(TipBoxPrefab_icon); //生物id biology_id\r\n                        //拖拽\r\n                        _this.bind_button_detail(TipBoxPrefab_model,TipBoxPrefab,TipBoxPrefab_icon,false)\r\n                    });\r\n                    // //技能等级\r\n                    TipBoxPrefab_icon.getChildByName('技能s').getComponent(cc.Label).string=info.name        \r\n                    // // 由于加载资源的操作是异步的，如果在加载完成前就绑定了事件，有可能会触发事件的自动执行。\r\n                    //判断是否出战\r\n                    if(info.is_chuzhan){\r\n                        TipBoxPrefab_icon.getChildByName('P出战').active=true\r\n                    }else{\r\n                        TipBoxPrefab_icon.getChildByName('P出战').active=false\r\n                    }\r\n                    //写入icon\r\n                    cc.find(\"content/列表/content/gridLayout\",TipBoxPrefab).addChild(TipBoxPrefab_icon);\r\n                }\r\n            // }\r\n    \r\n            // 定义content滚动条高度\r\n            let scorllheight =  cc.find(\"content/列表/content/gridLayout\",TipBoxPrefab).parent;\r\n            //滚动高度= 预制体100*个数+ 上下 预留10 的位置  \r\n            //列个数--进1取整\r\n            let line_hight =Math.ceil(num_height/3)\r\n            let cellHeight =  cc.find(\"content/列表/content/gridLayout\",TipBoxPrefab).height * 0.25+10;\r\n            var height =  cellHeight*(line_hight )\r\n            if(height<=420){\r\n                var height = 420\r\n            }\r\n            //设置滚动条高度\r\n            scorllheight.setContentSize(500,height)\r\n\r\n            TipBoxPrefab.getChildByName('总数s').getComponent(cc.Label).string =Math.ceil(num_height/12)\r\n            // 此处进行事件绑定\r\n            _this.bind_button_page(TipBoxPrefab)\r\n            //写入布阵\r\n            TipBoxPrefab_model.getComponent('bag_zhenfa布阵Tools').biology_buzhen_list(TipBoxPrefab_model,TipBoxPrefab)\r\n        })\r\n\r\n   \r\n        return TipBoxPrefab\r\n    },\r\n    //分页\r\n    bind_button_page(TipBoxPrefab_icon){\r\n        TipBoxPrefab_icon.getChildByName('上一页').on('click', function () {\r\n           var new_page = TipBoxPrefab_icon.getChildByName('页码s').getComponent(cc.Label).string\r\n           var new_page = parseInt(new_page)\r\n            if(new_page>1){\r\n                new_page= parseInt(new_page-1)\r\n                 TipBoxPrefab_icon.getChildByName('页码s').getComponent(cc.Label).string =new_page\r\n            }\r\n            //12个一页/3   = 每页的列数4列\r\n           var page = new_page\r\n           var page_size =12/3\r\n           var cellHeight =  cc.find(\"content/列表/content/gridLayout\",TipBoxPrefab_icon).height * 0.25+10;\r\n           var scorll_page = (cellHeight*page_size*(page-1))+210;\r\n   \r\n           // 获取ScrollBar组件\r\n        //    var scrollView = TipBoxPrefab_icon.getComponent(cc.ScrollView)\r\n           cc.find(\"content/列表/content/gridLayout\",TipBoxPrefab_icon).parent.y = scorll_page; // 水平居中\r\n        }, this);\r\n        TipBoxPrefab_icon.getChildByName('下一页').on('click', function () {\r\n            var total_page = TipBoxPrefab_icon.getChildByName('总数s').getComponent(cc.Label).string\r\n            var total_page = parseInt(total_page)\r\n            var new_page = TipBoxPrefab_icon.getChildByName('页码s').getComponent(cc.Label).string\r\n            var new_page = parseInt(new_page)\r\n            if(new_page<total_page){\r\n                new_page= parseInt(new_page+1)\r\n                TipBoxPrefab_icon.getChildByName('页码s').getComponent(cc.Label).string =new_page\r\n            }\r\n           //12个一页/3   = 每页的列数4列\r\n           var page = new_page\r\n           var page_size =12/3\r\n           var cellHeight =  cc.find(\"content/列表/content/gridLayout\",TipBoxPrefab_icon).height * 0.25+10;\r\n           var scorll_page = (cellHeight*page_size*(page-1))+210;\r\n         \r\n           // 获取ScrollBar组件\r\n        //    var scrollView = TipBoxPrefab_icon.getComponent(cc.ScrollView)\r\n           cc.find(\"content/列表/content/gridLayout\",TipBoxPrefab_icon).parent.y = scorll_page; // 水平居中\r\n\r\n        }, this);\r\n\r\n    },\r\n    //绑定点击事件--关闭遮罩\r\n    // bind_button(TipBoxPrefab_model,TipBoxPrefab_icon){\r\n    //     TipBoxPrefab_icon.getChildByName('遮罩').on('click', function () {\r\n    //         // 事件处理逻辑\r\n    //         //移除挂载\r\n    //         TipBoxPrefab_model.getChildByName('左边弹窗').removeAllChildren();\r\n\r\n    //     }, this);\r\n    // },\r\n    //绑定点击事件--alert详情\r\n    bind_button_detail(TipBoxPrefab_model,TipBoxPrefab,TipBoxPrefab_icon,is_zhenfa_state){\r\n        //声明\r\n        // var is_click =true;\r\n        var _this =this;\r\n        var new_prefab =  TipBoxPrefab.getChildByName('生物移动')\r\n        var isDragging = false;\r\n        var startPos =  TipBoxPrefab_icon.position //开始位置为点击位置\r\n        \r\n        // 开始拖拽\r\n        TipBoxPrefab_icon.on(cc.Node.EventType.TOUCH_START, (event) => {\r\n            http_globalData.is_zhenfa = is_zhenfa_state  //重新赋值点击事件，不然会冲突\r\n            if(http_globalData.is_zhenfa){\r\n                http_globalData.is_zhenfa_chaochu =true\r\n                //点击阵法id\r\n                http_globalData.zhenfa_id = TipBoxPrefab_icon.parent.children.indexOf(TipBoxPrefab_icon) //阵法的序号key\r\n                http_globalData.biology_id = http_globalData.zhenfa[http_globalData.zhenfa_id]  //点击阵法时, 生物id取阵法 里面的id\r\n            }else{\r\n                http_globalData.is_zhenfa_chaochu =false\r\n                //点击头像id\r\n                // http_globalData.zhenfa_id = null;\r\n                // 检查阵法是否存在生物id\r\n                http_globalData.biology_id = TipBoxPrefab_icon.parent.children.indexOf(TipBoxPrefab_icon) //阵法的序号key\r\n                if (http_globalData.zhenfa.includes(http_globalData.biology_id)) {\r\n                    http_globalData.zhenfa_id = http_globalData.zhenfa.indexOf(http_globalData.biology_id); //--原始位置\r\n                }else{\r\n                    http_globalData.zhenfa_id = null;\r\n                }\r\n            }\r\n            //生物不存在，不能拖拽\r\n            if(http_globalData.biology[http_globalData.biology_id]){\r\n                TipBoxPrefab.getChildByName('生物移动').position=startPos;\r\n                // var texture =  cc.find(\"content/列表/content/gridLayout\",TipBoxPrefab).children[biology_id].getChildByName('P技能').getComponent(cc.Sprite).spriteFrame  \r\n                //加载头像\r\n                cc.loader.loadRes(http_globalData.biology[http_globalData.biology_id].picture, cc.SpriteFrame, function (err, texture) { \r\n                    TipBoxPrefab.getChildByName('生物移动').getComponent(cc.Sprite).spriteFrame =  texture   \r\n                });\r\n                // 标记为正在拖拽\r\n                isDragging = true;\r\n            }else{\r\n                isDragging = false;\r\n            }\r\n        }, this);\r\n         // 拖拽中\r\n        TipBoxPrefab_icon.on(cc.Node.EventType.TOUCH_MOVE,function (event) {\r\n            if(isDragging) {\r\n                http_globalData.is_zhenfa_chaochu =false  //拖拽超出范围，这里标记为头像拖拽\r\n                // var delta = event.touch.getDelta();\r\n                // new_prefab.x += delta.x\r\n                // new_prefab.y += delta.y\r\n                var location = event.getLocation();\r\n                new_prefab.position = new_prefab.parent.convertToNodeSpaceAR(location); // 确定位置\r\n                TipBoxPrefab.getChildByName('生物移动').active=true;\r\n                TipBoxPrefab.getChildByName('阵法详情').children.forEach((targetNode) => {\r\n                    var rect = targetNode.getBoundingBox();\r\n                    var location = event.getLocation();\r\n                    var point = targetNode.parent.convertToNodeSpaceAR(location);\r\n                    if (rect.contains(point)) {\r\n                        http_globalData.move_zhenfa_id =  targetNode.parent.children.indexOf(targetNode); //移动阵法id\r\n                        // http_globalData.move_biology_id = http_globalData.zhenfa[http_globalData.move_zhenfa_id]  //点击阵法时, 生物id取阵法 里面的id\r\n                        TipBoxPrefab.getChildByName('阵法详情').children[http_globalData.move_zhenfa_id].getChildByName('生物').color = new cc.color('#3568D5');\r\n                    }else {\r\n                        TipBoxPrefab.getChildByName('阵法详情').children[http_globalData.move_zhenfa_id].getChildByName('生物').color = new cc.color('#FFFFFF');\r\n                    }\r\n                });\r\n            }\r\n        }, this)\r\n        // 松开\r\n        TipBoxPrefab_icon.on(cc.Node.EventType.TOUCH_END, (event) => {\r\n            //拖拽头像， 阵法id 为null \r\n            if(isDragging){\r\n                //单击移除事件--只有点击阵法才会触发移除事件\r\n                if(http_globalData.is_zhenfa){\r\n                    //超出范围\r\n                    if(http_globalData.is_zhenfa_chaochu){\r\n                        _this.biologyClickRemove(TipBoxPrefab_model,TipBoxPrefab)\r\n                        TipBoxPrefab_model.getComponent('bag_zhenfaTools').biology_detail_tips(TipBoxPrefab_model,'操作成功!')\r\n                        cc.log('移除')\r\n                    }else{\r\n                        cc.log('无')\r\n                    }\r\n                    // cc.log('点击阵法')\r\n                }else{\r\n                    cc.log('点击头像')\r\n                    //绑定按钮事件\r\n                    // _this.bindClickEventIcon(TipBoxPrefab_model,TipBoxPrefab_icon);\r\n                }\r\n            }\r\n            // 松开不做任何操作\r\n            TipBoxPrefab.getChildByName('生物移动').active=false\r\n            isDragging = false;\r\n        }, this);\r\n        // 取消拖拽（如触摸被系统取消时）\r\n        TipBoxPrefab_icon.on(cc.Node.EventType.TOUCH_CANCEL, (event) => {\r\n            if(isDragging){\r\n                if(http_globalData.biology_id!=null){\r\n                    _this.movingInt(event,TipBoxPrefab_model,TipBoxPrefab)\r\n                }\r\n                //移入颜色修改\r\n                TipBoxPrefab.getChildByName('阵法详情').children[http_globalData.move_zhenfa_id].getChildByName('生物').color = new cc.color('#FFFFFF');\r\n            }\r\n            // 取消\r\n            TipBoxPrefab.getChildByName('生物移动').active=false\r\n            isDragging = false;\r\n        }, this);\r\n\r\n    },\r\n\r\n    // 绑定按钮事件---挂载生物详情\r\n    bindClickEventIcon: function (TipBoxPrefab_model,TipBoxPrefab_icon) {\r\n        // 由于加载资源的操作是异步的，如果在加载完成前就绑定了事件，有可能会触发事件的自动执行。\r\n        // 此处进行事件绑定\r\n        TipBoxPrefab_icon.on('click', function () {\r\n           \r\n            //当前选中的生物序号 index---定义全局变量\r\n            http_globalData.biology_id = TipBoxPrefab_icon.parent.children.indexOf(TipBoxPrefab_icon);\r\n            // 事件处理逻辑\r\n            //移除挂载\r\n            TipBoxPrefab_model.getChildByName('生物详情').removeAllChildren();\r\n            //重新挂载\r\n            TipBoxPrefab_model.getComponent('bag_详情Tools').biology_detail_alert(TipBoxPrefab_model)\r\n            // 切换默认挂载信息列表\r\n            // _this.bindClickEventIcon(TipBoxPrefab_icon.getComponent(cc.Button),info,TipBoxPrefab_model);\r\n        }, this);\r\n    },\r\n    //移动定位\r\n    movingInt(event,TipBoxPrefab_model,TipBoxPrefab){\r\n        var _this =this;\r\n        //-原始位置\r\n        //移动图标，放回头像位置\r\n        TipBoxPrefab.getChildByName('生物移动').position = cc.find(\"content/列表/content/gridLayout\",TipBoxPrefab).children[ http_globalData.biology_id].position\r\n        //已存在的阵法位置--需要移除--原始位置\r\n        //需要移除已存在的节点\r\n        TipBoxPrefab.getChildByName('阵法详情').children.forEach((targetNode) => {\r\n            var rect = targetNode.getBoundingBox();\r\n            var location = event.getLocation();\r\n            var point = targetNode.parent.convertToNodeSpaceAR(location);\r\n            //进入范围替换\r\n            if (rect.contains(point)) {\r\n                // 如果在边界矩形内，则被拖拽到了目标节点中\r\n                http_globalData.move_zhenfa_id =  targetNode.parent.children.indexOf(targetNode); //移动阵法id\r\n                http_globalData.move_biology_id = http_globalData.zhenfa[http_globalData.move_zhenfa_id]  //点击阵法时, 生物id取阵法 里面的id\r\n                // 使用includes方法来判断值是否在数组内\r\n                var TipBoxPrefab_icon_move =  TipBoxPrefab.getChildByName('阵法详情').children[http_globalData.zhenfa_id]      //拖动的起始位置--先删除和添加移动的\r\n                var TipBoxPrefab_icon_new =  TipBoxPrefab.getChildByName('阵法详情').children[http_globalData.move_zhenfa_id]     //落下的位置\r\n                //替换原始位置\r\n                // _this.biologyClickChange(TipBoxPrefab_model,TipBoxPrefab,TipBoxPrefab_icon_move,TipBoxPrefab_icon_new,true) //拖动的对象\r\n                //替换操作--如果不是移动的同一个生物，生物存在，那么要替换--判断有没有阵法id ，没有就是拖拽头像，有就是拖拽阵法\r\n                \r\n                _this.move_biologyClickRemove(TipBoxPrefab_model,TipBoxPrefab) //删除替换\r\n                _this.biologyClickRemove(TipBoxPrefab_model,TipBoxPrefab)//删除移动\r\n                _this.biologyClickAdd(TipBoxPrefab_model,TipBoxPrefab,TipBoxPrefab_icon_new,http_globalData.move_zhenfa_id,http_globalData.biology_id) //拖动的对象--写入\r\n                //写入拖动对象--如果已经存在，就替换--落下的地方有生物id才进行替换--并且拖动在阵法位置，才能写入\r\n                // if (http_globalData.move_biology_id) {\r\n                    //如果是同一个位置--替换，不加不减\r\n                _this.biologyClickAdd(TipBoxPrefab_model,TipBoxPrefab,TipBoxPrefab_icon_move,http_globalData.zhenfa_id,http_globalData.move_biology_id) //替换的对象--替换\r\n                // }\r\n                //操作提示\r\n                // TipBoxPrefab_model.getComponent('bag_zhenfaTools').biology_detail_tips(TipBoxPrefab_model,'操作成功!')\r\n            }\r\n        });\r\n    },\r\n    //放入布阵\r\n    biologyClickAdd(TipBoxPrefab_model,TipBoxPrefab,TipBoxPrefab_icon,zhenfa_id,biology_id){\r\n        //阵法对象编号不能为false， 没有阵法编号，怎么添加？\r\n        if(TipBoxPrefab_icon){\r\n            if(http_globalData.biology[biology_id]){\r\n                if(parseInt(http_globalData.zhenfa_info.num+1)>5){\r\n                    //操作提示\r\n                    TipBoxPrefab_model.getComponent('bag_zhenfaTools').biology_detail_tips(TipBoxPrefab_model,'上阵数不能大于5!')  \r\n                    return false \r\n                }\r\n                //如果阵法上没有这生物，那么加1\r\n                http_globalData.zhenfa_info.num  = parseInt(http_globalData.zhenfa_info.num+1)\r\n                TipBoxPrefab.getChildByName('上阵数s').getComponent(cc.Label).string=  http_globalData.zhenfa_info.num   \r\n                TipBoxPrefab_model.getComponent('bag_zhenfa布阵Tools').biology_buzhen_detail(TipBoxPrefab_model,TipBoxPrefab,TipBoxPrefab_icon,biology_id) \r\n                cc.find(\"content/列表/content/gridLayout\",TipBoxPrefab).children[biology_id].getChildByName('P出战').active=true\r\n                http_globalData.zhenfa[zhenfa_id]=biology_id\r\n                http_globalData.biology[biology_id].is_chuzhan=1;\r\n                TipBoxPrefab_model.getComponent('bag_zhenfaTools').biology_detail_tips(TipBoxPrefab_model,'操作成功!')\r\n            }\r\n        }\r\n    },\r\n\r\n    // 移除布阵\r\n    biologyClickRemove(TipBoxPrefab_model,TipBoxPrefab) {\r\n        //如果阵容已存在，就获取阵容id，并且移除\r\n        var biology_id = http_globalData.biology_id\r\n        var zhenfa_id = http_globalData.zhenfa_id\r\n        if (http_globalData.zhenfa.includes(biology_id)||http_globalData.zhenfa_id==null) {\r\n            if(http_globalData.biology[biology_id]){\r\n                //阵法中是有这个生物的\r\n                if(http_globalData.zhenfa.includes(biology_id)){\r\n                    http_globalData.zhenfa_info.num  =  parseInt(http_globalData.zhenfa_info.num-1)\r\n                    TipBoxPrefab.getChildByName('上阵数s').getComponent(cc.Label).string=  http_globalData.zhenfa_info.num  \r\n                    cc.find(\"content/列表/content/gridLayout\",TipBoxPrefab).children[biology_id].getChildByName('P出战').active=false   \r\n                    http_globalData.biology[biology_id].is_chuzhan=0\r\n                }\r\n                if(zhenfa_id!=null){\r\n                    TipBoxPrefab.getChildByName('阵法详情').children[zhenfa_id].getChildByName('生物').active=false\r\n                    TipBoxPrefab.getChildByName('阵法详情').children[zhenfa_id].getChildByName('名称s').getComponent(cc.Label).string=''\r\n                    http_globalData.zhenfa[zhenfa_id] =null\r\n                    TipBoxPrefab.getChildByName('阵法详情').children[zhenfa_id].getChildByName('生物').color = new cc.color('#FFFFFF');\r\n                }\r\n            } \r\n        }\r\n    },\r\n        // 移除布阵\r\n        move_biologyClickRemove(TipBoxPrefab_model,TipBoxPrefab) {\r\n            //如果阵容已存在，就获取阵容id，并且移除\r\n            var biology_id = http_globalData.move_biology_id\r\n            var zhenfa_id = http_globalData.move_zhenfa_id\r\n            if (http_globalData.zhenfa.includes(biology_id)||http_globalData.zhenfa_id==null) {\r\n                if(http_globalData.biology[biology_id]){\r\n                    //阵法中是有这个生物的\r\n                    if(http_globalData.zhenfa.includes(biology_id)){\r\n                        http_globalData.zhenfa_info.num  =  parseInt(http_globalData.zhenfa_info.num-1)\r\n                        TipBoxPrefab.getChildByName('上阵数s').getComponent(cc.Label).string=  http_globalData.zhenfa_info.num   \r\n                        cc.find(\"content/列表/content/gridLayout\",TipBoxPrefab).children[biology_id].getChildByName('P出战').active=false  \r\n                        http_globalData.biology[biology_id].is_chuzhan=0\r\n                    }\r\n                    if(zhenfa_id!=null){\r\n                        TipBoxPrefab.getChildByName('阵法详情').children[zhenfa_id].getChildByName('生物').active=false\r\n                        TipBoxPrefab.getChildByName('阵法详情').children[zhenfa_id].getChildByName('名称s').getComponent(cc.Label).string=''\r\n                        http_globalData.zhenfa[zhenfa_id] =null\r\n                        TipBoxPrefab.getChildByName('阵法详情').children[zhenfa_id].getChildByName('生物').color = new cc.color('#FFFFFF');\r\n                    }\r\n                } \r\n    \r\n            }\r\n        },\r\n});\r\n\r\n\r\n"]}