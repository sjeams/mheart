{"version":3,"sources":["assets\\Script\\commonApi\\bag_api.js"],"names":["httpBagApi","cc","Class","Component","http_music","Promise","resolve","AudioPlayer","find","getComponent","playBgMusic","http_base_jiaose","httpRequest","httpPostLogin","data","http_globalData","user_jiaose","http_user_info","httpPost","user_info","http_bag_info","biology","TipBoxPrefab_biology_detail","bag","gooduse","zhenfa","zhenfa_info","info","http_update_goods","biology_id","goods_key","goodsid","is_bag","http_update_zhenfa","update_data","prop","userBiologyid","removeAllChildren","http_user_beishu_update","beishu","window","httpRequestBagApi"],"mappings":";;;;;;;;;;AAAA;AACA,IAAMA,UAAU,GAAGC,EAAE,CAACC,KAAH,CAAS;AACxB,aAASD,EAAE,CAACE,SADY;AAGxB;AACMC,EAAAA,UAJkB,wBAIN;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CAEP,IAAIC,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC9B;AACA,gBAAA,KAAI,CAACC,WAAL,GAAmBN,EAAE,CAACO,IAAH,CAAQ,OAAR,EAAiBC,YAAjB,CAA8B,cAA9B,CAAnB,CAF8B,CAG9B;AACA;;AACA,gBAAA,KAAI,CAACF,WAAL,CAAiBG,WAAjB;;AACAJ,gBAAAA,OAAO,GANuB,CAO9B;AACA;AACA;AACA;AACA;AACC,eAZM,CAFO;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAejB,GAnBuB;AAoBxB;AACMK,EAAAA,gBArBkB,8BAqBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gDAEb,IAAIN,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC1BM,gBAAAA,WAAW,CAACC,aAAZ,CAA0B,wBAA1B,EAAmD,EAAnD,EAAuD,UAAUC,IAAV,EAAgB;AACvE;AACAC,kBAAAA,eAAe,CAACC,WAAhB,GAA8BF,IAAI,CAACA,IAAnC;AACAR,kBAAAA,OAAO;AACV,iBAJG;AAKH,eANM,CAFa;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASvB,GA9BuB;AAgCxB;AACKW,EAAAA,cAjCmB,4BAiCH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gDAEV,IAAIZ,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC9BM,gBAAAA,WAAW,CAACM,QAAZ,CAAqB,uBAArB,EAA6C,EAA7C,EAAgD,UAAUJ,IAAV,EAAgB;AAC5D;AACAC,kBAAAA,eAAe,CAACI,SAAhB,GAA4BL,IAAI,CAACA,IAAjC;AACAR,kBAAAA,OAAO;AACV,iBAJD;AAKC,eANM,CAFU;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASpB,GA1CuB;AA2CxB;AACAc,EAAAA,aA5CwB,2BA4CT;AACX;AACA,WAAO,IAAIf,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC9BM,MAAAA,WAAW,CAACM,QAAZ,CAAqB,8BAArB,EAAoD,EAApD,EAAwD,UAAUJ,IAAV,EAAgB;AACpE;AACAC,QAAAA,eAAe,CAACM,OAAhB,GAA0BP,IAAI,CAACA,IAAL,CAAUO,OAApC,CAFoE,CAGpE;;AACAN,QAAAA,eAAe,CAACO,2BAAhB,GAA8C,IAA9C,CAJoE,CAKpE;;AACAP,QAAAA,eAAe,CAACQ,GAAhB,GAAsBT,IAAI,CAACA,IAAL,CAAUS,GAAhC;AACAR,QAAAA,eAAe,CAACS,OAAhB,GAA0BV,IAAI,CAACA,IAAL,CAAUU,OAApC,CAPoE,CAOtB;;AAC9CT,QAAAA,eAAe,CAACU,MAAhB,GAAyBX,IAAI,CAACA,IAAL,CAAUW,MAAV,CAAiBX,IAA1C;AACAC,QAAAA,eAAe,CAACW,WAAhB,GAA8BZ,IAAI,CAACA,IAAL,CAAUW,MAAV,CAAiBE,IAA/C,CAToE,CAUpE;AACA;AACA;;AACArB,QAAAA,OAAO;AACV,OAdD;AAeC,KAhBM,CAAP;AAiBH,GA/DuB;AAgExB;AACAsB,EAAAA,iBAjEwB,6BAiENC,UAjEM,EAiEKC,SAjEL,EAiEeC,OAjEf,EAiEuBC,MAjEvB,EAiE8B;AAClD;AACA,WAAO,IAAI3B,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC9BM,MAAAA,WAAW,CAACM,QAAZ,CAAqB,mCAArB,EAAyD;AAACW,QAAAA,UAAU,EAACA,UAAZ;AAAuBC,QAAAA,SAAS,EAACA,SAAjC;AAA2CC,QAAAA,OAAO,EAACA,OAAnD;AAA2DC,QAAAA,MAAM,EAACA;AAAlE,OAAzD,EAAmI,UAAUlB,IAAV,EAAgB;AAAER,QAAAA,OAAO,CAACQ,IAAD,CAAP;AAAe,OAApK;AACC,KAFM,CAAP;AAGH,GAtEuB;AAuExB;AACAmB,EAAAA,kBAxEwB,gCAwEJ;AAChB;AACA,WAAO,IAAI5B,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC9B,UAAI4B,WAAW,GAAC,EAAhB;;AACA,WAAK,IAAIC,IAAT,IAAiBpB,eAAe,CAACU,MAAjC,EAAyC;AACrC,YAAII,UAAU,GAAGd,eAAe,CAACU,MAAhB,CAAuBU,IAAvB,CAAjB;;AACA,YAAGpB,eAAe,CAACM,OAAhB,CAAwBQ,UAAxB,CAAH,EAAuC;AACnCK,UAAAA,WAAW,CAACC,IAAD,CAAX,GAAoBpB,eAAe,CAACM,OAAhB,CAAwBQ,UAAxB,EAAoCO,aAAxD,CADmC,CACmC;AACzE,SAFD,MAEK;AACDF,UAAAA,WAAW,CAACC,IAAD,CAAX,GAAmBN,UAAnB;AACH;AACJ,OAT6B,CAU9B;;;AACAjB,MAAAA,WAAW,CAACM,QAAZ,CAAqB,oCAArB,EAA0D;AAACO,QAAAA,MAAM,EAACS;AAAR,OAA1D,EAA+E,UAAUpB,IAAV,EAAgB;AAC3FR,QAAAA,OAAO,CAACQ,IAAD,CAAP;AACAb,QAAAA,EAAE,CAACO,IAAH,CAAQ,WAAR,EAAqB6B,iBAArB;AACC,OAHL;AAIC,KAfM,CAAP;AAgBH,GA1FuB;AA6FxB;AACAC,EAAAA,uBA9FwB,qCA8FC;AACrB;AACD,QAAKC,MAAM,GAAGxB,eAAe,CAACI,SAAhB,CAA0BoB,MAAxC;AACC,WAAO,IAAIlC,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC9BM,MAAAA,WAAW,CAACM,QAAZ,CAAqB,iCAArB,EAAuD;AAACqB,QAAAA,MAAM,EAACA;AAAR,OAAvD,EAAuE,UAAUzB,IAAV,EAAgB;AAAER,QAAAA,OAAO,CAACQ,IAAD,CAAP;AAAe,OAAxG;AACC,KAFM,CAAP;AAGH;AApGuB,CAAT,CAAnB;AAuGA0B,MAAM,CAACC,iBAAP,GAA2B,IAAIzC,UAAJ,EAA3B","sourceRoot":"/","sourcesContent":["// 背包的api请求接口\r\nconst httpBagApi = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    //实例化用户信息\r\n    async http_music(){\r\n        //修改请求--等待响应后回调\r\n        return new Promise(resolve => {\r\n        //获取全局播放器\r\n        this.AudioPlayer = cc.find(\"Audio\").getComponent(\"AudioManager\");\r\n        //停止再开启背景音乐\r\n        // this.AudioPlayer.stopBgMusic();\r\n        this.AudioPlayer.playBgMusic();\r\n        resolve();\r\n        // httpRequest.httpPost('/app/app-api/get-user',{},function (data) {\r\n        //     //此处可能要判断登录失效 跳转、后期处理\r\n        //     http_globalData.user_info = data.data\r\n        //     resolve();\r\n        // })\r\n        });\r\n    },  \r\n    //实例化角色信息\r\n    async http_base_jiaose(){\r\n        //修改请求--等待响应后回调\r\n        return new Promise(resolve => {\r\n            httpRequest.httpPostLogin('/app/api-server/jiaose',{}, function (data) {\r\n            //此处可能要判断登录失效 跳转、后期处理\r\n            http_globalData.user_jiaose = data.data\r\n            resolve();\r\n        })\r\n        });\r\n    }, \r\n\r\n    //实例化用户信息\r\n   async http_user_info(){\r\n        //修改请求--等待响应后回调\r\n        return new Promise(resolve => {\r\n        httpRequest.httpPost('/app/app-api/get-user',{},function (data) {\r\n            //此处可能要判断登录失效 跳转、后期处理\r\n            http_globalData.user_info = data.data\r\n            resolve();\r\n        })\r\n        });\r\n    },   \r\n    //实例化背包信息\r\n    http_bag_info(){\r\n        //获取生物列表\r\n        return new Promise(resolve => {\r\n        httpRequest.httpPost('/app/app-apinew/biology-list',{}, function (data) {\r\n            //定义常量\r\n            http_globalData.biology = data.data.biology;\r\n            //当前弹出的预制节点--物品详情--装备-卸载\r\n            http_globalData.TipBoxPrefab_biology_detail = null;\r\n            //开启战斗\r\n            http_globalData.bag = data.data.bag;  \r\n            http_globalData.gooduse = data.data.gooduse;  //物品类型\r\n            http_globalData.zhenfa = data.data.zhenfa.data;\r\n            http_globalData.zhenfa_info = data.data.zhenfa.info;\r\n            // 临时字段\r\n            // http_globalData.biology_id = 0;\r\n            // http_globalData.zhenfa_id=0;\r\n            resolve();\r\n        })\r\n        });\r\n    },\r\n    //http请求--快速请求接口\r\n    http_update_goods(biology_id,goods_key,goodsid,is_bag){\r\n        //修改请求\r\n        return new Promise(resolve => {\r\n        httpRequest.httpPost('/app/app-api/biology-goods-update',{biology_id:biology_id,goods_key:goods_key,goodsid:goodsid,is_bag:is_bag},function (data) { resolve(data);})\r\n        });\r\n    },  \r\n    //http请求--快速请求接口\r\n    http_update_zhenfa(){\r\n        // var zhenfa =  http_globalData.zhenfa\r\n        return new Promise(resolve => {\r\n        var update_data=[]\r\n        for (var prop in http_globalData.zhenfa) {\r\n            var biology_id = http_globalData.zhenfa[prop];\r\n            if(http_globalData.biology[biology_id]){\r\n                update_data[prop] = http_globalData.biology[biology_id].userBiologyid //获取序号中的生物id\r\n            }else{\r\n                update_data[prop]= biology_id;\r\n            }\r\n        }\r\n        //修改请求\r\n        httpRequest.httpPost('/app/app-api/biology-zhenfa-update',{zhenfa:update_data},function (data) {\r\n            resolve(data);\r\n            cc.find('Canvas/弹窗').removeAllChildren();\r\n            })\r\n        });\r\n    },\r\n \r\n\r\n    //修改倍数\r\n    http_user_beishu_update(){\r\n        //修改请求\r\n       var  beishu = http_globalData.user_info.beishu\r\n        return new Promise(resolve => {\r\n        httpRequest.httpPost('/app/app-api/user-beishu-update',{beishu:beishu},function (data) { resolve(data);})\r\n        });\r\n    },  \r\n\r\n});\r\nwindow.httpRequestBagApi = new httpBagApi();"]}