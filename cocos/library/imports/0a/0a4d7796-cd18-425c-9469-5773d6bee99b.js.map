{"version":3,"sources":["assets\\Script\\阵法\\bag_zhengfa布阵Tools.js"],"names":["HttpHelper","require","httpRequest","cc","Class","Component","properties","biology_detail_alert","TipBoxPrefab_model","_this","TOOLS","globalData","zhengfa","biology","loader","loadRes","errorMessage","loadedResource_icon","key","prop","TipBoxPrefab_icon","instantiate","info","getChildByName","active","image","picture","SpriteFrame","err","texture","getComponent","Sprite","spriteFrame","Label","string","name","on","bindClickEventIcon","addChild"],"mappings":";;;;;;AAAA,IAAIA,UAAU,GAAGC,OAAO,CAAC,SAAD,CAAxB;;AACA,IAAIC,WAAW,GAAG,IAAIF,UAAJ,EAAlB;AACAG,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE,EAHP;AAOL;AACA;AACAC,EAAAA,oBATK,gCASgBC,kBAThB,EASmC;AACpC,QAAIC,KAAK,GAAE,IAAX;;AACA,QAAIC,KAAK,GAAE,EAAX;AACA,QAAIA,KAAK,GAAGP,EAAE,CAACQ,UAAH,CAAcC,OAA1B;AACA,QAAIC,OAAO,GAAGV,EAAE,CAACQ,UAAH,CAAcE,OAA5B,CAJoC,CAKpC;;AACAV,IAAAA,EAAE,CAACW,MAAH,CAAUC,OAAV,CAAkB,eAAlB,EAAmC,UAASC,YAAT,EAAsBC,mBAAtB,EAA0C;AAAA;;AAAA;AAErE,YAAIC,GAAG,GAAGR,KAAK,CAACS,IAAD,CAAf,CAFqE,CAGrE;;AACA,YAAMC,iBAAiB,GAAIjB,EAAE,CAACkB,WAAH,CAAeJ,mBAAf,CAA3B;;AACA,YAAGC,GAAH,EAAO;AACDI,UAAAA,IAAI,GAAGT,OAAO,CAACK,GAAD,CADb;AAELE,UAAAA,iBAAiB,CAACG,cAAlB,CAAiC,IAAjC,EAAuCC,MAAvC,GAA8C,IAA9C,CAFK,CAGH;;AACA,cAAIC,KAAK,GAAGH,IAAI,CAACI,OAAjB;AACAvB,UAAAA,EAAE,CAACW,MAAH,CAAUC,OAAV,CAAkBU,KAAlB,EAAyBtB,EAAE,CAACwB,WAA5B,EAAyC,UAAUC,GAAV,EAAeC,OAAf,EAAwB;AAC7D,gBAAID,GAAJ,EAAS;AACL;AACA;AACH;;AACDR,YAAAA,iBAAiB,CAACG,cAAlB,CAAiC,IAAjC,EAAuCO,YAAvC,CAAoD3B,EAAE,CAAC4B,MAAvD,EAA+DC,WAA/D,GAA6EH,OAA7E;AACH,WAND,EALG,CAYH;;AACAT,UAAAA,iBAAiB,CAACG,cAAlB,CAAiC,KAAjC,EAAwCO,YAAxC,CAAqD3B,EAAE,CAAC8B,KAAxD,EAA+DC,MAA/D,GAAsEZ,IAAI,CAACa,IAA3E;AACH,SAdD,MAcK;AAEDf,UAAAA,iBAAiB,CAACG,cAAlB,CAAiC,IAAjC,EAAuCC,MAAvC,GAA8C,KAA9C;AACAJ,UAAAA,iBAAiB,CAACG,cAAlB,CAAiC,KAAjC,EAAwCO,YAAxC,CAAqD3B,EAAE,CAAC8B,KAAxD,EAA+DC,MAA/D,GAAsE,EAAtE;AACH,SAvBoE,CA0BrE;AACA;;;AACAd,QAAAA,iBAAiB,CAACgB,EAAlB,CAAqB,OAArB,EAA8B,YAAY;AACtC;AACA3B,UAAAA,KAAK,CAAC4B,kBAAN,CAAyB7B,kBAAzB,EAA4CY,iBAA5C;AACH,SAHD,EAGG,MAHH,EA5BqE,CAiCrE;;AACAZ,QAAAA,kBAAkB,CAACe,cAAnB,CAAkC,MAAlC,EAA0Ce,QAA1C,CAAmDlB,iBAAnD;AAlCqE;;AACzE,WAAK,IAAID,IAAT,IAAiBT,KAAjB,EAAwB;AAAA,YAKdY,IALc;;AAAA;AAkCvB;AACJ,KApCD;AAqCH,GApDI;AAqDL;AACAe,EAAAA,kBAAkB,EAAE,4BAAU7B,kBAAV,EAA6BY,iBAA7B,EAAgD,CAChE;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAGH,GA3FI,CA4FL;;AA5FK,CAAT","sourceRoot":"/","sourcesContent":["var HttpHelper = require(\"../http\"); \r\nvar httpRequest = new HttpHelper();\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    //技能图片渲染\r\n    biology_detail_alert(TipBoxPrefab_model){\r\n        var _this =this;\r\n        var TOOLS =[];\r\n        var TOOLS = cc.globalData.zhengfa;\r\n        var biology = cc.globalData.biology\r\n        //加载预制资源 PrefabUrl为 预制资源在 资源中的路径\r\n        cc.loader.loadRes('/model布阵/图标阵法', function(errorMessage,loadedResource_icon){\r\n            for (var prop in TOOLS) {\r\n                let key = TOOLS[prop];\r\n                //开始实例化预制资源\r\n                let   TipBoxPrefab_icon =  cc.instantiate(loadedResource_icon);\r\n                if(key){\r\n                  var info = biology[key] \r\n                  TipBoxPrefab_icon.getChildByName('生物').active=true\r\n                    // //载入技能图片\r\n                    let image = info.picture;\r\n                    cc.loader.loadRes(image, cc.SpriteFrame, function (err, texture) { \r\n                        if (err) {\r\n                            // cc.error(err.message || err);\r\n                            return;\r\n                        }\r\n                        TipBoxPrefab_icon.getChildByName('生物').getComponent(cc.Sprite).spriteFrame = texture; \r\n                    });\r\n                    //技能等级\r\n                    TipBoxPrefab_icon.getChildByName('名称s').getComponent(cc.Label).string=info.name\r\n                }else{\r\n\r\n                    TipBoxPrefab_icon.getChildByName('生物').active=false\r\n                    TipBoxPrefab_icon.getChildByName('名称s').getComponent(cc.Label).string=''\r\n                }\r\n\r\n\r\n                // 由于加载资源的操作是异步的，如果在加载完成前就绑定了事件，有可能会触发事件的自动执行。\r\n                // 此处进行事件绑定\r\n                TipBoxPrefab_icon.on('click', function () {\r\n                    // 事件处理逻辑\r\n                    _this.bindClickEventIcon(TipBoxPrefab_model,TipBoxPrefab_icon);\r\n                }, this);\r\n\r\n                //写入icon\r\n                TipBoxPrefab_model.getChildByName('阵法详情').addChild(TipBoxPrefab_icon);\r\n            }\r\n        })\r\n    },\r\n    // 绑定按钮事件\r\n    bindClickEventIcon: function (TipBoxPrefab_model,TipBoxPrefab_icon) {\r\n        // cc.log(skill)\r\n        //加载预制资源 PrefabUrl为 预制资源在 资源中的路径\r\n\r\n        // 销毁所有弹窗--节点\r\n        // TipBoxPrefab_model.getChildByName('中间弹窗').removeAllChildren();\r\n\r\n        // let move_type= ['初始化','回合化','被击前触发','被击后触发','攻击前触发','主动','攻击后']\r\n        // cc.loader.loadRes('/model弹窗/biology_生物_战斗技能提示', function(errorMessage,loadedResource){\r\n        //     //检查资源加载\r\n        //     if( errorMessage ) { cc.log( '载入预制资源失败, 原因:' + errorMessage ); return; }\r\n        //     if( !(loadedResource instanceof cc.Prefab ) ) { cc.log( '你载入的不是预制资源!' ); return; }\r\n        //     //开始实例化预制资源\r\n        //     let tips_Prefab = cc.instantiate(loadedResource);\r\n        //     tips_Prefab.getChildByName('D技能图标').getComponent(cc.Sprite).spriteFrame = TipBoxPrefab_icon.getChildByName('P技能').getComponent(cc.Sprite).spriteFrame\r\n        //     tips_Prefab.getChildByName('D技能名称s').getComponent(cc.Label).string=skill.name+'-['+skill.type+']'\r\n        //     tips_Prefab.getChildByName('D技能消耗s').getComponent(cc.Label).string='消耗：'+Math.abs(skill.needValue)\r\n        //     var attack=skill.attack==0?'被动':'主动'\r\n        //     tips_Prefab.getChildByName('D技能类型s').getComponent(cc.Label).string='触发: '+attack\r\n        //     var star ='';    \r\n        //     for(var i=0;i<=skill['type'];i++){\r\n        //         star +='☆';\r\n        //     }\r\n        //     tips_Prefab.getChildByName('D技能星级s').getComponent(cc.Label).string='稀有程度：'+star\r\n        //     var hurtType=skill.hurtType==1?'物理':'法术'\r\n        //     tips_Prefab.getChildByName('D技能攻击s').getComponent(cc.Label).string='攻击类型: '+hurtType\r\n        //     tips_Prefab.getChildByName('D技能触发s').getComponent(cc.Label).string='触发几率：'+skill.probability+'%'\r\n        //     tips_Prefab.getChildByName('D发动时机s').getComponent(cc.Label).string='攻击类型: '+move_type[skill.belong]\r\n        //     tips_Prefab.getChildByName('D技能来源s').getComponent(cc.Label).string='技能来源：'+skill.words \r\n        //     tips_Prefab.getChildByName('D技能描述s').getComponent(cc.Label).string='技能说明：'+skill.describe\r\n\r\n        //     //载入生物详情\r\n        //     TipBoxPrefab_model.getChildByName('中间弹窗').addChild(tips_Prefab);\r\n\r\n        // });\r\n\r\n\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}