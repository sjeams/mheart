{"version":3,"sources":["assets\\Script\\scence\\word_score.js"],"names":["HttpHelper","require","httpRequest","cc","Class","Component","properties","content","Node","person","Prefab","test_scrollView","type","ScrollView","test_pageView","PageView","onLoad","spawnTools","_this","httpPost","data","searchHidden","TOOLS","total","showWord","searchShow","removeAllChildren","destroyAllChildren","i","tool","instantiate","getComponent","initInfo","addChild","addWord","length","addTouchEvent","node_1","on","EventType","TOUCH_START","touchStart","TOUCH_MOVE","touchMove","TOUCH_END","touchEnd","outWord","backHome","playGame","urlConfig","find","active"],"mappings":"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","sourceRoot":"/","sourcesContent":["// 世界操作  \r\nvar HttpHelper = require(\"../http\"); \r\nvar httpRequest = new HttpHelper();\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n      content: cc.Node,\r\n      person: cc.Prefab,\r\n\r\n      //列表\r\n      test_scrollView: {\r\n        default: null,\r\n        type: cc.ScrollView\r\n      },\r\n      //翻页容器\r\n      test_pageView: {\r\n        default: null,\r\n        type: cc.PageView\r\n      },\r\n\r\n    },\r\n    onLoad: function () {\r\n        // for (var i = 0; i < 10; i++) {\r\n        //     var person = cc.instantiate(this.person);\r\n        //     this.conten=person\r\n        //     // person.parent = this.content;\r\n        //     // this.addTouchEvent(person);  //添加触摸事件\r\n        //   }\r\n        // this.value_set = [];\r\n        // // 如果你这里是排行榜，那么你就push排行榜的数据;\r\n        // for(var i = 1; i <= 100; i ++) {\r\n        //     this.value_set.push(i);\r\n        // }\r\n\r\n        // this.content = this.scroll_view.content;\r\n        // this.opt_item_set = [];\r\n        // for(var i = 0; i < this.PAGE_NUM * 3; i ++) {\r\n        //     var item = cc.instantiate(this.item_prefab);\r\n        //     this.content.addChild(item);\r\n        //     this.opt_item_set.push(item);\r\n        // }\r\n      this.spawnTools()\r\n        // this.scroll_view.node.on(\"scroll-ended\", this.on_scroll_ended.bind(this), this);\r\n    },\r\n\r\n    spawnTools () {\r\n      var _this =this;\r\n\r\n      httpRequest.httpPost('/app/app-apiword/index',{}, function (data) {\r\n        //  console.log(data);\r\n          // console.log(_this.content)\r\n          if(data.data){\r\n            _this.searchHidden()\r\n            var TOOLS = [data.data];\r\n            var total = 1;\r\n            _this.showWord(TOOLS,total)\r\n          }else{\r\n\r\n            _this.searchShow()\r\n              //生成世界\r\n              // let cellWidth = _this.content.width * 0.2;\r\n              // let cellHeight = _this.content.height * 0.4;\r\n              // let spacingX = _this.content.width * 0.1;\r\n              // let spacingY = _this.content.height * 0.1;\r\n    \r\n              // _this.content.getComponent(cc.Layout).cellSize.width = cellWidth;\r\n              // _this.content.getComponent(cc.Layout).cellSize.height = cellHeight;\r\n              // _this.content.getComponent(cc.Layout).spacingX = spacingX;\r\n              // _this.content.getComponent(cc.Layout).spacingY = spacingY;\r\n              // _this.addWord()\r\n          }\r\n      })\r\n    },\r\n    showWord(TOOLS,total){\r\n      var _this =this;\r\n        // let cellWidth = _this.content.width * 0.105;\r\n        // let cellHeight = _this.content.height * 0.215;\r\n        // let spacingX = _this.content.width * 0.022;\r\n        // let spacingY = _this.content.height * 0.045;\r\n\r\n        // 根据MapTools生成相应的道具\r\n        // _this.toolsArray = [];\r\n\r\n        // var total = 1;\r\n        // cc.log(TOOLS[0]);\r\n        // console.log(TOOLS) \r\n        // var fi = cc.fadeIn(2)//渐显效果\r\n        // _this.content.runAction(fi);\r\n        // var fo = cc.fadeOut(1)//渐隐效果\r\n        // _this.content.runAction(fo);\r\n        //移除节点\r\n        _this.content.removeAllChildren();\r\n        _this.content.destroyAllChildren();\r\n        //添加节点\r\n        for (var i=0; i<total; i++) {\r\n          // console.log(i) \r\n            var tool = cc.instantiate(_this.person);\r\n            tool.getComponent('wordTools').initInfo(TOOLS[i]);\r\n            // _this.toolsArray.push(tool);\r\n            _this.content.addChild(tool);    \r\n        }\r\n        // 定义content滚动条高度\r\n        // let scorllheight =  _this.content.parent;\r\n        // //计算滚动条高度\r\n        // let  height =  (cellHeight+spacingY)*( Math.ceil(total/2));\r\n        // // console.log(height);\r\n        // // scorllheight.designResolution  = new cc.Size(600, height);\r\n        // scorllheight.setContentSize(600,height);\r\n    },\r\n    addWord(){\r\n      var _this =this;\r\n      httpRequest.httpPost('/app/app-apiword/rand-word',{},function (data) {\r\n        var TOOLS = data.data;\r\n        var total = data.data.length;\r\n        _this.showWord(TOOLS,total)\r\n      })\r\n    },\r\n\r\n    addTouchEvent(node_1) {\r\n        node_1.on(cc.Node.EventType.TOUCH_START, this.touchStart, this);\r\n        node_1.on(cc.Node.EventType.TOUCH_MOVE, this.touchMove, this);\r\n        node_1.on(cc.Node.EventType.TOUCH_END, this.touchEnd, this);\r\n      },\r\n\r\n    outWord(){\r\n               //移除节点\r\n               var _this = this;\r\n               _this.content.removeAllChildren();\r\n               _this.content.destroyAllChildren();\r\n        _this.searchShow()\r\n        httpRequest.httpPost('/app/app-apiword/out-word',{},function (data) {\r\n     \r\n        })\r\n      },\r\n      backHome(){\r\n        //移除节点\r\n        var _this = this;\r\n        _this.content.removeAllChildren();\r\n        _this.content.destroyAllChildren();\r\n        httpRequest.playGame(httpRequest.urlConfig(\"sence_dating\"));\r\n    },\r\n      searchShow(){\r\n        cc.find(\"Canvas/大厅/探索世界\").active = true;\r\n        cc.find(\"Canvas/大厅/退出世界\").active = false;\r\n      },\r\n      searchHidden(){\r\n        cc.find(\"Canvas/大厅/探索世界\").active = false;\r\n        cc.find(\"Canvas/大厅/退出世界\").active = true;\r\n      },\r\n    // start: function() {\r\n    //     this.start_y = this.content.y;\r\n    //     this.start_index = 0; // 当前我们24个Item加载的 100项数据里面的起始数据记录的索引;\r\n    //     this.load_record(this.start_index);\r\n    // },\r\n\r\n    // // 从这个索引开始，加载数据记录到我们的滚动列表里面的选项\r\n    // load_record: function(start_index) {\r\n    //     this.start_index = start_index;\r\n\r\n    //     for(var i = 0; i < this.PAGE_NUM * 3; i ++) {\r\n    //         var label = this.opt_item_set[i].getChildByName(\"src\").getComponent(cc.Label);\r\n    //         // 显示我们的记录;\r\n    //         label.string = this.value_set[start_index + i];\r\n    //     }\r\n    // },\r\n\r\n    // on_scroll_ended: function() {\r\n    //     this.scrollveiw_load_recode();\r\n    //     this.scroll_view.elastic = true;\r\n    // },\r\n\r\n    // scrollveiw_load_recode: function() {\r\n    //      // 向下加载了\r\n    //     if (this.start_index + this.PAGE_NUM * 3 < this.value_set.length &&\r\n    //         this.content.y >= this.start_y + this.PAGE_NUM * 2 * this.OPT_HEIGHT) { // 动态加载\r\n            \r\n    //         if (this.scroll_view._autoScrolling) { // 等待这个自动滚动结束以后再做加载\r\n    //             this.scroll_view.elastic = false; // 暂时关闭回弹效果\r\n    //             return;\r\n    //         }\r\n\r\n    //         var down_loaded = this.PAGE_NUM;\r\n    //         this.start_index += down_loaded;\r\n    //         if (this.start_index + this.PAGE_NUM * 3 > this.value_set.length) {\r\n    //             var out_len = this.start_index + this.PAGE_NUM * 3 - this.value_set.length;\r\n    //             down_loaded -= (out_len);\r\n    //             this.start_index -= (out_len);\r\n    //         }\r\n    //         this.load_record(this.start_index);\r\n\r\n    //         this.content.y -= (down_loaded * this.OPT_HEIGHT);\r\n    //         return;\r\n    //     }\r\n\r\n    //     // 向上加载\r\n    //     if (this.start_index > 0 && this.content.y <= this.start_y) {\r\n    //         if (this.scroll_view._autoScrolling) { // 等待这个自动滚动结束以后再做加载\r\n    //             this.scroll_view.elastic = false;\r\n    //             return;\r\n    //         }\r\n\r\n    //         var up_loaded = this.PAGE_NUM;\r\n    //         this.start_index -= up_loaded;\r\n    //         if (this.start_index < 0) {\r\n    //             up_loaded += this.start_index;\r\n    //             this.start_index = 0; \r\n    //         }\r\n    //         this.load_record(this.start_index);\r\n    //         this.content.y += (up_loaded * this.OPT_HEIGHT);\r\n    //     }\r\n    //     // end \r\n    // },\r\n    // // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n    //     this.scrollveiw_load_recode();\r\n    // },\r\n});\r\n"]}