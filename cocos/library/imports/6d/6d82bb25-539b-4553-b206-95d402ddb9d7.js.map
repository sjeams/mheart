{"version":3,"sources":["assets\\Script\\背包\\biology_skillTools.js"],"names":["require","cc","Class","Component","properties","biology_detail_alert","TipBoxPrefab_model","info","getChildByName","removeAllChildren","_this","loader","loadRes","errorMessage","loadedResource_icon","log","Prefab","TipBoxPrefab","instantiate","biology_detail_list","position_skill","bind_button","addChild","on","getComponent","TOOLS","skill","prop","TipBoxPrefab_icon","image","SpriteFrame","err","texture","Sprite","spriteFrame","Label","string","type","bindClickEventIcon","move_type","loadedResource","tips_Prefab","name","Math","abs","needValue","attack","star","i","hurtType","probability","belong","words","describe"],"mappings":"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","sourceRoot":"/","sourcesContent":["require(\"../common\"); \r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n     //技能图片渲染\r\n     biology_detail_alert(TipBoxPrefab_model,info){\r\n         //尽量先关闭所有弹窗\r\n        TipBoxPrefab_model.getChildByName('左边弹窗').removeAllChildren();\r\n        TipBoxPrefab_model.getChildByName('中间弹窗').removeAllChildren();\r\n        TipBoxPrefab_model.getChildByName('右边弹窗').removeAllChildren();\r\n\r\n\r\n        var _this=this;\r\n        cc.loader.loadRes('/model背包/生物技能', function(errorMessage,loadedResource_icon){\r\n            //检查资源加载\r\n            if( errorMessage ) { cc.log( '载入预制资源失败, 原因:' + errorMessage ); return; }\r\n            if( !(loadedResource_icon instanceof cc.Prefab ) ) { cc.log( '你载入的不是预制资源!' ); return; }\r\n            //开始实例化预制资源\r\n            let   TipBoxPrefab =  cc.instantiate(loadedResource_icon);\r\n            //技能等级\r\n            // TipBoxPrefab.getChildByName('生物数量s').getComponent(cc.Label).string='生物('+info_list.length+'/60)'\r\n            // 由于加载资源的操作是异步的，如果在加载完成前就绑定了事件，有可能会触发事件的自动执行。\r\n            _this.biology_detail_list(TipBoxPrefab_model,TipBoxPrefab,info.position_skill)\r\n            // 此处进行事件绑定\r\n            _this.bind_button(TipBoxPrefab_model,TipBoxPrefab,info)\r\n            //写入icon\r\n            TipBoxPrefab_model.getChildByName('生物信息').addChild(TipBoxPrefab);\r\n            return TipBoxPrefab_model\r\n        })\r\n        return TipBoxPrefab_model\r\n    },\r\n    //绑定点击事件\r\n    bind_button(TipBoxPrefab_model,TipBoxPrefab,info){\r\n        \r\n        //  cc.find(\"列表/content/gridLayout\",TipBoxPrefab)\r\n        TipBoxPrefab.getChildByName('信息').on('click', function () {\r\n            // 事件处理逻辑\r\n            //移除挂载\r\n            TipBoxPrefab_model.getChildByName('生物信息').removeAllChildren();\r\n            //重新挂载\r\n            TipBoxPrefab_model.getComponent('biology_xinxiTools').biology_detail_alert(TipBoxPrefab_model,info)\r\n        }, this);\r\n        TipBoxPrefab.getChildByName('缘分').on('click', function () {\r\n            // 事件处理逻辑\r\n            //移除挂载\r\n            TipBoxPrefab_model.getChildByName('生物信息').removeAllChildren();\r\n            //重新挂载\r\n            TipBoxPrefab_model.getComponent('biology_yuanfenTools').biology_detail_alert(TipBoxPrefab_model,info)\r\n        }, this);\r\n    },\r\n\r\n    //技能图片渲染\r\n    biology_detail_list(TipBoxPrefab_model,TipBoxPrefab,position_skill){\r\n        var _this =this;\r\n        var TOOLS =[];\r\n        var TOOLS = position_skill;\r\n \r\n\r\n        //加载预制资源 PrefabUrl为 预制资源在 资源中的路径\r\n        cc.loader.loadRes('/model弹窗/biology_生物_技能图标', function(errorMessage,loadedResource_icon){\r\n            \r\n            for (var prop in position_skill) {\r\n                let skill = TOOLS[prop];\r\n                //检查资源加载\r\n                if( errorMessage ) { cc.log( '载入预制资源失败, 原因:' + errorMessage ); return; }\r\n                if( !(loadedResource_icon instanceof cc.Prefab ) ) { cc.log( '你载入的不是预制资源!' ); return; }\r\n                //开始实例化预制资源\r\n                let   TipBoxPrefab_icon =  cc.instantiate(loadedResource_icon);\r\n                //载入技能图片\r\n                let image = skill.image;\r\n                cc.loader.loadRes(image, cc.SpriteFrame, function (err, texture) { \r\n                    if (err) {\r\n                        // cc.error(err.message || err);\r\n                        return;\r\n                    }\r\n                    TipBoxPrefab_icon.getChildByName('P技能').getComponent(cc.Sprite).spriteFrame = texture; \r\n                });\r\n                //技能等级\r\n                TipBoxPrefab_icon.getChildByName('技能s').getComponent(cc.Label).string=skill.type\r\n\r\n                // 由于加载资源的操作是异步的，如果在加载完成前就绑定了事件，有可能会触发事件的自动执行。\r\n                // 此处进行事件绑定\r\n                TipBoxPrefab_icon.on('click', function () {\r\n                    // 事件处理逻辑\r\n                    _this.bindClickEventIcon(TipBoxPrefab_model, skill,TipBoxPrefab,TipBoxPrefab_icon);\r\n                }, this);\r\n\r\n                //写入icon\r\n                TipBoxPrefab.getChildByName('技能列表').addChild(TipBoxPrefab_icon);\r\n            }\r\n        })\r\n        return TipBoxPrefab\r\n    },\r\n    // 绑定按钮事件\r\n    bindClickEventIcon: function (TipBoxPrefab_model, skill,TipBoxPrefab,TipBoxPrefab_icon) {\r\n        // cc.log(skill)\r\n        //加载预制资源 PrefabUrl为 预制资源在 资源中的路径\r\n\r\n        // 销毁所有弹窗--节点\r\n        TipBoxPrefab_model.getChildByName('中间弹窗').removeAllChildren();\r\n\r\n        let move_type= ['初始化','回合化','被击前触发','被击后触发','攻击前触发','主动','攻击后']\r\n        cc.loader.loadRes('/model弹窗/biology_生物_战斗技能提示', function(errorMessage,loadedResource){\r\n            //检查资源加载\r\n            if( errorMessage ) { cc.log( '载入预制资源失败, 原因:' + errorMessage ); return; }\r\n            if( !(loadedResource instanceof cc.Prefab ) ) { cc.log( '你载入的不是预制资源!' ); return; }\r\n            //开始实例化预制资源\r\n            let tips_Prefab = cc.instantiate(loadedResource);\r\n            tips_Prefab.getChildByName('D技能图标').getComponent(cc.Sprite).spriteFrame = TipBoxPrefab_icon.getChildByName('P技能').getComponent(cc.Sprite).spriteFrame\r\n            tips_Prefab.getChildByName('D技能名称s').getComponent(cc.Label).string=skill.name+'-['+skill.type+']'\r\n            tips_Prefab.getChildByName('D技能消耗s').getComponent(cc.Label).string='消耗：'+Math.abs(skill.needValue)\r\n            var attack=skill.attack==0?'被动':'主动'\r\n            tips_Prefab.getChildByName('D技能类型s').getComponent(cc.Label).string='触发: '+attack\r\n            var star ='';    \r\n            for(var i=0;i<=skill['type'];i++){\r\n                star +='☆';\r\n            }\r\n            tips_Prefab.getChildByName('D技能星级s').getComponent(cc.Label).string='稀有程度：'+star\r\n            var hurtType=skill.hurtType==1?'物理':'法术'\r\n            tips_Prefab.getChildByName('D技能攻击s').getComponent(cc.Label).string='攻击类型: '+hurtType\r\n            tips_Prefab.getChildByName('D技能触发s').getComponent(cc.Label).string='触发几率：'+skill.probability+'%'\r\n            tips_Prefab.getChildByName('D发动时机s').getComponent(cc.Label).string='攻击类型: '+move_type[skill.belong]\r\n            tips_Prefab.getChildByName('D技能来源s').getComponent(cc.Label).string='技能来源：'+skill.words \r\n            tips_Prefab.getChildByName('D技能描述s').getComponent(cc.Label).string='技能说明：'+skill.describe\r\n\r\n            //载入生物详情\r\n            TipBoxPrefab_model.getChildByName('中间弹窗').addChild(tips_Prefab);\r\n\r\n        });\r\n\r\n\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}