{"version":3,"sources":["assets\\Script\\背包\\biology_skillTools.js"],"names":["cc","Class","Component","properties","biology_detail_alert","info","http_globalAsset","TipBoxPrefab_model","getChildByName","removeAllChildren","TipBoxPrefab","instantiate","model_zhuangbei_bag_skill","biology_detail_list","position_skill","bind_button","addChild","on","getComponent","TOOLS","skill","prop","TipBoxPrefab_icon","model_zhuangbei_bag_skill_icon","Sprite","spriteFrame","http_base_asset_skill","image","Label","string","type","bindClickEventIcon","move_type","tips_Prefab","model_zhuangbei_bag_skill_tips","name","Math","abs","needValue","attack","star","i","hurtType","probability","belong","words","describe"],"mappings":"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","sourceRoot":"/","sourcesContent":["// require(\"../common\"); \r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n     //技能图片渲染\r\n     biology_detail_alert(info){\r\n         //尽量先关闭所有弹窗\r\n         http_globalAsset.TipBoxPrefab_model.getChildByName('左边弹窗').removeAllChildren();\r\n         http_globalAsset.TipBoxPrefab_model.getChildByName('中间弹窗').removeAllChildren();\r\n         http_globalAsset.TipBoxPrefab_model.getChildByName('右边弹窗').removeAllChildren();\r\n        //开始实例化预制资源\r\n        let   TipBoxPrefab =  cc.instantiate(http_globalAsset.model_zhuangbei_bag_skill);\r\n        //技能等级\r\n        // TipBoxPrefab.getChildByName('生物数量s').getComponent(cc.Label).string='生物('+info_list.length+'/60)'\r\n        // 由于加载资源的操作是异步的，如果在加载完成前就绑定了事件，有可能会触发事件的自动执行。\r\n        this.biology_detail_list(TipBoxPrefab,info.position_skill)\r\n        // 此处进行事件绑定\r\n        this.bind_button(TipBoxPrefab,info)\r\n        //写入icon\r\n        http_globalAsset.TipBoxPrefab_model.getChildByName('生物信息').addChild(TipBoxPrefab);\r\n    },\r\n    //绑定点击事件\r\n    bind_button(TipBoxPrefab,info){\r\n        \r\n        //  cc.find(\"列表/content/gridLayout\",TipBoxPrefab)\r\n        TipBoxPrefab.getChildByName('信息').on('click', function () {\r\n            // 事件处理逻辑\r\n            //移除挂载\r\n            http_globalAsset.TipBoxPrefab_model.getChildByName('生物信息').removeAllChildren();\r\n            //重新挂载\r\n            http_globalAsset.TipBoxPrefab_model.getComponent('biology_xinxiTools').biology_detail_alert(info)\r\n        }, this);\r\n        TipBoxPrefab.getChildByName('缘分').on('click', function () {\r\n            // 事件处理逻辑\r\n            //移除挂载\r\n            http_globalAsset.TipBoxPrefab_model.getChildByName('生物信息').removeAllChildren();\r\n            //重新挂载\r\n            http_globalAsset.TipBoxPrefab_model.getComponent('biology_yuanfenTools').biology_detail_alert(info)\r\n        }, this);\r\n    },\r\n\r\n    //技能图片渲染\r\n    biology_detail_list(TipBoxPrefab,position_skill){\r\n        var TOOLS =[];\r\n        var TOOLS = position_skill;            \r\n        for (var prop in position_skill) {\r\n            let skill = TOOLS[prop];\r\n            //开始实例化预制资源\r\n            let   TipBoxPrefab_icon =  cc.instantiate( http_globalAsset.model_zhuangbei_bag_skill_icon);\r\n            //载入技能图片\r\n            TipBoxPrefab_icon.getChildByName('P技能').getComponent(cc.Sprite).spriteFrame =  http_globalAsset.http_base_asset_skill[skill.image]\r\n            //技能等级\r\n            TipBoxPrefab_icon.getChildByName('技能s').getComponent(cc.Label).string=skill.type\r\n            // 由于加载资源的操作是异步的，如果在加载完成前就绑定了事件，有可能会触发事件的自动执行。\r\n            // 此处进行事件绑定\r\n            TipBoxPrefab_icon.on('click', function () {\r\n                // 事件处理逻辑\r\n                this.bindClickEventIcon(skill);\r\n            }, this);\r\n            //写入icon\r\n            TipBoxPrefab.getChildByName('技能列表').addChild(TipBoxPrefab_icon);\r\n        } \r\n    },\r\n    // 绑定按钮事件\r\n    bindClickEventIcon(skill) {\r\n        // cc.log(skill)\r\n        //加载预制资源 PrefabUrl为 预制资源在 资源中的路径\r\n        // 销毁所有弹窗--节点\r\n        http_globalAsset.TipBoxPrefab_model.getChildByName('中间弹窗').removeAllChildren();\r\n        let move_type= ['初始化','回合化','被击前触发','被击后触发','攻击前触发','主动','攻击后']\r\n        //开始实例化预制资源\r\n        let tips_Prefab = cc.instantiate(http_globalAsset.model_zhuangbei_bag_skill_tips);\r\n        // tips_Prefab.getChildByName('D技能图标').getComponent(cc.Sprite).spriteFrame = TipBoxPrefab_icon.getChildByName('P技能').getComponent(cc.Sprite).spriteFrame\r\n        tips_Prefab.getChildByName('D技能图标').getComponent(cc.Sprite).spriteFrame = http_globalAsset.http_base_asset_skill[skill.image]\r\n        tips_Prefab.getChildByName('D技能名称s').getComponent(cc.Label).string=skill.name+'-['+skill.type+']'\r\n        tips_Prefab.getChildByName('D技能消耗s').getComponent(cc.Label).string='消耗：'+Math.abs(skill.needValue)\r\n        var attack=skill.attack==0?'被动':'主动'\r\n        tips_Prefab.getChildByName('D技能类型s').getComponent(cc.Label).string='触发: '+attack\r\n        var star ='';    \r\n        for(var i=0;i<=skill['type'];i++){\r\n            star +='☆';\r\n        }\r\n        tips_Prefab.getChildByName('D技能星级s').getComponent(cc.Label).string='稀有程度：'+star\r\n        var hurtType=skill.hurtType==1?'物理':'法术'\r\n        tips_Prefab.getChildByName('D技能攻击s').getComponent(cc.Label).string='攻击类型: '+hurtType\r\n        tips_Prefab.getChildByName('D技能触发s').getComponent(cc.Label).string='触发几率：'+skill.probability+'%'\r\n        tips_Prefab.getChildByName('D发动时机s').getComponent(cc.Label).string='攻击类型: '+move_type[skill.belong]\r\n        tips_Prefab.getChildByName('D技能来源s').getComponent(cc.Label).string='技能来源：'+skill.words \r\n        tips_Prefab.getChildByName('D技能描述s').getComponent(cc.Label).string='技能说明：'+skill.describe\r\n        //载入生物详情\r\n        http_globalAsset.TipBoxPrefab_model.getChildByName('中间弹窗').addChild(tips_Prefab);\r\n\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}