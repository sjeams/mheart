{"version":3,"sources":["assets\\Script\\home\\biology_skillTools.js"],"names":["HttpHelper","require","httpRequest","cc","Class","Component","properties","biology_detail_alert","TipBoxPrefab_model","info","_this","loader","loadRes","errorMessage","loadedResource_icon","log","Prefab","TipBoxPrefab","instantiate","bind_button","getChildByName","addChild","on","removeAllChildren","getComponent","biology_detail_list","info_list","TOOLS","prop","image","httpUrl","picture","TipBoxPrefab_icon","load","url","err","texture","Sprite","spriteFrame","SpriteFrame","Label","string","name","grade","bindClickEventIcon","Button","find","button"],"mappings":"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","sourceRoot":"/","sourcesContent":["var HttpHelper = require(\"../http\"); \r\nvar httpRequest = new HttpHelper();\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n     //技能图片渲染\r\n     biology_detail_alert(TipBoxPrefab_model,info){\r\n        var _this=this;\r\n        cc.loader.loadRes('/model背包/生物技能', function(errorMessage,loadedResource_icon){\r\n            //检查资源加载\r\n            if( errorMessage ) { cc.log( '载入预制资源失败, 原因:' + errorMessage ); return; }\r\n            if( !(loadedResource_icon instanceof cc.Prefab ) ) { cc.log( '你载入的不是预制资源!' ); return; }\r\n            //开始实例化预制资源\r\n            let   TipBoxPrefab =  cc.instantiate(loadedResource_icon);\r\n            //技能等级\r\n            // TipBoxPrefab.getChildByName('生物数量s').getComponent(cc.Label).string='生物('+info_list.length+'/60)'\r\n            // 由于加载资源的操作是异步的，如果在加载完成前就绑定了事件，有可能会触发事件的自动执行。\r\n            \r\n            \r\n               // 此处进行事件绑定\r\n            _this.bind_button(TipBoxPrefab_model,TipBoxPrefab,info)\r\n            //写入icon\r\n            TipBoxPrefab_model.getChildByName('生物信息').addChild(TipBoxPrefab);\r\n            return TipBoxPrefab_model\r\n        })\r\n        return TipBoxPrefab_model\r\n    },\r\n    //绑定点击事件\r\n    bind_button(TipBoxPrefab_model,TipBoxPrefab,info){\r\n        \r\n        //  cc.find(\"列表/content/gridLayout\",TipBoxPrefab)\r\n        TipBoxPrefab.getChildByName('信息').on('click', function () {\r\n            // 事件处理逻辑\r\n            //移除挂载\r\n            TipBoxPrefab_model.getChildByName('生物信息').removeAllChildren();\r\n            //重新挂载\r\n            TipBoxPrefab_model.getComponent('biology_xinxiTools').biology_detail_alert(TipBoxPrefab_model,info)\r\n        }, this);\r\n        TipBoxPrefab.getChildByName('缘分').on('click', function () {\r\n            // 事件处理逻辑\r\n            //移除挂载\r\n            TipBoxPrefab_model.getChildByName('生物信息').removeAllChildren();\r\n            //重新挂载\r\n            TipBoxPrefab_model.getComponent('biology_yuanfenTools').biology_detail_alert(TipBoxPrefab_model,info)\r\n        }, this);\r\n    },\r\n\r\n    //技能图片渲染\r\n    biology_detail_list(TipBoxPrefab,info_list){\r\n        var _this =this;\r\n        var TOOLS =[];\r\n        var TOOLS = info_list;\r\n        // var TipBoxPrefab_icon=[];\r\n\r\n            //加载预制资源 PrefabUrl为 预制资源在 资源中的路径\r\n            cc.loader.loadRes('/model背包/图标生物', function(errorMessage,loadedResource_icon){\r\n                for (var prop in info_list) {\r\n                    let info = TOOLS[prop];\r\n                    // let image = '/技能图标/'+skill.image;\r\n                    let image =  httpRequest.httpUrl(info.picture);\r\n                //检查资源加载\r\n                \r\n                if( errorMessage ) { cc.log( '载入预制资源失败, 原因:' + errorMessage ); return; }\r\n                if( !(loadedResource_icon instanceof cc.Prefab ) ) { cc.log( '你载入的不是预制资源!' ); return; }\r\n                //开始实例化预制资源\r\n                let   TipBoxPrefab_icon =  cc.instantiate(loadedResource_icon);\r\n                //载入技能图片\r\n                if(image){\r\n                    cc.loader.load({ url: image }, function (err, texture) {  \r\n                    // cc.loader.loadRes(image, cc.SpriteFrame, function (err, texture) { \r\n                        if (err) {\r\n                            return;\r\n                        }\r\n                        // TipBoxPrefab_icon.getChildByName('P头像').getComponent(cc.Sprite).spriteFrame = texture; \r\n                        TipBoxPrefab_icon.getChildByName('P头像').getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n                    });\r\n                }else{\r\n                    TipBoxPrefab_icon.getChildByName('P头像').getComponent(cc.Sprite).spriteFrame = false; \r\n                }\r\n                //技能等级\r\n                TipBoxPrefab_icon.getChildByName('生物名称s').getComponent(cc.Label).string=info.name\r\n                TipBoxPrefab_icon.getChildByName('生物等级s').getComponent(cc.Label).string='等级'+info.grade\r\n\r\n                // 由于加载资源的操作是异步的，如果在加载完成前就绑定了事件，有可能会触发事件的自动执行。\r\n                // 此处进行事件绑定\r\n                TipBoxPrefab_icon.on('click', function () {\r\n                    // 事件处理逻辑\r\n                    _this.bindClickEventIcon(TipBoxPrefab_icon.getComponent(cc.Button), info,TipBoxPrefab,TipBoxPrefab_icon);\r\n                }, this);\r\n                //写入icon\r\n                cc.find(\"列表/content/gridLayout\",TipBoxPrefab).addChild(TipBoxPrefab_icon);\r\n            }\r\n        })\r\n            \r\n     \r\n        return TipBoxPrefab\r\n    },\r\n\r\n    \r\n    // 绑定按钮事件---挂载生物详情\r\n    bindClickEventIcon: function (button, info,TipBoxPrefab,TipBoxPrefab_icon) {\r\n        // cc.log(info)\r\n        //加载预制资源 PrefabUrl为 预制资源在 资源中的路径\r\n\r\n        // 销毁所有弹窗--节点\r\n        // TipBoxPrefab.getChildByName('技能描述').removeAllChildren();\r\n\r\n        // let move_type= ['初始化','回合化','被击前触发','被击后触发','攻击前触发','主动','攻击后']\r\n        // cc.loader.loadRes('/弹窗模型/biology_生物_战斗技能提示', function(errorMessage,loadedResource){\r\n        //     //检查资源加载\r\n        //     if( errorMessage ) { cc.log( '载入预制资源失败, 原因:' + errorMessage ); return; }\r\n        //     if( !(loadedResource instanceof cc.Prefab ) ) { cc.log( '你载入的不是预制资源!' ); return; }\r\n        //     //开始实例化预制资源\r\n        //     let tips_Prefab = cc.instantiate(loadedResource);\r\n        //     tips_Prefab.getChildByName('D技能图标').getComponent(cc.Sprite).spriteFrame = TipBoxPrefab_icon.getChildByName('P技能').getComponent(cc.Sprite).spriteFrame\r\n        //     tips_Prefab.getChildByName('D技能名称s').getComponent(cc.Label).string=skill.name+'-['+skill.type+']'\r\n        //     tips_Prefab.getChildByName('D技能消耗s').getComponent(cc.Label).string='消耗:   '+Math.abs(skill.needValue)\r\n        //     var attack=skill.attack==0?'被动':'主动'\r\n        //     tips_Prefab.getChildByName('D技能类型s').getComponent(cc.Label).string='触发: '+attack\r\n        //     var star ='';    \r\n        //     for(var i=0;i<=skill['type'];i++){\r\n        //         star +='☆';\r\n        //     }\r\n        //     tips_Prefab.getChildByName('D技能星级s').getComponent(cc.Label).string='稀有程度：'+star\r\n        //     var hurtType=skill.hurtType==1?'物理':'法术'\r\n        //     tips_Prefab.getChildByName('D技能攻击s').getComponent(cc.Label).string='攻击类型: '+hurtType\r\n        //     tips_Prefab.getChildByName('D技能触发s').getComponent(cc.Label).string='触发几率：'+skill.probability+'%'\r\n        //     tips_Prefab.getChildByName('D发动时机s').getComponent(cc.Label).string='攻击类型: '+move_type[skill.belong]\r\n        //     tips_Prefab.getChildByName('D技能来源s').getComponent(cc.Label).string='技能来源：'+skill.words \r\n        //     tips_Prefab.getChildByName('D技能描述s').getComponent(cc.Label).string='技能说明：'+skill.describe\r\n\r\n        //     //载入生物详情\r\n        //     TipBoxPrefab.getChildByName('技能描述').addChild(tips_Prefab);\r\n\r\n        // });\r\n\r\n    },\r\n    // update (dt) {},\r\n});\r\n"]}